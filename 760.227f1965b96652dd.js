(self.webpackChunksignmaker=self.webpackChunksignmaker||[]).push([[760],{2760:(ti,At,se)=>{"use strict";se.r(At),se.d(At,{ComponentsModuleModule:()=>_e});var _=se(6895),E=se(4843),f=se(4650);let Ve=(()=>{class Y{}return Y.products=[{id:1,url:null,name:"lit-shape",title:"Face Lit Channel Letters & Logos",short_title:"Face Lit Channel Letters & Logos",subtitle:null,mwo_title:"DM",description:"Our patented LED Lit plug-n-play channel letter system allows non-electricians to install UL listed Lit Channel Letters. The fastest and simplest installation available.",fulldescription:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,deco,selfcontained,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:13,parent_name:"lit-channel-letters-shapes"},{id:23,url:null,name:"lit-shape-raceway",title:"Face Lit Channel Letters & Logos on Raceway",short_title:"Face Lit Channel Letters & Logos on Raceway",subtitle:null,mwo_title:"DM",description:"LED Lit Letters and shapes are mounted to an aluminum container behind the sign. Box contains all electrical connections and installation is simplified.",fulldescription:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,deco,selfcontained,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:14,parent_name:"lit-channel-letters-shapes-raceway"},{id:24,url:null,name:"lit-shape",title:"Face & Halo Lit Channel Letters & Logos",short_title:"Face & Halo Lit Channel Letters & Logos",subtitle:null,mwo_title:"DM",description:"LED Lit through the front and through the back creating a halo effect. The worlds only Plug-n-Play LED lit Face & Halo channel letters.",fulldescription:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,deco,selfcontained,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:15,parent_name:"lit-halo-channel-letters-shapes"},{id:26,url:null,name:"lit-shape",title:"Face & Halo Lit Channel Letters & Logos on Raceway",short_title:"Face & Halo Lit Channel Letters & Logos on Raceway",subtitle:null,mwo_title:"DM",description:"LED Lit through the face and the back creating a halo around the sign. Letters and shapes are mounted to an aluminum container behind the sign containing all electrical components",fulldescription:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,deco,selfcontained,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:16,parent_name:"lit-halo-channel-letters-shapes"},{id:28,url:null,name:"lit-shape",title:"Halo Lit Channel Letters & Logos",short_title:"Halo Lit Channel Letters & Logos",subtitle:null,mwo_title:"DM",description:"Aluminum Letters and Logos with rear facing LEDs creating a halo effect. The worlds only Plug-n-Play LED Halo lit channel letters.",fulldescription:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,deco,selfcontained,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:17,parent_name:"halo-channel-letters-shapes"},{id:29,url:null,name:"lit-shape",title:"Halo Lit Channel Letters & Logos on Raceway",short_title:"Halo Lit Channel Letters & Logos on Raceway",subtitle:null,mwo_title:"DM",description:"Aluminum Letters and Logos with rear facing LEDs creating a halo effect. Letters and shapes are mounted to an aluminum container behind the sign containing all electrical components",fulldescription:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,deco,selfcontained,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:19,parent_name:"halo-channel-letters-shapes"},{id:34,url:"lit-shape-sign",name:"lit-shape-sign",title:"Lit Shape Sign",short_title:"Lit Shape Sign",subtitle:"Superbright LEDs and Easy Mounting System",mwo_title:"SC",description:"Exterior Lit Shape with all aluminum construction. Power components and LEDs are pre-installed inside the sign. High performance plastic face with bright graphics day or night.",fulldescription:"Self Contained Lit Shape Signs are sometime referred to as Cloud Signs or a Lit Contour Sign. All aluminum sign construction with translucent high impact plastic face. Graphics are bright for day and night viewing. Internally lit with LEDs and completely self contained. Build of lightweight and corrosion resistant materials for easy installation and long life. Sign is built similar to channel letters but larger and with thicker, reinforced materials for increased structural durability.",includes:"Your sign will come complete with everything you need to install and light your sign. The only part you will need to supply is screws from you local hardware store to attach your sign to the wall.",category_id:2,construction_id:1,default_shape_id:18,default_size:36,min_size_product_id:1e5,min_size:24,max_size_product_id:100004,max_size:68,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:null,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:1,list_order:80,status:"Active",shipping_video_code:null,install_video_code:"i1i4oAS2sY4",install_url:"/documents/installation-self-contained",builder_panel:"Shape",builder_type:"shapes",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:5,material_max_1:120,material_max_2:60,material_min:null,category:"Lit Shapes",category_name:"lit-shapes",bundle_ind:0,bundle_id:null,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:1,shipping_method_list:null,parts_list:"side_3,side_5,back,face,none,face_leds,clips,trim,deco,selfcontained,none,install_pattern,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:null,parent_name:null},{id:1e5,url:"lit-decor-sign",name:"lit-decor-sign",title:"Lit Decor Sign",short_title:"Lit Decor Sign",subtitle:"Superbright LEDs and Easy Mounting System",mwo_title:"DO",description:"A smaller LED lit interior mounted shape sign. The sign could be mounting on a wall, in a window or set on a shelf. ",fulldescription:"A smaller LED lit shape sign built for interior installation. The sign could be mounting on a wall, in a window or set on a shelf. Great for displaying your logo or other business information. The sign is built similar to our Lit Letters.",includes:"Your sign will come complete with everything you need to install and light your sign. The only part you will need to supply is screws from you local hardware store to attach your sign to the wall.",category_id:2,construction_id:1,default_shape_id:18,default_size:20,min_size_product_id:null,min_size:10,max_size_product_id:34,max_size:30,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:null,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:1,list_order:90,status:"Active",shipping_video_code:null,install_video_code:null,install_url:null,builder_panel:"Shape",builder_type:"shapes",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:5,material_max_1:120,material_max_2:60,material_min:null,category:"Lit Shapes",category_name:"lit-shapes",bundle_ind:0,bundle_id:null,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:1,shipping_method_list:null,parts_list:"side_3,side_5,back,face,none,face_leds,clips,trim,deco,none,install_pattern,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:null,parent_name:null},{id:8,url:null,name:"lit-shape",title:"Lit Squared Cabinet - Single Faced",short_title:"Lit Squared Cabinet - Single Faced",subtitle:null,mwo_title:"DM",description:"Single Face Rectangular Illuminated Cabinet Sign lit from within with High Output LEDs",fulldescription:null,category:"Lit Cabinets",category_name:"lit-channel-letters-and-logos",default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,deco,selfcontained,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:null,parent_name:null},{id:9,url:null,name:"lit-shape",title:"Lit Squared Cabinet - Double Faced",short_title:"Lit Squared Cabinet - Double Faced",subtitle:null,mwo_title:"DM",description:"Double Faced Rectangular Illuminated Cabinet Sign lit from within with High Output LEDs",fulldescription:null,category:"Lit Cabinets",category_name:"lit-channel-letters-and-logos",default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,deco,selfcontained,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:13,parent_name:"lit-channel-letters-shapes"},{id:10,url:"lit-cabinet-shape-singleface",name:"lit-cabinet-shape-single",title:"Lit Shape Cabinet \u2013 Single Faced",short_title:"Lit Shape Cabinet \u2013 Single Faced",subtitle:null,mwo_title:"DM",description:"Single Face Shaped Illuminated Cabinet Sign lit from within with High Output LEDs",fulldescription:null,category:"Lit Cabinets",category_name:"lit-cabinets",default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,deco,selfcontained,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:null,parent_name:null},{id:11,url:null,name:"lit-shape",title:"Lit Shape Cabinet \u2013 Double Faced",short_title:"Lit Shape Cabinet \u2013 Double Faced",subtitle:null,mwo_title:"DM",description:"Double Faced Shaped Illuminated Cabinet Sign lit from within with High Output LEDs",fulldescription:null,category:"Lit Cabinets",category_name:"lit-channel-letters-and-logos",default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,deco,selfcontained,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:null,parent_name:null},{id:100006,url:null,name:"lit-shape",title:"Acrylic Letters & Logo Shapes",short_title:"Acrylic Letters & Logo Shapes",subtitle:null,mwo_title:"DM",description:"Precision cut Solid Acrylic Letters and Logos with high performance paints finish. Easy installation system for interior or exterior display.",fulldescription:null,category:"Dimensional Letters And Logos",category_name:"dimensional-letters-and-logos",parent_id:100008,parent_name:"acrylic-letters-shapes"},{id:100014,url:null,name:"lit-shape",title:"PVC Letters & Logo Shapes",short_title:"PVC Letters & Logo Shapes",subtitle:null,mwo_title:"DM",description:"Precision cut PVC Letters and Logos. Easy Tape or threaded stud installation system for interior display. Faces can be printed an a variety of colors and images.",fulldescription:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,deco,selfcontained,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:100016,parent_name:"lit-channel-letters-shapes"},{id:100009,url:null,name:"lit-shape",title:"Metal Fabricated Letters & Logo Shapes",short_title:"Metal Fabricated Letters & Logo Shapes",subtitle:null,mwo_title:"DM",description:'All Aluminum constructed Letters and logos with 3/16" aluminum faces and 2.5" sides bonded together to form a dimensional sign that is extremely durable and weather proof.',fulldescription:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,deco,selfcontained,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:100011,parent_name:"lit-channel-letters-shapes"}],Y.productsFeatures=[{product_id:34,parent_product_id:null,id:31,name:"face",type:"breakdown",title:"Acrylic Face",description:"High impact acrylic to withstand years of harsh weather and resist the sun's fading, Available in almost any color or full color graphic",list_order:0,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-shape-sign/breakdown-face.jpg?v3",status:"Required"},{product_id:34,parent_product_id:null,id:32,name:"side",type:"breakdown",title:"Sides",description:"Formed Aluminum the match the sign shape with a acrylic polyurethane paint finish. Permanently attached to the aluminum back.",list_order:0,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-shape-sign/breakdown-side.jpg?v3",status:"Required"},{product_id:34,parent_product_id:null,id:33,name:"trim",type:"breakdown",title:"Trim",description:"Decorative band that attaches the face to the sides. Available in standard colors and metal finishes",list_order:0,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-shape-sign/breakdown-trim.jpg?v3",status:"Required"},{product_id:34,parent_product_id:null,id:34,name:"leds",type:"breakdown",title:"LEDs Face Lights",description:"Sign is complete with installed Super Bright LEDs and power system. Our low voltage LEDs are designed for Long Life Application",list_order:0,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-shape-sign/breakdown-leds.jpg?v3",status:"Required"},{product_id:1,parent_product_id:13,id:31,name:"face",type:"breakdown",title:"Acrylic Face",description:"High impact acrylic to withstand years of harsh weather and resist the sun's fading, Available in almost any color or full color graphic",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes/breakdown-face.jpg?v3",status:"Required"},{product_id:2,parent_product_id:13,id:31,name:"face",type:"breakdown",title:"Acrylic Face",description:"High impact acrylic to withstand years of harsh weather and resist the sun's fading, Available in almost any color or full color graphic",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes/breakdown-face.jpg?v3",status:"Required"},{product_id:22,parent_product_id:14,id:31,name:"face",type:"breakdown",title:"Acrylic Face",description:"High impact acrylic to withstand years of harsh weather and resist the sun's fading, Available in almost any color or full color graphic",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes-raceway/breakdown-face.jpg?v3",status:"Required"},{product_id:23,parent_product_id:14,id:31,name:"face",type:"breakdown",title:"Acrylic Face",description:"High impact acrylic to withstand years of harsh weather and resist the sun's fading, Available in almost any color or full color graphic",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes-raceway/breakdown-face.jpg?v3",status:"Required"},{product_id:24,parent_product_id:15,id:31,name:"face",type:"breakdown",title:"Acrylic Face",description:"High impact acrylic to withstand years of harsh weather and resist the sun's fading, Available in almost any color or full color graphic",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes/breakdown-face.jpg?v3",status:"Required"},{product_id:25,parent_product_id:15,id:31,name:"face",type:"breakdown",title:"Acrylic Face",description:"High impact acrylic to withstand years of harsh weather and resist the sun's fading, Available in almost any color or full color graphic",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes/breakdown-face.jpg?v3",status:"Required"},{product_id:26,parent_product_id:16,id:31,name:"face",type:"breakdown",title:"Acrylic Face",description:"High impact acrylic to withstand years of harsh weather and resist the sun's fading, Available in almost any color or full color graphic",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes-raceway/breakdown-face.jpg?v3",status:"Required"},{product_id:27,parent_product_id:16,id:31,name:"face",type:"breakdown",title:"Acrylic Face",description:"High impact acrylic to withstand years of harsh weather and resist the sun's fading, Available in almost any color or full color graphic",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes-raceway/breakdown-face.jpg?v3",status:"Required"},{product_id:28,parent_product_id:17,id:40,name:"metalface",type:"breakdown",title:"Metal Face",description:"Non lit solid aluminum face can have painted or printed graphics, face is permanently attached to the sides for a solid metal look.",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes/breakdown-metalface.jpg?v3",status:"Required"},{product_id:29,parent_product_id:17,id:40,name:"metalface",type:"breakdown",title:"Metal Face",description:"Non lit solid aluminum face can have painted or printed graphics, face is permanently attached to the sides for a solid metal look.",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes/breakdown-metalface.jpg?v3",status:"Required"},{product_id:30,parent_product_id:19,id:40,name:"metalface",type:"breakdown",title:"Metal Face",description:"Non lit solid aluminum face can have painted or printed graphics, face is permanently attached to the sides for a solid metal look.",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes-raceway/breakdown-metalface.jpg?v3",status:"Required"},{product_id:31,parent_product_id:19,id:40,name:"metalface",type:"breakdown",title:"Metal Face",description:"Non lit solid aluminum face can have painted or printed graphics, face is permanently attached to the sides for a solid metal look.",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes-raceway/breakdown-metalface.jpg?v3",status:"Required"},{product_id:100009,parent_product_id:100011,id:40,name:"metalface",type:"breakdown",title:"Metal Face",description:"Non lit solid aluminum face can have painted or printed graphics, face is permanently attached to the sides for a solid metal look.",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/metal-letters-shapes/breakdown-metalface.jpg?v3",status:"Required"},{product_id:100010,parent_product_id:100011,id:40,name:"metalface",type:"breakdown",title:"Metal Face",description:"Non lit solid aluminum face can have painted or printed graphics, face is permanently attached to the sides for a solid metal look.",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/metal-letters-shapes/breakdown-metalface.jpg?v3",status:"Required"},{product_id:100006,parent_product_id:100008,id:100093,name:"face",type:"breakdown",title:"Acrylic Face",description:"Non lit solid acrylic face can have painted or printed graphics with a solid metal look.",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/acrylic-letters-shapes/breakdown-face.jpg?v3",status:"Required"},{product_id:100007,parent_product_id:100008,id:100093,name:"face",type:"breakdown",title:"Acrylic Face",description:"Non lit solid acrylic face can have painted or printed graphics with a solid metal look.",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/acrylic-letters-shapes/breakdown-face.jpg?v3",status:"Required"},{product_id:100014,parent_product_id:100016,id:100096,name:"face",type:"breakdown",title:"PVC Face",description:"Non lit solid PVC face can have painted or printed graphics with a satin interior finish.",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/pvc-letters-shapes/breakdown-face.jpg?v3",status:"Required"},{product_id:100015,parent_product_id:100016,id:100096,name:"face",type:"breakdown",title:"PVC Face",description:"Non lit solid PVC face can have painted or printed graphics with a satin interior finish.",list_order:1,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/pvc-letters-shapes/breakdown-face.jpg?v3",status:"Required"},{product_id:1,parent_product_id:13,id:33,name:"trim",type:"breakdown",title:"Trim",description:"Decorative band that attaches the face to the sides. Available in standard colors and metal finishes",list_order:2,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes/breakdown-trim.jpg?v3",status:"Required"},{product_id:2,parent_product_id:13,id:33,name:"trim",type:"breakdown",title:"Trim",description:"Decorative band that attaches the face to the sides. Available in standard colors and metal finishes",list_order:2,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes/breakdown-trim.jpg?v3",status:"Required"},{product_id:22,parent_product_id:14,id:33,name:"trim",type:"breakdown",title:"Trim",description:"Decorative band that attaches the face to the sides. Available in standard colors and metal finishes",list_order:2,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes-raceway/breakdown-trim.jpg?v3",status:"Required"},{product_id:23,parent_product_id:14,id:33,name:"trim",type:"breakdown",title:"Trim",description:"Decorative band that attaches the face to the sides. Available in standard colors and metal finishes",list_order:2,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes-raceway/breakdown-trim.jpg?v3",status:"Required"},{product_id:24,parent_product_id:15,id:33,name:"trim",type:"breakdown",title:"Trim",description:"Decorative band that attaches the face to the sides. Available in standard colors and metal finishes",list_order:2,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes/breakdown-trim.jpg?v3",status:"Required"},{product_id:25,parent_product_id:15,id:33,name:"trim",type:"breakdown",title:"Trim",description:"Decorative band that attaches the face to the sides. Available in standard colors and metal finishes",list_order:2,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes/breakdown-trim.jpg?v3",status:"Required"},{product_id:26,parent_product_id:16,id:33,name:"trim",type:"breakdown",title:"Trim",description:"Decorative band that attaches the face to the sides. Available in standard colors and metal finishes",list_order:2,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes-raceway/breakdown-trim.jpg?v3",status:"Required"},{product_id:27,parent_product_id:16,id:33,name:"trim",type:"breakdown",title:"Trim",description:"Decorative band that attaches the face to the sides. Available in standard colors and metal finishes",list_order:2,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes-raceway/breakdown-trim.jpg?v3",status:"Required"},{product_id:100009,parent_product_id:100011,id:41,name:"metalside",type:"breakdown",title:"Metal Side",description:"Formed Aluminum the match the sign shape with a acrylic polyurethane paint finish. Can be painted to match the face or as a accent color. Permanently attached to the sign face.",list_order:2,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/metal-letters-shapes/breakdown-metalside.jpg?v3",status:"Required"},{product_id:100010,parent_product_id:100011,id:41,name:"metalside",type:"breakdown",title:"Metal Side",description:"Formed Aluminum the match the sign shape with a acrylic polyurethane paint finish. Can be painted to match the face or as a accent color. Permanently attached to the sign face.",list_order:2,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/metal-letters-shapes/breakdown-metalside.jpg?v3",status:"Required"},{product_id:100006,parent_product_id:100008,id:100094,name:"side",type:"breakdown",title:"Acrylic Side",description:'1/2" thick sides can be painted to match the face or as a accent color. Permanently attached to the sign face.',list_order:2,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/acrylic-letters-shapes/breakdown-side.jpg?v3",status:"Required"},{product_id:100007,parent_product_id:100008,id:100094,name:"side",type:"breakdown",title:"Acrylic Side",description:'1/2" thick sides can be painted to match the face or as a accent color. Permanently attached to the sign face.',list_order:2,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/acrylic-letters-shapes/breakdown-side.jpg?v3",status:"Required"},{product_id:100014,parent_product_id:100016,id:100097,name:"side",type:"breakdown",title:"PVC Side",description:'1/2" thick sides can be black or white. Permanently attached to the sign face.',list_order:2,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/pvc-letters-shapes/breakdown-side.jpg?v3",status:"Required"},{product_id:100015,parent_product_id:100016,id:100097,name:"side",type:"breakdown",title:"PVC Side",description:'1/2" thick sides can be black or white. Permanently attached to the sign face.',list_order:2,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/pvc-letters-shapes/breakdown-side.jpg?v3",status:"Required"},{product_id:1,parent_product_id:13,id:32,name:"side",type:"breakdown",title:"Sides",description:"Formed Aluminum the match the sign shape with a acrylic polyurethane paint finish. Permanently attached to the aluminum back.",list_order:3,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes/breakdown-side.jpg?v3",status:"Required"},{product_id:2,parent_product_id:13,id:32,name:"side",type:"breakdown",title:"Sides",description:"Formed Aluminum the match the sign shape with a acrylic polyurethane paint finish. Permanently attached to the aluminum back.",list_order:3,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes/breakdown-side.jpg?v3",status:"Required"},{product_id:22,parent_product_id:14,id:32,name:"side",type:"breakdown",title:"Sides",description:"Formed Aluminum the match the sign shape with a acrylic polyurethane paint finish. Permanently attached to the aluminum back.",list_order:3,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes-raceway/breakdown-side.jpg?v3",status:"Required"},{product_id:23,parent_product_id:14,id:32,name:"side",type:"breakdown",title:"Sides",description:"Formed Aluminum the match the sign shape with a acrylic polyurethane paint finish. Permanently attached to the aluminum back.",list_order:3,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes-raceway/breakdown-side.jpg?v3",status:"Required"},{product_id:24,parent_product_id:15,id:32,name:"side",type:"breakdown",title:"Sides",description:"Formed Aluminum the match the sign shape with a acrylic polyurethane paint finish. Permanently attached to the aluminum back.",list_order:3,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes/breakdown-side.jpg?v3",status:"Required"},{product_id:25,parent_product_id:15,id:32,name:"side",type:"breakdown",title:"Sides",description:"Formed Aluminum the match the sign shape with a acrylic polyurethane paint finish. Permanently attached to the aluminum back.",list_order:3,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes/breakdown-side.jpg?v3",status:"Required"},{product_id:26,parent_product_id:16,id:32,name:"side",type:"breakdown",title:"Sides",description:"Formed Aluminum the match the sign shape with a acrylic polyurethane paint finish. Permanently attached to the aluminum back.",list_order:3,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes-raceway/breakdown-side.jpg?v3",status:"Required"},{product_id:27,parent_product_id:16,id:32,name:"side",type:"breakdown",title:"Sides",description:"Formed Aluminum the match the sign shape with a acrylic polyurethane paint finish. Permanently attached to the aluminum back.",list_order:3,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes-raceway/breakdown-side.jpg?v3",status:"Required"},{product_id:28,parent_product_id:17,id:41,name:"metalside",type:"breakdown",title:"Metal Side",description:"Formed Aluminum the match the sign shape with a acrylic polyurethane paint finish. Can be painted to match the face or as a accent color. Permanently attached to the sign face.",list_order:3,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes/breakdown-metalside.jpg?v3",status:"Required"},{product_id:29,parent_product_id:17,id:41,name:"metalside",type:"breakdown",title:"Metal Side",description:"Formed Aluminum the match the sign shape with a acrylic polyurethane paint finish. Can be painted to match the face or as a accent color. Permanently attached to the sign face.",list_order:3,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes/breakdown-metalside.jpg?v3",status:"Required"},{product_id:30,parent_product_id:19,id:41,name:"metalside",type:"breakdown",title:"Metal Side",description:"Formed Aluminum the match the sign shape with a acrylic polyurethane paint finish. Can be painted to match the face or as a accent color. Permanently attached to the sign face.",list_order:3,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes-raceway/breakdown-metalside.jpg?v3",status:"Required"},{product_id:31,parent_product_id:19,id:41,name:"metalside",type:"breakdown",title:"Metal Side",description:"Formed Aluminum the match the sign shape with a acrylic polyurethane paint finish. Can be painted to match the face or as a accent color. Permanently attached to the sign face.",list_order:3,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes-raceway/breakdown-metalside.jpg?v3",status:"Required"},{product_id:100009,parent_product_id:100011,id:100092,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide contrast between the letters and the mounting surface. Built of aluminum and plastic composite material.",list_order:3,optional_ind:1,version:1,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/metal-letters-shapes/breakdown-background.jpg?v3",status:"Optional"},{product_id:100010,parent_product_id:100011,id:100092,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide contrast between the letters and the mounting surface. Built of aluminum and plastic composite material.",list_order:3,optional_ind:1,version:1,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/metal-letters-shapes/breakdown-background.jpg?v3",status:"Optional"},{product_id:100006,parent_product_id:100008,id:100095,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide contrast between the letters and the mounting surface. Built of aluminum and plastic composite material.",list_order:3,optional_ind:1,version:1,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/acrylic-letters-shapes/breakdown-background.jpg?v3",status:"Optional"},{product_id:100007,parent_product_id:100008,id:100095,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide contrast between the letters and the mounting surface. Built of aluminum and plastic composite material.",list_order:3,optional_ind:1,version:1,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/acrylic-letters-shapes/breakdown-background.jpg?v3",status:"Optional"},{product_id:100014,parent_product_id:100016,id:100098,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide contrast between the letters and the mounting surface. Built of aluminum and plastic composite material.",list_order:3,optional_ind:1,version:1,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/pvc-letters-shapes/breakdown-background.jpg?v3",status:"Optional"},{product_id:100015,parent_product_id:100016,id:100098,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide contrast between the letters and the mounting surface. Built of aluminum and plastic composite material.",list_order:3,optional_ind:1,version:1,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/pvc-letters-shapes/breakdown-background.jpg?v3",status:"Optional"},{product_id:22,parent_product_id:14,id:39,name:"raceway",type:"breakdown",title:"Raceway",description:"Sign is pre mounted metal rectangular tube running the length of the sign. All electrical connections and wiring is inside raceway. Built in flange top and bottom for mounting.",list_order:4,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes-raceway/breakdown-raceway.jpg?v3",status:"Required"},{product_id:23,parent_product_id:14,id:39,name:"raceway",type:"breakdown",title:"Raceway",description:"Sign is pre mounted metal rectangular tube running the length of the sign. All electrical connections and wiring is inside raceway. Built in flange top and bottom for mounting.",list_order:4,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes-raceway/breakdown-raceway.jpg?v3",status:"Required"},{product_id:26,parent_product_id:16,id:39,name:"raceway",type:"breakdown",title:"Raceway",description:"Sign is pre mounted metal rectangular tube running the length of the sign. All electrical connections and wiring is inside raceway. Built in flange top and bottom for mounting.",list_order:4,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes-raceway/breakdown-raceway.jpg?v3",status:"Required"},{product_id:27,parent_product_id:16,id:39,name:"raceway",type:"breakdown",title:"Raceway",description:"Sign is pre mounted metal rectangular tube running the length of the sign. All electrical connections and wiring is inside raceway. Built in flange top and bottom for mounting.",list_order:4,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes-raceway/breakdown-raceway.jpg?v3",status:"Required"},{product_id:30,parent_product_id:19,id:39,name:"raceway",type:"breakdown",title:"Raceway",description:"Sign is pre mounted metal rectangular tube running the length of the sign. All electrical connections and wiring is inside raceway. Built in flange top and bottom for mounting.",list_order:4,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes-raceway/breakdown-raceway.jpg?v3",status:"Required"},{product_id:31,parent_product_id:19,id:39,name:"raceway",type:"breakdown",title:"Raceway",description:"Sign is pre mounted metal rectangular tube running the length of the sign. All electrical connections and wiring is inside raceway. Built in flange top and bottom for mounting.",list_order:4,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes-raceway/breakdown-raceway.jpg?v3",status:"Required"},{product_id:1,parent_product_id:13,id:34,name:"leds",type:"breakdown",title:"LEDs Face Lights",description:"Sign is complete with installed Super Bright LEDs and power system. Our low voltage LEDs are designed for Long Life Application",list_order:5,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes/breakdown-leds.jpg?v3",status:"Required"},{product_id:2,parent_product_id:13,id:34,name:"leds",type:"breakdown",title:"LEDs Face Lights",description:"Sign is complete with installed Super Bright LEDs and power system. Our low voltage LEDs are designed for Long Life Application",list_order:5,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes/breakdown-leds.jpg?v3",status:"Required"},{product_id:22,parent_product_id:14,id:34,name:"leds",type:"breakdown",title:"LEDs Face Lights",description:"Sign is complete with installed Super Bright LEDs and power system. Our low voltage LEDs are designed for Long Life Application",list_order:5,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes-raceway/breakdown-leds.jpg?v3",status:"Required"},{product_id:23,parent_product_id:14,id:34,name:"leds",type:"breakdown",title:"LEDs Face Lights",description:"Sign is complete with installed Super Bright LEDs and power system. Our low voltage LEDs are designed for Long Life Application",list_order:5,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes-raceway/breakdown-leds.jpg?v3",status:"Required"},{product_id:24,parent_product_id:15,id:34,name:"leds",type:"breakdown",title:"LEDs Face Lights",description:"Sign is complete with installed Super Bright LEDs and power system. Our low voltage LEDs are designed for Long Life Application",list_order:5,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes/breakdown-leds.jpg?v3",status:"Required"},{product_id:25,parent_product_id:15,id:34,name:"leds",type:"breakdown",title:"LEDs Face Lights",description:"Sign is complete with installed Super Bright LEDs and power system. Our low voltage LEDs are designed for Long Life Application",list_order:5,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes/breakdown-leds.jpg?v3",status:"Required"},{product_id:26,parent_product_id:16,id:34,name:"leds",type:"breakdown",title:"LEDs Face Lights",description:"Sign is complete with installed Super Bright LEDs and power system. Our low voltage LEDs are designed for Long Life Application",list_order:5,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes-raceway/breakdown-leds.jpg?v3",status:"Required"},{product_id:27,parent_product_id:16,id:34,name:"leds",type:"breakdown",title:"LEDs Face Lights",description:"Sign is complete with installed Super Bright LEDs and power system. Our low voltage LEDs are designed for Long Life Application",list_order:5,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes-raceway/breakdown-leds.jpg?v3",status:"Required"},{product_id:24,parent_product_id:15,id:37,name:"haloleds",type:"breakdown",title:"Halo LEDs",description:"Preinstalled and aimed to project light at mounting surface, behind the sign. This light creates a halo around the sign.",list_order:6,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes/breakdown-haloleds.jpg?v3",status:"Required"},{product_id:25,parent_product_id:15,id:37,name:"haloleds",type:"breakdown",title:"Halo LEDs",description:"Preinstalled and aimed to project light at mounting surface, behind the sign. This light creates a halo around the sign.",list_order:6,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes/breakdown-haloleds.jpg?v3",status:"Required"},{product_id:26,parent_product_id:16,id:37,name:"haloleds",type:"breakdown",title:"Halo LEDs",description:"Preinstalled and aimed to project light at mounting surface, behind the sign. This light creates a halo around the sign.",list_order:6,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes-raceway/breakdown-haloleds.jpg?v3",status:"Required"},{product_id:27,parent_product_id:16,id:37,name:"haloleds",type:"breakdown",title:"Halo LEDs",description:"Preinstalled and aimed to project light at mounting surface, behind the sign. This light creates a halo around the sign.",list_order:6,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes-raceway/breakdown-haloleds.jpg?v3",status:"Required"},{product_id:28,parent_product_id:17,id:37,name:"haloleds",type:"breakdown",title:"Halo LEDs",description:"Preinstalled and aimed to project light at mounting surface, behind the sign. This light creates a halo around the sign.",list_order:6,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes/breakdown-haloleds.jpg?v3",status:"Required"},{product_id:29,parent_product_id:17,id:37,name:"haloleds",type:"breakdown",title:"Halo LEDs",description:"Preinstalled and aimed to project light at mounting surface, behind the sign. This light creates a halo around the sign.",list_order:6,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes/breakdown-haloleds.jpg?v3",status:"Required"},{product_id:30,parent_product_id:19,id:37,name:"haloleds",type:"breakdown",title:"Halo LEDs",description:"Preinstalled and aimed to project light at mounting surface, behind the sign. This light creates a halo around the sign.",list_order:6,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes-raceway/breakdown-haloleds.jpg?v3",status:"Required"},{product_id:31,parent_product_id:19,id:37,name:"haloleds",type:"breakdown",title:"Halo LEDs",description:"Preinstalled and aimed to project light at mounting surface, behind the sign. This light creates a halo around the sign.",list_order:6,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes-raceway/breakdown-haloleds.jpg?v3",status:"Required"},{product_id:1,parent_product_id:13,id:38,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide a shape for halo light to reflect against. Built of aluminum and plastic composite material",list_order:9,optional_ind:1,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes/breakdown-background.jpg?v3",status:"Optional"},{product_id:2,parent_product_id:13,id:38,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide a shape for halo light to reflect against. Built of aluminum and plastic composite material",list_order:9,optional_ind:1,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes/breakdown-background.jpg?v3",status:"Optional"},{product_id:22,parent_product_id:14,id:38,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide a shape for halo light to reflect against. Built of aluminum and plastic composite material",list_order:9,optional_ind:1,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes-raceway/breakdown-background.jpg?v3",status:"Optional"},{product_id:23,parent_product_id:14,id:38,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide a shape for halo light to reflect against. Built of aluminum and plastic composite material",list_order:9,optional_ind:1,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-channel-letters-shapes-raceway/breakdown-background.jpg?v3",status:"Optional"},{product_id:24,parent_product_id:15,id:38,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide a shape for halo light to reflect against. Built of aluminum and plastic composite material",list_order:9,optional_ind:1,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes/breakdown-background.jpg?v3",status:"Optional"},{product_id:25,parent_product_id:15,id:38,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide a shape for halo light to reflect against. Built of aluminum and plastic composite material",list_order:9,optional_ind:1,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes/breakdown-background.jpg?v3",status:"Optional"},{product_id:26,parent_product_id:16,id:38,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide a shape for halo light to reflect against. Built of aluminum and plastic composite material",list_order:9,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes-raceway/breakdown-background.jpg?v3",status:"Required"},{product_id:27,parent_product_id:16,id:38,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide a shape for halo light to reflect against. Built of aluminum and plastic composite material",list_order:9,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/lit-halo-channel-letters-shapes-raceway/breakdown-background.jpg?v3",status:"Required"},{product_id:28,parent_product_id:17,id:38,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide a shape for halo light to reflect against. Built of aluminum and plastic composite material",list_order:9,optional_ind:1,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes/breakdown-background.jpg?v3",status:"Optional"},{product_id:29,parent_product_id:17,id:38,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide a shape for halo light to reflect against. Built of aluminum and plastic composite material",list_order:9,optional_ind:1,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes/breakdown-background.jpg?v3",status:"Optional"},{product_id:30,parent_product_id:19,id:38,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide a shape for halo light to reflect against. Built of aluminum and plastic composite material",list_order:9,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes-raceway/breakdown-background.jpg?v3",status:"Required"},{product_id:31,parent_product_id:19,id:38,name:"background",type:"breakdown",title:"Background",description:"Shape mounted behind sign that provide a accent color outline and can provide a shape for halo light to reflect against. Built of aluminum and plastic composite material",list_order:9,optional_ind:0,version:2,part_count:"0",parts:null,part_list:null,shipping_method_count:"0",shipping_methods:null,shipping_method_list:null,preview_url:"2020/products/halo-channel-letters-shapes-raceway/breakdown-background.jpg?v3",status:"Required"}],Y.productsDtls=[{id:2,url:null,name:"lit-shape",title:"Face Lit Logo Shape",short_title:null,subtitle:null,mwo_title:"DM",description:"The worlds only Plug-n-Play LED lit channel letters. Build for easy installation by anyone.",fulldescription:null,includes:null,category_id:1,construction_id:1,default_shape_id:18,default_size:24,min_size_product_id:null,min_size:10,max_size_product_id:null,max_size:68,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:null,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:0,list_order:0,status:"Hidden",shipping_video_code:null,install_video_code:"CH-AhI4rBHQ",install_url:"/documents/installation-ezlit-letters-and-logos",builder_panel:"Shape",builder_type:"shapes",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:5,material_max_1:120,material_max_2:60,material_min:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",bundle_ind:0,bundle_id:13,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:1,shipping_method_list:null,parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,deco,selfcontained,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:13,parent_name:"lit-channel-letters-shapes"},{id:23,url:null,name:"lit-shape-raceway",title:"Face Lit Logo Shape on Raceway",short_title:null,subtitle:null,mwo_title:"RW",description:"Sign and electrical components are pre-mounted to a lightweight metal container spanning the length of the sign.",fulldescription:null,includes:null,category_id:1,construction_id:1,default_shape_id:18,default_size:24,min_size_product_id:null,min_size:10,max_size_product_id:null,max_size:68,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:null,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:0,list_order:0,status:"Hidden",shipping_video_code:null,install_video_code:null,install_url:"/documents/installation-raceway-letters-and-logos",builder_panel:"Shape",builder_type:"shapes",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:5,material_max_1:120,material_max_2:60,material_min:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",bundle_ind:0,bundle_id:14,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:1,shipping_method_list:null,parts_list:"side_3,back,face,none,face_leds,side_5,trim,raceway,raceway,backdrop,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:14,parent_name:"lit-channel-letters-shapes-raceway"},{id:25,url:null,name:"lit-halo-shape",title:"Face & Halo Lit Logo Shape",short_title:null,subtitle:null,mwo_title:"FHL",description:"The worlds only Plug-n-Play LED lit Face & Halo channel letters. Build for easy installation by anyone. ",fulldescription:null,includes:null,category_id:1,construction_id:2,default_shape_id:18,default_size:24,min_size_product_id:null,min_size:10,max_size_product_id:null,max_size:68,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:null,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:0,list_order:0,status:"Hidden",shipping_video_code:null,install_video_code:null,install_url:"/documents/installation-halo-letters-and-logos",builder_panel:"Shape",builder_type:"shapes",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:5,material_max_1:120,material_max_2:60,material_min:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",bundle_ind:0,bundle_id:15,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:1,shipping_method_list:null,parts_list:"face,plug-n-play,side_5,trim,backdrop,face_leds,back_leds,standoffs,back_polycarb,back_center,install_pattern,custom_shape,printedface,trim_painted,side_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:15,parent_name:"lit-halo-channel-letters-shapes"},{id:27,url:null,name:"lit-halo-shape-raceway",title:"Face & Halo Lit Logo Shape on Raceway",short_title:null,subtitle:null,mwo_title:"FHRW",description:null,fulldescription:null,includes:null,category_id:1,construction_id:2,default_shape_id:18,default_size:24,min_size_product_id:null,min_size:10,max_size_product_id:null,max_size:68,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:null,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:0,list_order:0,status:"Hidden",shipping_video_code:null,install_video_code:null,install_url:"/documents/installation-raceway-letters-and-logos",builder_panel:"Shape",builder_type:"shapes",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:5,material_max_1:120,material_max_2:60,material_min:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",bundle_ind:0,bundle_id:16,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:1,shipping_method_list:null,parts_list:"face,raceway,raceway,side_5,trim,backdrop,face_leds,back_leds,standoffs,back_polycarb,back_center,custom_shape,printedface,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:16,parent_name:"lit-halo-channel-letters-shapes-raceway"},{id:29,url:null,name:"halo-shape",title:"Halo Lit Logo Shape",short_title:null,subtitle:null,mwo_title:"HL",description:null,fulldescription:null,includes:null,category_id:1,construction_id:3,default_shape_id:18,default_size:24,min_size_product_id:null,min_size:3,max_size_product_id:null,max_size:48,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:null,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:0,list_order:0,status:"Hidden",shipping_video_code:null,install_video_code:null,install_url:"/documents/installation-halo-letters-and-logos",builder_panel:"Shape",builder_type:"shapes",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:15,material_max_1:120,material_max_2:60,material_min:6,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",bundle_ind:0,bundle_id:17,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:1,shipping_method_list:null,parts_list:"back_leds,standoffs,plug-n-play,side_2,backdrop,metalface,back_polycarb,install_pattern,face_and_side_painted,paint_inside,litmetalacrylicface,custom_shape,printedface,metal_face_and_side_different,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:17,parent_name:"halo-channel-letters-shapes"},{id:31,url:null,name:"halo-shape-raceway",title:"Halo Lit Logo Shape on Raceway",short_title:null,subtitle:null,mwo_title:"HLRW",description:null,fulldescription:null,includes:null,category_id:1,construction_id:3,default_shape_id:18,default_size:24,min_size_product_id:null,min_size:3,max_size_product_id:null,max_size:48,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:null,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:0,list_order:0,status:"Hidden",shipping_video_code:null,install_video_code:null,install_url:"/documents/installation-raceway-letters-and-logos",builder_panel:"Shape",builder_type:"shapes",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:15,material_max_1:120,material_max_2:60,material_min:6,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",bundle_ind:0,bundle_id:19,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:1,shipping_method_list:null,parts_list:"back_leds,raceway,raceway,side_2,backdrop,metalface,standoffs,back_polycarb,face_and_side_painted,paint_inside,litmetalacrylicface,custom_shape,printedface,metal_face_and_side_different,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:19,parent_name:"halo-channel-letters-shapes-raceway"},{id:34,url:"lit-shape-sign",name:"lit-shape-sign",title:"Lit Shape Sign",short_title:"Lit Shape Sign",subtitle:"Superbright LEDs and Easy Mounting System",mwo_title:"SC",description:"Exterior Lit Shape with all aluminum construction. Power components and LEDs are pre-installed inside the sign. High performance plastic face with bright graphics day or night.",fulldescription:"Self Contained Lit Shape Signs are sometime referred to as Cloud Signs or a Lit Contour Sign. All aluminum sign construction with translucent high impact plastic face. Graphics are bright for day and night viewing. Internally lit with LEDs and completely self contained. Build of lightweight and corrosion resistant materials for easy installation and long life. Sign is built similar to channel letters but larger and with thicker, reinforced materials for increased structural durability.",includes:"Your sign will come complete with everything you need to install and light your sign. The only part you will need to supply is screws from you local hardware store to attach your sign to the wall.",category_id:2,construction_id:1,default_shape_id:18,default_size:36,min_size_product_id:1e5,min_size:24,max_size_product_id:100004,max_size:68,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:null,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:1,list_order:80,status:"Active",shipping_video_code:null,install_video_code:"i1i4oAS2sY4",install_url:"/documents/installation-self-contained",builder_panel:"Shape",builder_type:"shapes",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:5,material_max_1:120,material_max_2:60,material_min:null,category:"Lit Shapes",category_name:"lit-shapes",bundle_ind:0,bundle_id:null,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:1,shipping_method_list:null,parts_list:"side_3,side_5,back,face,none,face_leds,clips,trim,deco,selfcontained,none,install_pattern,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:null,parent_name:null},{id:1e5,url:"lit-decor-sign",name:"lit-decor-sign",title:"Lit Decor Sign",short_title:"Lit Decor Sign",subtitle:"Superbright LEDs and Easy Mounting System",mwo_title:"DO",description:"A smaller LED lit interior mounted shape sign. The sign could be mounting on a wall, in a window or set on a shelf. ",fulldescription:"A smaller LED lit shape sign built for interior installation. The sign could be mounting on a wall, in a window or set on a shelf. Great for displaying your logo or other business information. The sign is built similar to our Lit Letters.",includes:"Your sign will come complete with everything you need to install and light your sign. The only part you will need to supply is screws from you local hardware store to attach your sign to the wall.",category_id:2,construction_id:1,default_shape_id:18,default_size:20,min_size_product_id:null,min_size:10,max_size_product_id:34,max_size:30,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:null,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:1,list_order:90,status:"Active",shipping_video_code:null,install_video_code:null,install_url:null,builder_panel:"Shape",builder_type:"shapes",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:5,material_max_1:120,material_max_2:60,material_min:null,category:"Lit Shapes",category_name:"lit-shapes",bundle_ind:0,bundle_id:null,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:1,shipping_method_list:null,parts_list:"side_3,side_5,back,face,none,face_leds,clips,trim,deco,none,install_pattern,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:null,parent_name:null},{id:100002,url:null,name:"lit-cabinet-retainer-single",title:"Lit Squared Cabinet - Single Faced",short_title:"Lit Squared Cabinet - Single Faced",subtitle:null,mwo_title:"DM",description:"Single Face Rectangular Illuminated Cabinet Sign lit from within with High Output LEDs",fulldescription:null,category:"Lit Cabinets",category_name:"lit-channel-letters-and-logos",default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,deco,selfcontained,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:null,parent_name:null},{id:100003,url:null,name:"lit-cabinet-retainer-double",title:"Lit Squared Cabinet - Double Faced",short_title:"Lit Squared Cabinet - Double Faced",subtitle:null,mwo_title:"DM",description:"Double Faced Rectangular Illuminated Cabinet Sign lit from within with High Output LEDs",fulldescription:null,category:"Lit Cabinets",category_name:"lit-channel-letters-and-logos",default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,deco,selfcontained,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"logoshapes",parent_id:null,parent_name:"lit-channel-letters-shapes"},{id:100004,url:"lit-cabinet-shape-singleface",name:"lit-cabinet-shape-single",title:"Lit Shape Cabinet \u2013 Single Faced",short_title:"Lit Shape Cabinet Single Face",subtitle:null,mwo_title:"CSSF",description:"Single Face Shaped Illuminated Cabinet Sign lit from within with High Output LEDs",fulldescription:"Single Face Shaped Illuminated Cabinet Sign is lit through the faces with High Output LEDs. Sign can be but as in a variety of shapes, including your custom shape. Face of the sign is held with a metal retainer which makes changing the sign face easy. The LED power systems are built into the sign for a simple installation onto a structure. Built with all aluminum construction to be strong, rigid and lightweight. This product is sometimes referred to as a Contour Box sign or a Contour Light Box Sign.",includes:"Your sign will come complete with everything you need to install and light your sign. The only part you will need to supply is screws from you local hardware store to attach your sign to the wall.",category_id:3,construction_id:11,default_shape_id:200574,default_size:60,min_size_product_id:34,min_size:26,max_size_product_id:null,max_size:85,size_increments:"1.00",standard_sizes:"24,30,36,42,48",default_style_id:15,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:1,list_order:102,status:"Active",shipping_video_code:null,install_video_code:null,install_url:null,builder_panel:"Cabinet",builder_type:"cabinet",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:5,material_max_1:120,material_max_2:72,material_min:18,category:"Lit Cabinets",category_name:"lit-cabinets",bundle_ind:0,bundle_id:null,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:1,shipping_method_list:null,parts_list:"retainerfaceflat1,none,clips,selfcontained,freight,ups,cabinet_leds,outer_retainer,back_retainer_sign,custom_shape,side_painted,printedface,crate_wooden_freight,printednotface,Outer Retainer Return Shaped,Inner Retainer Shaped,overlayedface,Internal 1inch Frame,side_retainer_shape_sign",styles_list:"cabinetshapes",parent_id:null,parent_name:null},{id:100005,url:"lit-cabinet-shape-doubleface",name:"lit-cabinet-shape-double",title:"Lit Shape Cabinet \u2013 Double Faced",short_title:"Lit Shape Cabinet Double Face",subtitle:null,mwo_title:"CSDF",description:"Double Faced Shaped Illuminated Cabinet Sign lit from within with High Output LEDs",fulldescription:"Double Face Shaped Illuminated Cabinet Sign is lit through the both faces with double High Output LEDs. Sign can be but as in a variety of shapes, including your custom shape. Faces of the sign are held with a metal retainer which makes changing the sign faces easy. The LED power systems are built into the sign for a simple installation onto a pole or structure. Built with all aluminum construction to be strong, rigid and lightweight. This product is sometimes referred to as a Double Face Contour sign or a Contour Light Box Sign.",includes:null,category_id:3,construction_id:12,default_shape_id:200574,default_size:60,min_size_product_id:null,min_size:26,max_size_product_id:null,max_size:75,size_increments:"1.00",standard_sizes:"24,30,36,42,48",default_style_id:15,default_background_id:100368,featured_ind:0,pattern_ind:1,templates_ind:1,list_order:103,status:"Active",shipping_video_code:null,install_video_code:null,install_url:null,builder_panel:"Cabinet",builder_type:"cabinet",bundle_product1_id:null,bundle_product2_id:null,face_count:2,shipping_method_id:2,production_days:15,material_max_1:120,material_max_2:72,material_min:18,category:"Lit Cabinets",category_name:"lit-cabinets",bundle_ind:0,bundle_id:null,default_background_name:"generic_store_cabinet_double2.jpg",default_background_url:"2020/files/signs/305588/generic_store_cabinet_double2.Ndzk0yzGgj.jpg",graphics_ind:1,shipping_method_list:null,parts_list:"bars2face_leds,retainerfaceflat1,retainerfaceflat2,selfcontained,freight,ups,none,center_pole,mounting_flange_center_pole,side_retainer_sign,outer_retainer,printedface,custom_shape,side_painted,crate_wooden_freight,printednotface,overlayedface",styles_list:"cabinetshapes",parent_id:null,parent_name:null},{id:100007,url:"acrylic-shape",name:"acrylic-shape",title:"Acrylic Logo Shape",short_title:"Acrylic Shape",subtitle:null,mwo_title:"AL",description:null,fulldescription:null,includes:null,category_id:100175,construction_id:4,default_shape_id:18,default_size:12,min_size_product_id:null,min_size:3,max_size_product_id:100010,max_size:24,size_increments:"0.50",standard_sizes:"3,4,5,6,7,8,9,10,12,16,18,20,24",default_style_id:null,default_background_id:101736,featured_ind:0,pattern_ind:1,templates_ind:0,list_order:0,status:"Hidden",shipping_video_code:null,install_video_code:null,install_url:null,builder_panel:"Shape",builder_type:"shapes",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:5,material_max_1:null,material_max_2:null,material_min:null,category:"Dimensional Letters And Logos",category_name:"dimensional-letters-and-logos",bundle_ind:0,bundle_id:100008,default_background_name:"white_interior_wall.jpeg",default_background_url:"2020/files/signs/0/white_interior_wall.GozT1F0rC5.jpeg",graphics_ind:1,shipping_method_list:null,parts_list:"acrylic_face,studs_threaded,acrylic_paint,fco_acrylic_printedface,fco_acrylic_vhb_tape,fco_acrylic_face_overlay,fco_pattern,fco_custom_shape,fco_acrylic_face_and_side_different,fco_acrylic_side,standoffs,backdrop,ups,freight,crate_wooden_freight,overlayedface",styles_list:"logoshapes",parent_id:100008,parent_name:"acrylic-letters-shapes"},{id:1,url:null,name:"lit-letters",title:"Face Lit Letters",short_title:null,subtitle:null,mwo_title:"DM",description:"The worlds only Plug-n-Play LED lit channel letters. Build for easy installation by anyone.",fulldescription:null,includes:null,category_id:1,construction_id:1,default_shape_id:null,default_size:18,min_size_product_id:null,min_size:10,max_size_product_id:null,max_size:48,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:1,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:0,list_order:0,status:"Hidden",shipping_video_code:null,install_video_code:"CH-AhI4rBHQ",install_url:"/documents/installation-ezlit-letters-and-logos",builder_panel:"Letters",builder_type:"letters",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:5,material_max_1:120,material_max_2:60,material_min:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",bundle_ind:0,bundle_id:13,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:0,shipping_method_list:null,parts_list:"clips,plug-n-play,face_leds,none,face,trim,side_5,back,side_3,backdrop,install_pattern,standoffs,printedface,custom_shape,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"stdbold,serifbold,stdcond,free,stdround,brush,capecod,boxer",parent_id:13,parent_name:"lit-channel-letters-shapes"},{id:22,url:null,name:"lit-letters-raceway",title:"Face Lit Letters on Raceway",short_title:null,subtitle:null,mwo_title:"RW",description:"Sign and electrical components are pre-mounted to a lightweight metal container spanning the length of the sign.",fulldescription:null,includes:null,category_id:1,construction_id:1,default_shape_id:null,default_size:18,min_size_product_id:null,min_size:10,max_size_product_id:null,max_size:48,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:1,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:0,list_order:0,status:"Hidden",shipping_video_code:null,install_video_code:null,install_url:"/documents/installation-raceway-letters-and-logos",builder_panel:"Letters",builder_type:"letters",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:5,material_max_1:120,material_max_2:60,material_min:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",bundle_ind:0,bundle_id:14,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:0,shipping_method_list:null,parts_list:"back,face,raceway,face_leds,none,trim,side_5,side_3,raceway,backdrop,printedface,side_painted,custom_shape,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"stdbold,serifbold,brush,free,stdcond,stdround,capecod,boxer",parent_id:14,parent_name:"lit-channel-letters-shapes-raceway"},{id:24,url:null,name:"lit-halo-letters",title:"Face & Halo Lit Letters",short_title:null,subtitle:null,mwo_title:"FHL",description:"The worlds only Plug-n-Play LED lit Face & Halo channel letters. Build for easy installation by anyone. ",fulldescription:null,includes:null,category_id:1,construction_id:2,default_shape_id:null,default_size:18,min_size_product_id:null,min_size:10,max_size_product_id:null,max_size:48,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:1,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:0,list_order:0,status:"Hidden",shipping_video_code:null,install_video_code:null,install_url:"/documents/installation-halo-letters-and-logos",builder_panel:"Letters",builder_type:"letters",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:5,material_max_1:120,material_max_2:60,material_min:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",bundle_ind:0,bundle_id:15,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:0,shipping_method_list:null,parts_list:"face,plug-n-play,side_5,trim,backdrop,back_leds,face_leds,standoffs,back_polycarb,back_center,install_pattern,custom_shape,printedface,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"stdbold,serifbold,brush,free,stdcond,stdround,capecod,boxer",parent_id:15,parent_name:"lit-halo-channel-letters-shapes"},{id:26,url:null,name:"lit-halo-letters-raceway",title:"Face & Halo Lit Letters on Raceway",short_title:null,subtitle:null,mwo_title:"FHRW",description:null,fulldescription:null,includes:null,category_id:1,construction_id:2,default_shape_id:null,default_size:18,min_size_product_id:null,min_size:10,max_size_product_id:null,max_size:48,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:1,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:0,list_order:0,status:"Hidden",shipping_video_code:null,install_video_code:null,install_url:"/documents/installation-raceway-letters-and-logos",builder_panel:"Letters",builder_type:"letters",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:5,material_max_1:120,material_max_2:60,material_min:null,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",bundle_ind:0,bundle_id:16,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:0,shipping_method_list:null,parts_list:"face,trim,raceway,raceway,side_5,backdrop,standoffs,back_polycarb,back_center,face_leds,back_leds,custom_shape,printedface,side_painted,trim_painted,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"stdbold,serifbold,brush,free,stdcond,stdround,capecod,boxer",parent_id:16,parent_name:"lit-halo-channel-letters-shapes-raceway"},{id:28,url:null,name:"halo-letters",title:"Halo Lit Letters",short_title:null,subtitle:null,mwo_title:"HL",description:null,fulldescription:null,includes:null,category_id:1,construction_id:3,default_shape_id:null,default_size:18,min_size_product_id:null,min_size:6,max_size_product_id:null,max_size:48,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:1,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:0,list_order:0,status:"Hidden",shipping_video_code:null,install_video_code:null,install_url:"/documents/installation-halo-letters-and-logos",builder_panel:"Letters",builder_type:"letters",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:15,material_max_1:120,material_max_2:60,material_min:6,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",bundle_ind:0,bundle_id:17,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:0,shipping_method_list:null,parts_list:"back_leds,standoffs,plug-n-play,side_2,backdrop,metalface,back_polycarb,install_pattern,face_and_side_painted,paint_inside,printedface,custom_shape,metal_face_and_side_different,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"stdbold,serifbold,brush,free,stdcond,stdround,capecod,boxer",parent_id:17,parent_name:"halo-channel-letters-shapes"},{id:30,url:null,name:"halo-letters-raceway",title:"Halo Lit Letters on Raceway",short_title:null,subtitle:null,mwo_title:"HLRW",description:null,fulldescription:null,includes:null,category_id:1,construction_id:3,default_shape_id:null,default_size:18,min_size_product_id:null,min_size:6,max_size_product_id:null,max_size:48,size_increments:"1.00",standard_sizes:"10,12,16,18,20,24,30,36,42,48",default_style_id:1,default_background_id:2253,featured_ind:0,pattern_ind:1,templates_ind:0,list_order:0,status:"Hidden",shipping_video_code:null,install_video_code:null,install_url:"/documents/installation-raceway-letters-and-logos",builder_panel:"Letters",builder_type:"letters",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:15,material_max_1:120,material_max_2:60,material_min:6,category:"Lit Channel Letters And Logos",category_name:"lit-channel-letters-and-logos",bundle_ind:0,bundle_id:19,default_background_name:"rooted-building.jpg.FRvRqOTEVD.jpg",default_background_url:"files/backgrounds/generic-storefront 2020 - 42 - less sky.jpg?v=0",graphics_ind:0,shipping_method_list:null,parts_list:"back_leds,raceway,raceway,side_2,backdrop,metalface,standoffs,back_polycarb,face_and_side_painted,paint_inside,custom_shape,printedface,metal_face_and_side_different,ups,freight,crate_wooden_freight,printednotface,overlayedface",styles_list:"stdbold,serifbold,brush,free,stdcond,stdround,capecod,boxer",parent_id:19,parent_name:"halo-channel-letters-shapes-raceway"},{id:100006,url:"acrylic-letters",name:"acrylic-letters",title:"Acrylic Letters",short_title:"Acrylic Letters",subtitle:null,mwo_title:"AL",description:null,fulldescription:null,includes:null,category_id:100175,construction_id:4,default_shape_id:null,default_size:12,min_size_product_id:null,min_size:3,max_size_product_id:100009,max_size:24,size_increments:"0.50",standard_sizes:"3,4,5,6,7,8,9,10,12,16,18,20,24",default_style_id:1,default_background_id:101736,featured_ind:0,pattern_ind:1,templates_ind:0,list_order:0,status:"Hidden",shipping_video_code:null,install_video_code:null,install_url:null,builder_panel:"Letters",builder_type:"letters",bundle_product1_id:null,bundle_product2_id:null,face_count:1,shipping_method_id:null,production_days:5,material_max_1:null,material_max_2:null,material_min:null,category:"Dimensional Letters And Logos",category_name:"dimensional-letters-and-logos",bundle_ind:0,bundle_id:100008,default_background_name:"white_interior_wall.jpeg",default_background_url:"2020/files/signs/0/white_interior_wall.GozT1F0rC5.jpeg",graphics_ind:0,shipping_method_list:null,parts_list:"acrylic_face,acrylic_paint,studs_threaded,fco_acrylic_printedface,fco_acrylic_vhb_tape,fco_acrylic_face_overlay,fco_pattern,fco_custom_shape,fco_acrylic_face_and_side_different,fco_acrylic_side,standoffs,backdrop,ups,freight,crate_wooden_freight,overlayedface",styles_list:"stdbold,serifbold,stdcond,free,stdround,brush,capecod,boxer",parent_id:100008,parent_name:"acrylic-letters-shapes"}],Y})();function yi(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw();return f.KtG(j.products.category="Lit Letters & logos")}),f._UZ(2,"img",2),f.TgZ(3,"div",3),f._uU(4,"Lit Letters & logos"),f.qZA(),f._UZ(5,"i",4),f.qZA(),f.TgZ(6,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw();return f.KtG(j.products.category="Lit Shape Sign")}),f._UZ(7,"img",5),f.TgZ(8,"div",3),f._uU(9,"Lit Shape Sign"),f.qZA(),f._UZ(10,"i",4),f.qZA(),f.TgZ(11,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw();return f.KtG(j.products.category="Lit Caninet Sign")}),f._UZ(12,"img",6),f.TgZ(13,"div",3),f._uU(14,"Lit Caninet Sign"),f.qZA(),f._UZ(15,"i",4),f.qZA(),f.TgZ(16,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw();return f.KtG(j.products.category="Dimensional Letters & Logos")}),f._UZ(17,"img",7),f.TgZ(18,"div",3),f._uU(19,"Dimensional Letters & Logos"),f.qZA(),f._UZ(20,"i",4),f.qZA(),f.BQk()}}function de(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"button",8),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.category="",j.products.subCategory="",f.KtG(j.isAdd=!1)}),f._uU(2,"Back"),f.qZA(),f.TgZ(3,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.subCategory="Face Lit Channel Letters & Logos",f.KtG(j.getProductfeatures())}),f._UZ(4,"img",9),f.TgZ(5,"div",3),f._uU(6,"Face Lit Channel Letters & Logos"),f.qZA(),f._UZ(7,"i",4),f.qZA(),f.TgZ(8,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.subCategory="Face Lit Channel Letters & Logos on Raceway",f.KtG(j.getProductfeatures())}),f._UZ(9,"img",10),f.TgZ(10,"div",3),f._uU(11,"Face Lit Channel Letters & Logos on Raceway"),f.qZA(),f._UZ(12,"i",4),f.qZA(),f.TgZ(13,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.subCategory="Face & Halo Lit Channel Letters & Logos",f.KtG(j.getProductfeatures())}),f._UZ(14,"img",11),f.TgZ(15,"div",3),f._uU(16,"Face & Halo Lit Channel Letters & Logos"),f.qZA(),f._UZ(17,"i",4),f.qZA(),f.TgZ(18,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.subCategory="Face & Halo Lit Channel Letters & Logos on Raceway",f.KtG(j.getProductfeatures())}),f._UZ(19,"img",12),f.TgZ(20,"div",3),f._uU(21,"Face & Halo Lit Channel Letters & Logos on Raceway"),f.qZA(),f._UZ(22,"i",4),f.qZA(),f.TgZ(23,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.subCategory="Halo Lit Channel Letters & Logos",f.KtG(j.getProductfeatures())}),f._UZ(24,"img",13),f.TgZ(25,"div",3),f._uU(26,"Halo Lit Channel Letters & Logos"),f.qZA(),f._UZ(27,"i",4),f.qZA(),f.TgZ(28,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.subCategory="Halo Lit Channel Letters & Logos on Raceway",f.KtG(j.getProductfeatures())}),f._UZ(29,"img",14),f.TgZ(30,"div",3),f._uU(31,"Halo Lit Channel Letters & Logos on Raceway"),f.qZA(),f._UZ(32,"i",4),f.qZA(),f.BQk()}}function p(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"button",8),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.category="",f.KtG(j.isAdd=!1)}),f._uU(2,"Back"),f.qZA(),f.TgZ(3,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.subCategory="Lit Shape Sign",f.KtG(j.getProductfeatures())}),f._UZ(4,"img",15),f.TgZ(5,"div",3),f._uU(6,"Lit Shape Sign"),f.qZA(),f._UZ(7,"i",4),f.qZA(),f.TgZ(8,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.subCategory="Lit Decor Sign",f.KtG(j.getProductfeatures())}),f._UZ(9,"img",16),f.TgZ(10,"div",3),f._uU(11,"Lit Decor Sign"),f.qZA(),f._UZ(12,"i",4),f.qZA(),f.BQk()}}function o(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"button",8),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.category="",f.KtG(j.isAdd=!1)}),f._uU(2,"Back"),f.qZA(),f.TgZ(3,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.subCategory="Lit Squared Cabinet - Single Faced",f.KtG(j.getProductfeatures())}),f._UZ(4,"img",17),f.TgZ(5,"div",3),f._uU(6,"Lit Squared Cabinet - Single Faced"),f.qZA(),f._UZ(7,"i",4),f.qZA(),f.TgZ(8,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.subCategory="Lit Squared Cabinet - Double Faced",f.KtG(j.getProductfeatures())}),f._UZ(9,"img",18),f.TgZ(10,"div",3),f._uU(11,"Lit Squared Cabinet - Double Faced"),f.qZA(),f._UZ(12,"i",4),f.qZA(),f.TgZ(13,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.subCategory="Lit Shape Cabinet \u2013 Single Faced",f.KtG(j.getProductfeatures())}),f._UZ(14,"img",19),f.TgZ(15,"div",3),f._uU(16,"Lit Shape Cabinet \u2013 Single Faced"),f.qZA(),f._UZ(17,"i",4),f.qZA(),f.TgZ(18,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.subCategory="Lit Shape Cabinet \u2013 Double Faced",f.KtG(j.getProductfeatures())}),f._UZ(19,"img",20),f.TgZ(20,"div",3),f._uU(21,"Lit Shape Cabinet \u2013 Double Faced"),f.qZA(),f._UZ(22,"i",4),f.qZA(),f.BQk()}}function u(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"button",8),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.category="",f.KtG(j.isAdd=!1)}),f._uU(2,"Back"),f.qZA(),f.TgZ(3,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.subCategory="Acrylic Letters & Logo Shapes",f.KtG(j.getProductfeatures())}),f._UZ(4,"img",21),f.TgZ(5,"div",3),f._uU(6,"Acrylic Letters & Logo Shapes"),f.qZA(),f._UZ(7,"i",4),f.qZA(),f.TgZ(8,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.subCategory="PVC Letters & Logo Shapes",f.KtG(j.getProductfeatures())}),f._UZ(9,"img",22),f.TgZ(10,"div",3),f._uU(11,"PVC Letters & Logo Shapes"),f.qZA(),f._UZ(12,"i",4),f.qZA(),f.TgZ(13,"div",1),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.subCategory="Metal Fabricated Letters & Logo Shapes",f.KtG(j.getProductfeatures())}),f._UZ(14,"img",23),f.TgZ(15,"div",3),f._uU(16,"Metal Fabricated Letters & Logo Shapes"),f.qZA(),f._UZ(17,"i",4),f.qZA(),f.BQk()}}function c(Y,pt){if(1&Y&&(f.ynx(0),f.YNc(1,de,33,0,"ng-container",0),f.YNc(2,p,13,0,"ng-container",0),f.YNc(3,o,23,0,"ng-container",0),f.YNc(4,u,18,0,"ng-container",0),f.BQk()),2&Y){const S=f.oxw();f.xp6(1),f.Q6J("ngIf","Lit Letters & logos"==S.products.category),f.xp6(1),f.Q6J("ngIf","Lit Shape Sign"==S.products.category),f.xp6(1),f.Q6J("ngIf","Lit Caninet Sign"==S.products.category),f.xp6(1),f.Q6J("ngIf","Dimensional Letters & Logos"==S.products.category)}}function n(Y,pt){if(1&Y){const S=f.EpF();f.TgZ(0,"li",34),f.NdJ("click",function(){f.CHM(S);const j=f.oxw().$implicit,xt=f.oxw(3);return f.KtG(xt.selectedFeature=j)}),f._uU(1),f._UZ(2,"div",35),f.qZA()}if(2&Y){const S=f.oxw().$implicit;f.xp6(1),f.hij(" ",S.title,"")}}function s(Y,pt){if(1&Y&&(f.TgZ(0,"ul"),f.YNc(1,n,3,1,"li",33),f.qZA()),2&Y){const S=pt.$implicit;f.xp6(1),f.Q6J("ngIf","Required"==S.status)}}function e(Y,pt){if(1&Y){const S=f.EpF();f.TgZ(0,"li",37),f.NdJ("click",function(){f.CHM(S);const j=f.oxw().$implicit,xt=f.oxw(4);return f.KtG(xt.selectedFeature=j)}),f._uU(1),f.qZA()}if(2&Y){const S=f.oxw().$implicit;f.xp6(1),f.hij(" ",S.title,"")}}function a(Y,pt){if(1&Y&&(f.TgZ(0,"ul"),f.YNc(1,e,2,1,"li",36),f.qZA()),2&Y){const S=pt.$implicit;f.xp6(1),f.Q6J("ngIf","Optional"==S.status)}}function l(Y,pt){if(1&Y&&(f.ynx(0),f.TgZ(1,"h5"),f._uU(2,"Optional"),f.qZA(),f.YNc(3,a,2,1,"ul",29),f.BQk()),2&Y){const S=f.oxw(3);f.xp6(3),f.Q6J("ngForOf",S.features)}}function r(Y,pt){if(1&Y&&(f.ynx(0),f.TgZ(1,"h5"),f._uU(2,"Sign Features"),f.qZA(),f.TgZ(3,"div",27)(4,"div",28),f.YNc(5,s,2,1,"ul",29),f.YNc(6,l,4,1,"ng-container",0),f.qZA(),f.TgZ(7,"div",30),f._UZ(8,"img",31),f.qZA()(),f.TgZ(9,"div",32),f._uU(10),f.qZA(),f.BQk()),2&Y){const S=f.oxw(2);let I;f.xp6(5),f.Q6J("ngForOf",S.features),f.xp6(1),f.Q6J("ngIf",S.isOptional),f.xp6(2),f.Q6J("src",S.getImg(),f.LSH),f.xp6(2),f.Oqu(null!==(I=null==S.selectedFeature?null:S.selectedFeature.description)&&void 0!==I?I:"")}}function h(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"div",24)(2,"button",8),f.NdJ("click",function(){f.CHM(S);const j=f.oxw();return j.products.subCategory="",f.KtG(j.isAdd=!1)}),f._uU(3,"Back"),f.qZA(),f.TgZ(4,"button",8),f.NdJ("click",function(){f.CHM(S);const j=f.oxw();return f.KtG(j.isAdd=!0)}),f._uU(5,"Add"),f.qZA(),f.TgZ(6,"div",25)(7,"div",26)(8,"h3"),f._uU(9),f.qZA(),f.TgZ(10,"p"),f._uU(11),f.qZA(),f.YNc(12,r,11,4,"ng-container",0),f.qZA()()(),f.BQk()}if(2&Y){const S=f.oxw();f.xp6(9),f.Oqu(S.title),f.xp6(2),f.Oqu(S.description),f.xp6(1),f.Q6J("ngIf",S.selectedFeature)}}function g(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"div",1),f.NdJ("click",function(){const xt=f.CHM(S).$implicit,Ot=f.oxw(2);return f.KtG(Ot.selectedProduct(xt))}),f._UZ(2,"img",39),f.TgZ(3,"div",3),f._uU(4),f.qZA(),f._UZ(5,"i",4),f.qZA(),f.BQk()}if(2&Y){const S=pt.$implicit,I=f.oxw(2);f.xp6(2),f.Q6J("src",I.getSelImg(S.name),f.LSH),f.xp6(2),f.Oqu(S.title)}}function m(Y,pt){if(1&Y){const S=f.EpF();f.TgZ(0,"button",40),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(2);return j.products.category="",j.products.subCategory="",f.KtG(j.isAdd=!1)}),f._uU(1,"Add Other Products"),f.qZA()}}function v(Y,pt){if(1&Y&&(f.ynx(0),f.YNc(1,g,6,2,"ng-container",29),f.YNc(2,m,2,0,"button",38),f.BQk()),2&Y){const S=f.oxw();f.xp6(1),f.Q6J("ngForOf",S.ProductsList),f.xp6(1),f.Q6J("ngIf",""!=S.products.category&&""!=S.products.subCategory)}}let b=(()=>{class Y{constructor(){this.clickEvent=new f.vpe,this.products={category:"",subCategory:"",type:""},this.isAdd=!1,this.description="",this.features=[],this.ProductsList=[],this.title="",this.isOptional=!1}selectedProduct(S){this.clickEvent.emit(S)}selectP(S){this.products.subCategory=S}getProductfeatures(){let S=Ve.products.find(I=>I.title==this.products.subCategory);if(S){let I;this.description=S?.description??"",this.title=S?.title,this.features=Ve.productsFeatures.filter(j=>j.product_id==S?.id),this.selectedFeature=(this.features?.length??0)>0?this.features[0]:null,this.isOptional=this.features.some(j=>"Optional"==j.status),I=Ve.productsDtls.filter(null==S.parent_id?j=>j.title==this.products.subCategory:j=>j.parent_id==S?.parent_id),I&&I.length>0&&!this.ProductsList.some(j=>j.parent_id==S?.parent_id)&&(I.sort((j,xt)=>j.id-xt.id),this.ProductsList.push(...I))}}getImg(){return this.selectedFeature?"https://storage.googleapis.com/signmonkey-148101.appspot.com/"+this.selectedFeature?.preview_url:""}getSelImg(S){return"https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/"+S+"/icon.jpg"}}return Y.\u0275fac=function(S){return new(S||Y)},Y.\u0275cmp=f.Xpm({type:Y,selectors:[["app-products"]],outputs:{clickEvent:"clickEvent"},decls:4,vars:4,consts:[[4,"ngIf"],[1,"d-flex","align-items-center","cursor-pointer",3,"click"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/categories/channel-letters-and-logos.jpg","width","180"],[1,"mx-3"],["aria-hidden","true",1,"fa","fa-chevron-right"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/categories/lit-shapes.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/categories/lit-cabinets.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/categories/unlit.jpg","width","180"],["mat-button","",3,"click"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/lit-channel-letters-shapes/product.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/lit-channel-letters-shapes-raceway/product.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/lit-halo-channel-letters-shapes/product.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/lit-halo-channel-letters-shapes-raceway/product.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/halo-channel-letters-shapes/product.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/halo-channel-letters-shapes-raceway/product.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/lit-shape-sign/product.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/lit-decor-sign/product.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/lit-cabinet-retainer-single/product.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/lit-cabinet-retainer-double/product.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/lit-cabinet-shape-single/product.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/lit-cabinet-shape-double/product.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/acrylic-letters-shapes/product.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/pvc-letters-shapes/product.jpg","width","180"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/products/metal-letters-shapes/product.jpg","width","180"],[1,"d-flex","flex-column","justify-content-around","h-100"],[1,"subpanel","overflow","sc-hqyNC","fmMFPB"],[1,"mt-3"],[1,"sc-jqCOkK","bsmNqF","d-flex"],[1,"parts"],[4,"ngFor","ngForOf"],[1,"image"],["alt","",1,"w-100",3,"src"],[1,"sc-uJMKN","ixrctb"],["class","active",3,"click",4,"ngIf"],[1,"active",3,"click"],[1,"line"],["class","",3,"click",4,"ngIf"],[1,"",3,"click"],[3,"click",4,"ngIf"],["width","180",3,"src"],[3,"click"]],template:function(S,I){1&S&&(f.YNc(0,yi,21,0,"ng-container",0),f.YNc(1,c,5,4,"ng-container",0),f.YNc(2,h,13,3,"ng-container",0),f.YNc(3,v,3,2,"ng-container",0)),2&S&&(f.Q6J("ngIf",""==I.products.category),f.xp6(1),f.Q6J("ngIf",""!=I.products.category&&""==I.products.subCategory),f.xp6(1),f.Q6J("ngIf",""!=I.products.subCategory&&""!=I.products.category&&!I.isAdd),f.xp6(1),f.Q6J("ngIf",I.isAdd&&""!=I.products.category&&""!=I.products.subCategory))},dependencies:[_.sg,_.O5]}),Y})();var C=se(4006),A=se(8372);class F{}F.circle={id:1,backgroundPath:"M 400,100 c 0,-27.405 -22.217,-49.622 -49.622,-49.622c-27.405,0 -49.622,22.217 -49.621,49.622c-0.001,27.405 22.216,49.621 49.621,49.621c27.405,0.001 49.622,-22.216 49.622,-49.621Z",path:"m 178.272569,115.3299616 c 0,-21.6150296 -17.52193,-39.1373276 -39.13585,-39.1373276 -21.61491,0 -39.13678003516,17.522298 -39.13678003516,39.1373276 0,21.6134624 17.52187003516,39.1357594 39.13581003516,39.1357594 21.61489,0 39.13682,-17.52125 39.13682,-39.1357594 l 0,0",name:"Circle",code:"CIRCLE"},F.pizza={id:2,backgroundPath:"M 400,100 c 0,-27.405 -22.217,-49.622 -49.622,-49.622c-27.405,0 -49.622,22.217 -49.621,49.622c-0.001,27.405 22.216,49.621 49.621,49.621c27.405,0.001 49.622,-22.216 49.622,-49.621Z",path:"m 178.272569,115.3299616 c 0,-21.6150296 -17.52193,-39.1373276 -39.13585,-39.1373276 -21.61491,0 -39.13678003516,17.522298 -39.13678003516,39.1373276 0,21.6134624 17.52187003516,39.1357594 39.13581003516,39.1357594 21.61489,0 39.13682,-17.52125 39.13682,-39.1357594 l 0,0",name:"Pizza",code:"PIZZA",offsetX:130,offsetY:100,faceArtId:1002,scaleFactorx:.2,scaleFactorY:.2},F.sun={id:3,backgroundPath:"M 400,100 c 0,-27.405 -22.217,-49.622 -49.622,-49.622c-27.405,0 -49.622,22.217 -49.621,49.622c-0.001,27.405 22.216,49.621 49.621,49.621c27.405,0.001 49.622,-22.216 49.622,-49.621Z",path:"m 178.272569,115.3299616 c 0,-21.6150296 -17.52193,-39.1373276 -39.13585,-39.1373276 -21.61491,0 -39.13678003516,17.522298 -39.13678003516,39.1373276 0,21.6134624 17.52187003516,39.1357594 39.13581003516,39.1357594 21.61489,0 39.13682,-17.52125 39.13682,-39.1357594 l 0,0",name:"Sun",code:"SUN",offsetX:130,offsetY:100,faceArtId:1001,scaleFactorx:.3,scaleFactorY:.3},F.star={id:4,name:"Star 5 Pointed",code:"STAR",backgroundPath:"M44.745,40.216  -35.746,0.003c-4.971,0.001 -9,4.031 -8.999,9.001c0,2.881 1.379,5.587 3.709,7.28l28.918,21.013l-11.043,33.997c-1.536,4.728 1.051,9.805 5.779,11.341c2.739,0.888 5.739,0.414 8.07,-1.278l28.921,-21.009l28.92,21.008c4.022,2.921 9.65,2.029 12.572,-1.992c1.692,-2.33 2.168,-5.33 1.278,-8.07l-11.044,-33.997l28.918,-21.013c4.021,-2.922 4.912,-8.55 1.99,-12.571c-1.693,-2.331 -4.399,-3.709 -7.28,-3.71l-35.746,-0.003l-11.048,-33.995c-1.537,-4.727 -6.614,-7.314 -11.342,-5.778c-2.739,0.891 -4.886,3.038 -5.777,5.778l-11.05,33.995Z",path:"m 40.737839,-6.6458961 -40.73790003516,0  32.956039,17.301643  -12.5852,38.74553 32.9601,-23.942318 32.9595,23.942318 -12.5856,-38.74553 32.955501,-17.9475391 -40.737101,0 -12.5923,-38.7429189 -12.5931,38.7429189"},F.square={id:5,name:"Square",code:"SQUARE",backgroundPath:"M80.997,0 l -71.997,0c-4.971,0 -9,4.029 -9,9l0,71.997c0,4.971 4.029,9 9,9l71.997,0c4.971,0 9,-4.029 9,-9l0,-71.997c0,-4.971 -4.029,-9 -9,-9Z",path:"m 400.1035,120.353786 69.36570003516,0 0,69.365928 -69.36570003516,0 0,-69.365928 z"},F.FlagR1={id:6,name:"Flag Right 1",code:"FLAGR1",backgroundPath:"M21.284,79.232 c 4.251,-1.014 11.178,3.865 13.627,6.66c1.449,1.962 3.138,3.733 5.028,5.274c6.817,5.395 15.013,2.456 19.746,-3.626c17.188,9.83 29.827,14.404 46.175,4.916c3.255,-2.026 5.093,-5.712 4.754,-9.531l-3.936,-27.363c-0.594,-7.164 -0.682,-11.941 1.715,-18.655c1.672,-4.681 -0.768,-9.831 -5.45,-11.502c-1.024,-0.365 -2.105,-0.542 -3.193,-0.522c-6.85,0.701 -13.77,-0.184 -20.224,-2.587l-7.456,-4.47c-0.935,-0.507 -1.911,-0.935 -2.916,-1.282c-2.439,-0.721 -4.477,-0.948 -6.863,-0.394c-3.944,-5.947 -10.34,-12.601 -17.853,-14.486c-16.759,-4.205 -26.478,-0.214 -40.112,9.418c-2.065,1.469 -3.415,3.74 -3.719,6.255c-0.367,1.991 -0.571,4.009 -0.607,6.033l0.343,7.109l2.928,22.94c0.444,6.208 -0.542,12.215 -1.38,18.318c-0.676,4.925 2.768,9.465 7.692,10.141c1.271,0.174 2.564,0.075 3.793,-0.291l7.908,-2.355Z",path:"m 119.627699,126.183093 1.38444,-0.330416 c 1.0098,-0.180214 2.03772,-0.245531 3.06284,-0.198515 1.05306,0.04963 2.0995,0.201122 3.12364,0.453964 l 1.57015,0.451878 1.51178,0.56837 1.6013,0.736059 c 2.07136,1.02207 4.03014,2.25833 5.84306,3.688919 1.3606,1.088938 2.61696,2.30195 3.75183,3.623617 l 0.48158,0.563408 1.00902,1.222937 0.54619,0.65326 0.3852,0.437247 0.45684,0.476947 0.50364,0.45292 0.28907,0.222022 0.34215,0.224629 c 0.19553,0.117539 0.39957,0.216784 0.61097,0.301681 0.71847,0.26956 1.49496,0.349489 2.25442,0.232476 0.26468,-0.03395 0.52503,-0.09402 0.77931,-0.177595 0.28114,-0.09402 0.55318,-0.21681 0.81012,-0.365939 0.25431,-0.148891 0.49629,-0.321018 0.72091,-0.513782 l 0.33593,-0.308997 0.34308,-0.36542 0.56071,-0.708112 0.5426,-0.815984 0.49403,-0.833228 0.52143,-0.923077 0.41319,-0.719865 0.22557,-0.369858 0.50972,-0.750428 c 0.18507,-0.250742 0.39107,-0.482957 0.61665,-0.696618 l 0.39014,-0.310306 0.29094,-0.164551 c 0.10971,-0.05222 0.22367,-0.09402 0.34119,-0.125395 0.11709,-0.03395 0.23407,-0.05222 0.35366,-0.06006 0.2609,-0.0261 0.52294,0 0.77647,0.07576 l 0.40825,0.133224 0.39619,0.177595 0.4179,0.232471 0.68883,0.427063 0.73528,0.462321 1.9663,1.230252 2.11465,1.278568 2.60356,1.483616 2.88524,1.507902 2.35172,1.11062 2.63908,1.107223 2.68593,0.96043 3.03562,0.860388 1.97445,0.416356 2.21399,0.317091 2.23686,0.138448 2.48493,-0.08621 2.18792,-0.318926 2.35758,-0.642552 c 1.6117,-0.558181 3.13122,-1.349876 4.51168,-2.351836 l 1.09727,-0.794046 -0.3582,-2.531803 -0.19836,-1.321931 -0.22953,-1.420926 -1.13093,-6.739202 -0.65686,-4.167176 -0.57833,-4.100047 -0.73586,-6.826184 -0.17945,-2.557924 -0.1134,-2.5675899 -0.0303,-2.8509938 0.0831,-2.6135584 0.0943,-1.37678143 0.34878,-2.90479747 0.28433,-1.5233157 0.37386,-1.5136489 0.54033,-1.6455573 0.74379,-1.95168 -1.94329,0.09924 c -1.82839,0.09929 -3.66116,0.109682 -5.49143,0.03916 l -2.70538,-0.177616 -2.9251,-0.35445 c -3.61675,-0.5200471 -7.14681,-1.5319311 -10.49168,-3.0040511 l -2.48662,-1.337081 -2.37005,-1.538724 -1.39523,-0.909497 -0.81141,-0.486615 c -0.47306,-0.277396 -0.96596,-0.517176 -1.47664,-0.718819 l -0.40201,-0.138447 -0.46515,-0.11754 -0.49043,-0.06792 c -0.18696,0 -0.37673,0 -0.56356,0 -0.30172,0.03395 -0.59644,0.109679 -0.87209,0.235083 -0.2949,0.138447 -0.56639,0.321798 -0.80443,0.543556 l -0.31778,0.330415 -0.29866,0.386315 -0.49823,0.845762 -0.0717,0.138448 -0.22933,0.425751 -0.27944,0.455794 -0.3238,0.425753 -0.1908,0.190672 c -0.1001,0.09663 -0.22351,0.167171 -0.35653,0.211569 -0.0435,0 -0.0906,0.02611 -0.13604,0.02611 -0.0471,-0.0018 -0.0963,0 -0.1416,-0.02611 -0.0604,-0.02611 -0.11709,-0.04963 -0.17197,-0.08621 l -0.17948,-0.135812 -0.18948,-0.182856 -0.17947,-0.206358 -0.38144,-0.526052 -0.20514,-0.319971 -0.40544,-0.681989 -0.38162,-0.683036 -0.40864,-0.751733 -1.7043,-3.052115 c -1.27712,-2.232212 -2.82175,-4.300646 -4.59746,-6.160125 l -1.01736,-0.980804 -2.31506,-1.834665 c -1.67916,-1.153977 -3.51947,-2.053025 -5.46273,-2.667367 l -0.019,0 -2.28334,-0.496019 -2.53288,-0.371161 -2.54634,-0.198513 -2.81516,-0.02613 -2.18433,0.154109 -2.36513,0.388406 -2.29599,0.598143 -2.43239,0.870057 -2.13787,0.958601 -2.25066,1.19943 -2.14465,1.31618 -2.2535,1.555969 -2.67931004,1.95194 -0.3644,2.507774 -0.16638,1.883508 -0.02269999516,0.96931 0.01869999516,1.05577 0.0964,1.971012 0.18133,2.136087 0.20442,1.874102 0.2562,2.0470231 0.27657004,2.0274288 0.31871,2.2254182 0.3788,2.5965829 0.7946,5.7226164 0.37673,3.1717447 0.27657,2.9155064 0.10969,1.5392465 0.1228,3.271002 -0.0191,1.734362 -0.0869,1.743767 -0.20725,1.932614 -1.32475,9.225823 7.84812,-2.337212"},F.FlagR1Img={id:7,name:"Flag America",code:"FLAGRAMERICA",scaleFactorx:.08,scaleFactorY:.08,offsetX:10,offsetY:60,faceArtId:100,backgroundPath:"M21.284,79.232 c 4.251,-1.014 11.178,3.865 13.627,6.66c1.449,1.962 3.138,3.733 5.028,5.274c6.817,5.395 15.013,2.456 19.746,-3.626c17.188,9.83 29.827,14.404 46.175,4.916c3.255,-2.026 5.093,-5.712 4.754,-9.531l-3.936,-27.363c-0.594,-7.164 -0.682,-11.941 1.715,-18.655c1.672,-4.681 -0.768,-9.831 -5.45,-11.502c-1.024,-0.365 -2.105,-0.542 -3.193,-0.522c-6.85,0.701 -13.77,-0.184 -20.224,-2.587l-7.456,-4.47c-0.935,-0.507 -1.911,-0.935 -2.916,-1.282c-2.439,-0.721 -4.477,-0.948 -6.863,-0.394c-3.944,-5.947 -10.34,-12.601 -17.853,-14.486c-16.759,-4.205 -26.478,-0.214 -40.112,9.418c-2.065,1.469 -3.415,3.74 -3.719,6.255c-0.367,1.991 -0.571,4.009 -0.607,6.033l0.343,7.109l2.928,22.94c0.444,6.208 -0.542,12.215 -1.38,18.318c-0.676,4.925 2.768,9.465 7.692,10.141c1.271,0.174 2.564,0.075 3.793,-0.291l7.908,-2.355Z",path:"m 119.627699,126.183093 1.38444,-0.330416 c 1.0098,-0.180214 2.03772,-0.245531 3.06284,-0.198515 1.05306,0.04963 2.0995,0.201122 3.12364,0.453964 l 1.57015,0.451878 1.51178,0.56837 1.6013,0.736059 c 2.07136,1.02207 4.03014,2.25833 5.84306,3.688919 1.3606,1.088938 2.61696,2.30195 3.75183,3.623617 l 0.48158,0.563408 1.00902,1.222937 0.54619,0.65326 0.3852,0.437247 0.45684,0.476947 0.50364,0.45292 0.28907,0.222022 0.34215,0.224629 c 0.19553,0.117539 0.39957,0.216784 0.61097,0.301681 0.71847,0.26956 1.49496,0.349489 2.25442,0.232476 0.26468,-0.03395 0.52503,-0.09402 0.77931,-0.177595 0.28114,-0.09402 0.55318,-0.21681 0.81012,-0.365939 0.25431,-0.148891 0.49629,-0.321018 0.72091,-0.513782 l 0.33593,-0.308997 0.34308,-0.36542 0.56071,-0.708112 0.5426,-0.815984 0.49403,-0.833228 0.52143,-0.923077 0.41319,-0.719865 0.22557,-0.369858 0.50972,-0.750428 c 0.18507,-0.250742 0.39107,-0.482957 0.61665,-0.696618 l 0.39014,-0.310306 0.29094,-0.164551 c 0.10971,-0.05222 0.22367,-0.09402 0.34119,-0.125395 0.11709,-0.03395 0.23407,-0.05222 0.35366,-0.06006 0.2609,-0.0261 0.52294,0 0.77647,0.07576 l 0.40825,0.133224 0.39619,0.177595 0.4179,0.232471 0.68883,0.427063 0.73528,0.462321 1.9663,1.230252 2.11465,1.278568 2.60356,1.483616 2.88524,1.507902 2.35172,1.11062 2.63908,1.107223 2.68593,0.96043 3.03562,0.860388 1.97445,0.416356 2.21399,0.317091 2.23686,0.138448 2.48493,-0.08621 2.18792,-0.318926 2.35758,-0.642552 c 1.6117,-0.558181 3.13122,-1.349876 4.51168,-2.351836 l 1.09727,-0.794046 -0.3582,-2.531803 -0.19836,-1.321931 -0.22953,-1.420926 -1.13093,-6.739202 -0.65686,-4.167176 -0.57833,-4.100047 -0.73586,-6.826184 -0.17945,-2.557924 -0.1134,-2.5675899 -0.0303,-2.8509938 0.0831,-2.6135584 0.0943,-1.37678143 0.34878,-2.90479747 0.28433,-1.5233157 0.37386,-1.5136489 0.54033,-1.6455573 0.74379,-1.95168 -1.94329,0.09924 c -1.82839,0.09929 -3.66116,0.109682 -5.49143,0.03916 l -2.70538,-0.177616 -2.9251,-0.35445 c -3.61675,-0.5200471 -7.14681,-1.5319311 -10.49168,-3.0040511 l -2.48662,-1.337081 -2.37005,-1.538724 -1.39523,-0.909497 -0.81141,-0.486615 c -0.47306,-0.277396 -0.96596,-0.517176 -1.47664,-0.718819 l -0.40201,-0.138447 -0.46515,-0.11754 -0.49043,-0.06792 c -0.18696,0 -0.37673,0 -0.56356,0 -0.30172,0.03395 -0.59644,0.109679 -0.87209,0.235083 -0.2949,0.138447 -0.56639,0.321798 -0.80443,0.543556 l -0.31778,0.330415 -0.29866,0.386315 -0.49823,0.845762 -0.0717,0.138448 -0.22933,0.425751 -0.27944,0.455794 -0.3238,0.425753 -0.1908,0.190672 c -0.1001,0.09663 -0.22351,0.167171 -0.35653,0.211569 -0.0435,0 -0.0906,0.02611 -0.13604,0.02611 -0.0471,-0.0018 -0.0963,0 -0.1416,-0.02611 -0.0604,-0.02611 -0.11709,-0.04963 -0.17197,-0.08621 l -0.17948,-0.135812 -0.18948,-0.182856 -0.17947,-0.206358 -0.38144,-0.526052 -0.20514,-0.319971 -0.40544,-0.681989 -0.38162,-0.683036 -0.40864,-0.751733 -1.7043,-3.052115 c -1.27712,-2.232212 -2.82175,-4.300646 -4.59746,-6.160125 l -1.01736,-0.980804 -2.31506,-1.834665 c -1.67916,-1.153977 -3.51947,-2.053025 -5.46273,-2.667367 l -0.019,0 -2.28334,-0.496019 -2.53288,-0.371161 -2.54634,-0.198513 -2.81516,-0.02613 -2.18433,0.154109 -2.36513,0.388406 -2.29599,0.598143 -2.43239,0.870057 -2.13787,0.958601 -2.25066,1.19943 -2.14465,1.31618 -2.2535,1.555969 -2.67931004,1.95194 -0.3644,2.507774 -0.16638,1.883508 -0.02269999516,0.96931 0.01869999516,1.05577 0.0964,1.971012 0.18133,2.136087 0.20442,1.874102 0.2562,2.0470231 0.27657004,2.0274288 0.31871,2.2254182 0.3788,2.5965829 0.7946,5.7226164 0.37673,3.1717447 0.27657,2.9155064 0.10969,1.5392465 0.1228,3.271002 -0.0191,1.734362 -0.0869,1.743767 -0.20725,1.932614 -1.32475,9.225823 7.84812,-2.337212"},F.OvalHorizontal1={id:8,name:"Oval Horizontal 1",code:"OvalHorizontal1",scaleFactorx:.08,scaleFactorY:.08,offsetX:10,offsetY:60,faceArtId:146521,backgroundPath:"M66.416,75.399c24.1,-0.838 37.515,-5.264 48.631,-11.525c9.586,-5.401 18.096,-15.068 17.807,-26.716c-0.58,-23.406 -32.889,-34.175 -51.401,-36.258l-15.776,-0.9l-20.131,1.773c-17.175,2.201 -46.08,14.357 -45.538,36.439c0.575,23.362 32.692,34.08 51.156,36.23l15.252,0.957Z",path:"m 55.040039,32.98627 0.161,0.0019 0.1645,-10e-4 0.2284,-10e-4 c 2.2987,0 4.5975,-0.08098 6.8925,-0.227236 2.5558,-0.164552 5.1051,-0.421312 7.6429,-0.770015 l 3.6408,-0.571241 4.0186,-0.798747 4.0088,-0.987333 4.4048,-1.336297 3.4915,-1.274652 c 1.9058,-0.750686 3.7711,-1.598543 5.5891,-2.541472 l 1.9432,-1.066738 1.9065,-1.165471 c 1.252501,-0.805538 2.456001,-1.684997 3.604201,-2.632366 l 1.6446,-1.462194 1.5427,-1.600631 0.7601,-0.900875 0.7892,-1.045059 c 0.6589,-0.92386 1.2331,-1.904664 1.7157,-2.931964 l 0.8777,-2.3275445 0.3092,-1.2736089 c 0.1774,-0.9047964 0.267,-1.8239575 0.267,-2.7449474 l -0.098,-1.663839 -0.3314,-1.8111556 -0.5502,-1.75055843 -0.8286,-1.83649067 -0.9289,-1.5799962 -1.1764,-1.6243997 -1.3014,-1.5018953 -1.5492,-1.5261874 -1.4026,-1.2072648 -1.6101,-1.2333841 -1.659301,-1.135695 -1.8786,-1.155282 c -1.8239,-1.054725 -3.7071,-2.002618 -5.6419,-2.839239 l -2.1948,-0.907144 -3.6117,-1.302863 -4.0283,-1.213793 -4.0512,-1.000134 c -2.8284,-0.624209 -5.6844,-1.121534 -8.5582,-1.490345 -2.98,-0.383442 -5.9752,-0.640724 -8.9775,-0.771584 l -4.9431,-0.107078 c -4.8818,0 -9.7567,0.317878 -14.5942,0.969309 l -3.6565,0.565495 -4.0368,0.792743 -4.0261,0.983939 -4.425,1.332376 -3.5078,1.272564 c -1.9153,0.749639 -3.7914,1.597494 -5.6188,2.540423 l -1.9531,1.067783 -1.9173,1.166516 c -1.2588,0.806587 -2.4702,1.6860451 -3.6254,2.6352411 l -1.654,1.4653288 -1.5532,1.6040259 -0.764,0.9027071 -0.7947,1.0484533 c -0.6641,0.9267347 -1.2429,1.9104114 -1.7295,2.9403192 l -0.88540004,2.3372119 -0.3111,1.278573 C 0.09033896,3.4801245 -6.103516e-5,4.4029434 -6.103516e-5,5.3288962 L 0.09593896,6.9862055 l 0.3294,1.8035796 0.5453,1.7437659 0.82270004,1.830486 0.922,1.574252 1.1686,1.620477 1.2929,1.499024 1.5399,1.522271 1.3941,1.205174 1.6001,1.230246 1.6505,1.135957 1.8679,1.153457 c 1.8144,1.053939 3.6881,2.001832 5.6122,2.839238 l 2.1829,0.907404 3.5958,1.305733 4.0097,1.216668 4.0329,1.003791 c 2.8164,0.628184 5.6593,1.129427 8.5206,1.503202 2.9677,0.387099 5.9505,0.649865 8.9399,0.787776 l 4.9165,0.120144"},F.RectangleHorizontal1={id:9,name:"Rectangle Horizontal 1",code:"RectangleHorizontal1",scaleFactorx:.08,scaleFactorY:.08,offsetX:10,offsetY:60,faceArtId:146521,backgroundPath:"M119.819,59.909l0,-50.909c0,-4.971 -4.029,-9 -9,-9l-101.819,0c-4.971,0 -9,4.029 -9,9l0,50.909c0,4.971 4.029,9 9,9l101.819,0c4.971,0 9,-4.029 9,-9Z",path:"m -6.103516e-5,-19.195219 98.09762003516,0 0,49.048795 -98.09762003516,0 0,-49.048795 z"},F.Stretch={name:"Stretch",code:"STRETCH",backgroundPath:"M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z",path:"M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z"},F.Copy={name:"Copy",code:"COPY",backgroundPath:"M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",path:"M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z"},F.shapesArr=[F.FlagR1,F.square,F.star,F.circle,F.pizza,F.OvalHorizontal1,F.RectangleHorizontal1,F.FlagR1Img,F.sun],F.popularShapes={id:125,parent_id:null,name:"basic",title:"Basic",list_order:5,type:"shape",shapes:[{id:6,style_id:0,code:"CIRCLE",name:"Circle",path:"m 78.272569,5.3299616 c 0,-21.6150296 -17.52193,-39.1373276 -39.13585,-39.1373276 -21.61491,0 -39.13678003516,17.522298 -39.13678003516,39.1373276 0,21.6134624 17.52187003516,39.1357594 39.13581003516,39.1357594 21.61489,0 39.13682,-17.52125 39.13682,-39.1357594 l 0,0",description:null,raceway_left:2,raceway_right:2,pricing_modifier:1,weight_ratio:1,height_ratio:1.128,width_ratio:1.128,top_offset:1.064,consumption:.85,sides:1,faces:1,status:"Active",kerning:null,user_id:null,list_order:1,standard_sizes:null,default_size:null,min_size:null,max_size:null,sizeable_ind:1,sizeable_factor:.78,backdrop_path:"M99.243,49.622c0,-27.405 -22.217,-49.622 -49.622,-49.622c-27.405,0 -49.622,22.217 -49.621,49.622c-0.001,27.405 22.216,49.621 49.621,49.621c27.405,0.001 49.622,-22.216 49.622,-49.621Z",backdrop_height_ratio:null,backdrop_width_ratio:null,backdrop_top_offset:null,wide_ind:0,style_code:"logoshapes",style_modifier:1.2,custom_ind:0,categories:"125,126"},{id:20,style_id:0,code:"SQUAR",name:"Square",path:"m -6.103516e-5,-29.353786 69.36570003516,0 0,69.365928 -69.36570003516,0 0,-69.365928 z",description:null,raceway_left:0,raceway_right:0,pricing_modifier:1,weight_ratio:1,height_ratio:1,width_ratio:1,top_offset:1,consumption:1,sides:1,faces:1,status:"Active",kerning:null,user_id:null,list_order:2,standard_sizes:null,default_size:null,min_size:null,max_size:null,sizeable_ind:1,sizeable_factor:null,backdrop_path:"M80.997,0l-71.997,0c-4.971,0 -9,4.029 -9,9l0,71.997c0,4.971 4.029,9 9,9l71.997,0c4.971,0 9,-4.029 9,-9l0,-71.997c0,-4.971 -4.029,-9 -9,-9Z",backdrop_height_ratio:null,backdrop_width_ratio:null,backdrop_top_offset:null,wide_ind:0,style_code:"logoshapes",style_modifier:1.2,custom_ind:0,categories:"125,126"},{id:14,style_id:0,code:"OVALH 1",name:"Oval Horizontal 1",path:"m 55.040039,32.98627 0.161,0.0019 0.1645,-10e-4 0.2284,-10e-4 c 2.2987,0 4.5975,-0.08098 6.8925,-0.227236 2.5558,-0.164552 5.1051,-0.421312 7.6429,-0.770015 l 3.6408,-0.571241 4.0186,-0.798747 4.0088,-0.987333 4.4048,-1.336297 3.4915,-1.274652 c 1.9058,-0.750686 3.7711,-1.598543 5.5891,-2.541472 l 1.9432,-1.066738 1.9065,-1.165471 c 1.252501,-0.805538 2.456001,-1.684997 3.604201,-2.632366 l 1.6446,-1.462194 1.5427,-1.600631 0.7601,-0.900875 0.7892,-1.045059 c 0.6589,-0.92386 1.2331,-1.904664 1.7157,-2.931964 l 0.8777,-2.3275445 0.3092,-1.2736089 c 0.1774,-0.9047964 0.267,-1.8239575 0.267,-2.7449474 l -0.098,-1.663839 -0.3314,-1.8111556 -0.5502,-1.75055843 -0.8286,-1.83649067 -0.9289,-1.5799962 -1.1764,-1.6243997 -1.3014,-1.5018953 -1.5492,-1.5261874 -1.4026,-1.2072648 -1.6101,-1.2333841 -1.659301,-1.135695 -1.8786,-1.155282 c -1.8239,-1.054725 -3.7071,-2.002618 -5.6419,-2.839239 l -2.1948,-0.907144 -3.6117,-1.302863 -4.0283,-1.213793 -4.0512,-1.000134 c -2.8284,-0.624209 -5.6844,-1.121534 -8.5582,-1.490345 -2.98,-0.383442 -5.9752,-0.640724 -8.9775,-0.771584 l -4.9431,-0.107078 c -4.8818,0 -9.7567,0.317878 -14.5942,0.969309 l -3.6565,0.565495 -4.0368,0.792743 -4.0261,0.983939 -4.425,1.332376 -3.5078,1.272564 c -1.9153,0.749639 -3.7914,1.597494 -5.6188,2.540423 l -1.9531,1.067783 -1.9173,1.166516 c -1.2588,0.806587 -2.4702,1.6860451 -3.6254,2.6352411 l -1.654,1.4653288 -1.5532,1.6040259 -0.764,0.9027071 -0.7947,1.0484533 c -0.6641,0.9267347 -1.2429,1.9104114 -1.7295,2.9403192 l -0.88540004,2.3372119 -0.3111,1.278573 C 0.09033896,3.4801245 -6.103516e-5,4.4029434 -6.103516e-5,5.3288962 L 0.09593896,6.9862055 l 0.3294,1.8035796 0.5453,1.7437659 0.82270004,1.830486 0.922,1.574252 1.1686,1.620477 1.2929,1.499024 1.5399,1.522271 1.3941,1.205174 1.6001,1.230246 1.6505,1.135957 1.8679,1.153457 c 1.8144,1.053939 3.6881,2.001832 5.6122,2.839238 l 2.1829,0.907404 3.5958,1.305733 4.0097,1.216668 4.0329,1.003791 c 2.8164,0.628184 5.6593,1.129427 8.5206,1.503202 2.9677,0.387099 5.9505,0.649865 8.9399,0.787776 l 4.9165,0.120144",description:null,raceway_left:4,raceway_right:3,pricing_modifier:1,weight_ratio:1,height_ratio:.798,width_ratio:1.596,top_offset:.897,consumption:.85,sides:1,faces:1,status:"Active",kerning:null,user_id:null,list_order:3,standard_sizes:null,default_size:null,min_size:null,max_size:null,sizeable_ind:1,sizeable_factor:.78,backdrop_path:"M66.416,75.399c24.1,-0.838 37.515,-5.264 48.631,-11.525c9.586,-5.401 18.096,-15.068 17.807,-26.716c-0.58,-23.406 -32.889,-34.175 -51.401,-36.258l-15.776,-0.9l-20.131,1.773c-17.175,2.201 -46.08,14.357 -45.538,36.439c0.575,23.362 32.692,34.08 51.156,36.23l15.252,0.957Z",backdrop_height_ratio:null,backdrop_width_ratio:null,backdrop_top_offset:null,wide_ind:0,style_code:"logoshapes",style_modifier:1.2,custom_ind:0,categories:"125"},{id:15,style_id:0,code:"OVALV 1",name:"Oval Vertical 1",path:"m 55.319506,5.6107451 0,-0.1619313 0,-0.3928461 c 0,-2.2988147 -0.081,-4.59763393 -0.2284,-6.8925273 -0.1637,-2.5561002 -0.4212,-5.1054054 -0.7699,-7.6429573 l -0.5713,-3.6411161 -0.7987,-4.018553 -0.9876,-4.008625 -1.3361,-4.404868 -1.2746,-3.491451 c -0.7506,-1.905971 -1.5985,-3.770938 -2.5418,-5.588883 l -1.0664,-1.943316 -1.1658,-1.906755 c -0.8055,-1.252459 -1.6852,-2.455805 -2.632,-3.604036 l -1.4628,-1.644773 -1.6,-1.542382 -0.9009,-0.76009 -1.0454,-0.789083 c -0.9237,-0.659273 -1.9045,-1.233128 -2.9317,-1.716084 l -2.3276,-0.877631 -1.2737,-0.308997 c -0.9047,-0.177628 -1.8238,-0.266949 -2.7448,-0.266949 l -1.6639,0.09925 -1.8113,0.331463 -1.7514,0.550086 -1.8356,0.828524 -1.5799,0.928824 -1.6244,1.176442 -1.5019,1.301295 -1.5261,1.549174 -1.2074,1.403163 -1.2332,1.60977 -1.1359,1.659138 -1.155,1.878546 c -1.055,1.823956 -2.0032,3.707466 -2.8393,5.641909 l -0.9077,2.194856 -1.3024,3.611866 -1.2139,4.028216 -1,4.051202 c -0.6243,2.828788 -1.1217,5.684218 -1.49060005,8.5581951 -0.3832,2.9797642 -0.6406,5.9751993 -0.7718,8.97742257 L 2.0595285e-4,5.3296907 C -0.01079405,10.211245 0.31820595,15.08653 0.96920595,19.923946 l 0.56590005,3.656008 0.7927,4.036834 0.9837,4.026129 1.3325,4.425236 1.2727,3.507647 c 0.7497,1.915639 1.5972,3.791308 2.5405,5.619183 l 1.0677,1.952728 1.1666,1.917203 c 0.8063,1.259238 1.6859,2.47016 2.6351,3.625448 l 1.4653,1.654434 1.6041,1.55283 0.9027,0.764007 1.0482,0.794832 c 0.9269,0.663967 1.9106,1.242785 2.9404,1.72914 l 2.3373,0.885464 1.2786,0.311351 c 0.9075,0.177593 1.8304,0.269033 2.7563,0.269033 l 1.6571,-0.09663 1.8036,-0.329634 1.7448,-0.545383 1.8297,-0.821732 1.574,-0.923078 1.6206,-1.168606 1.4991,-1.292938 1.5225,-1.53925 1.2052,-1.394281 1.2301,-1.600367 1.1359,-1.650261 1.1532,-1.868096 c 1.0543,-1.814291 2.0022,-3.688397 2.8393,-5.612388 l 0.9086,-2.182845 1.3043,-3.595931 1.2169,-4.009671 1.0041,-4.03292 c 0.6281,-2.815987 1.1289,-5.659143 1.5028,-8.520581 0.3875,-2.967487 0.6503,-5.950122 0.7881,-8.939811 l 0.1195,-4.9165527",description:null,raceway_left:1,raceway_right:1,pricing_modifier:1,weight_ratio:1,height_ratio:1.596,width_ratio:.798,top_offset:1.296,consumption:.85,sides:1,faces:1,status:"Active",kerning:null,user_id:null,list_order:4,standard_sizes:null,default_size:null,min_size:null,max_size:null,sizeable_ind:1,sizeable_factor:.78,backdrop_path:"M75.382,66.684c-0.945,-27.187 -8.567,-55.798 -27.943,-64.35c-19.498,-8.605 -33.079,8.252 -39.831,23.388c-2.955,6.624 -5.944,19.128 -6.709,25.929l-0.899,15.772l1.772,20.125c2.2,17.171 14.354,46.068 36.431,45.526c23.356,-0.575 34.072,-32.683 36.222,-51.143l0.957,-15.247Z",backdrop_height_ratio:null,backdrop_width_ratio:null,backdrop_top_offset:null,wide_ind:0,style_code:"logoshapes",style_modifier:1.2,custom_ind:0,categories:"125"},{id:19,style_id:0,code:"RECTV 1",name:"Rectangle Vertical 1",path:"m -6.103516e-5,-43.71949 49.04860003516,0 0,98.097335 -49.04860003516,0 0,-98.097335 z",description:null,raceway_left:0,raceway_right:0,pricing_modifier:1,weight_ratio:1,height_ratio:1.414,width_ratio:.707,top_offset:1.205,consumption:1,sides:1,faces:1,status:"Active",kerning:null,user_id:null,list_order:6,standard_sizes:null,default_size:null,min_size:null,max_size:null,sizeable_ind:1,sizeable_factor:null,backdrop_path:"M59.909,0l-50.909,0c-4.971,0 -9,4.029 -9,9l0,101.819c0,4.971 4.029,9 9,9l50.909,0c4.971,0 9,-4.029 9,-9l0,-101.819c0,-4.971 -4.029,-9 -9,-9Z",backdrop_height_ratio:null,backdrop_width_ratio:null,backdrop_top_offset:null,wide_ind:0,style_code:"logoshapes",style_modifier:1.2,custom_ind:0,categories:"125"}]},F.faceshape=[{id:13544,title:"",url:"2020/files/signs/sign.313117.v2.png",groups:5,type:"template"},{id:13544,title:"",url:"2020/files/signs/sign.313116.v3.png",groups:1,type:"template"},{id:13544,title:"",url:"2020/files/signs/sign.313118.v2.png",groups:9,type:"template"},{id:13544,title:"",url:"2020/files/signs/sign.313119.v2.png",groups:7,type:"template"},{id:13544,title:"",url:"2020/files/signs/sign.300995.v2.png",groups:4,type:"template"},{id:13544,title:"",url:"2020/files/signs/sign.313120.v4.png",groups:1,type:"template"},{id:13544,title:"",url:"2020/files/signs/sign.300981.v1.png",groups:2,type:"template"},{id:13544,title:"",url:"2020/files/signs/sign.300987.v1.png",groups:3,type:"template"}],F.litshape=[{id:13544,title:"New Sign",url:"2020/files/signs/sign.13544.v4.png",groups:8,type:"template"},{id:14898,title:"New Sign",url:"2020/files/signs/sign.14898.v4.png",groups:8,type:"template"},{id:309462,title:"Oval LED Lit Shapes sign with Self Contained Power",url:"2020/files/signs/sign.309462.v2.png",groups:1,type:"template"},{id:309679,title:"Oval Customize Your Own Sign LED Lit Shape Sign",url:"2020/files/signs/sign.309679.v3.png",groups:1,type:"template"},{id:310182,title:"",url:"2020/files/signs/sign.310182.v3.png",groups:1,type:"template"},{id:311089,title:"New Sign",url:"2020/files/signs/sign.311089.v2.png",groups:1,type:"template"},{id:312788,title:"Oval Customize Your Own Sign Lit Shape Sign",url:"2020/files/signs/sign.312788.v3.png",groups:1,type:"template"},{id:312789,title:"Square Customize Your Own Sign Lit Shape Sign",url:"2020/files/signs/sign.312789.v3.png",groups:1,type:"template"},{id:312790,title:"Circle Lit Shape Sign",url:"2020/files/signs/sign.312790.v3.png",groups:1,type:"template"},{id:312791,title:"Rectangle Lit Shape Sign",url:"2020/files/signs/sign.312791.v4.png",groups:1,type:"template"}];class G{}G.deleteIcon="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E",G.svgListIcon=encodeURIComponent('\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-card-list" viewBox="0 0 16 16">\n    <path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"/>\n        <path d="M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>\n    </svg>\n    '),G.ListIcon=`data:image/svg+xml;utf8,${G.svgListIcon}`;let ot=(()=>{class Y{}return Y.faceArt=[{id:61,parent_id:null,name:"popular",title:"[Popular]",list_order:-1,type:"faceart",faceart_count:10,facearts:[{id:100,signgroup_id:100,name:"Flag America",keywords:"",repeat_ind:1,user_id:null,file_id:200683,status:"Active",shape_id:null,source_faceart_id:null,source_file_id:null,style_id:null,refsize_p1x:2,refsize_p1y:2,refsize_p2x:2,refsize_p2y:2,refsize_distance:null,refsize:null,filename:"blacklineargradient.png",extension:"png",url:"2020/files/graphics/10135amerflgr.hlrBxllncC.png",url_thumb:"2020/files/graphics/10135amerflgr-thumb.hlrBxllncC.png",categories:"91,100166,61",used:279},{id:1001,signgroup_id:1001,name:"SUN",keywords:"",repeat_ind:1,user_id:null,file_id:200683,status:"Active",shape_id:null,source_faceart_id:null,source_file_id:null,style_id:null,refsize_p1x:2,refsize_p1y:2,refsize_p2x:2,refsize_p2y:2,refsize_distance:null,refsize:null,filename:"blacklineargradient.png",extension:"png",url:"2020/files/graphics/10221-sun.xOaXEXZBWF.jpg",url_thumb:"2020/files/graphics/10221-sun-thumb.xOaXEXZBWF.jpg",categories:"91,100166,61",used:279},{id:1002,signgroup_id:1002,name:"PIZZA",keywords:"",repeat_ind:1,user_id:null,file_id:200683,status:"Active",shape_id:null,source_faceart_id:null,source_file_id:null,style_id:null,refsize_p1x:2,refsize_p1y:2,refsize_p2x:2,refsize_p2y:2,refsize_distance:null,refsize:null,filename:"blacklineargradient.png",extension:"png",url:"2020/files/graphics/10206pizza-3.Wj3R6Fa0Zh.png",url_thumb:"2020/files/graphics/10206pizza-3-thumb.Wj3R6Fa0Zh.png",categories:"91,100166,61",used:279},{id:100120,signgroup_id:100120,name:"Black Linear Gradient",keywords:"",repeat_ind:1,user_id:null,file_id:200683,status:"Active",shape_id:null,source_faceart_id:null,source_file_id:null,style_id:null,refsize_p1x:null,refsize_p1y:null,refsize_p2x:null,refsize_p2y:null,refsize_distance:null,refsize:null,filename:"blacklineargradient.png",extension:"png",url:"2020/files/graphics/blacklineargradient.GCb2WSmp36.png",url_thumb:"2020/files/graphics/blacklineargradient-thumb.GCb2WSmp36.png",categories:"91,100166,61",used:279},{id:100099,signgroup_id:100099,name:"Seal Circle",keywords:"circle, outline, wavy",repeat_ind:1,user_id:null,file_id:200665,status:"Active",shape_id:null,source_faceart_id:null,source_file_id:null,style_id:null,refsize_p1x:null,refsize_p1y:null,refsize_p2x:null,refsize_p2y:null,refsize_distance:null,refsize:null,filename:"seal05.svg",extension:"svg",url:"2020/files/graphics/seal05.HoyImpXg9t.svg",url_thumb:null,categories:"102,100166,61",used:20},{id:100112,signgroup_id:100112,name:"United States Outline",keywords:"country, usa",repeat_ind:1,user_id:null,file_id:200676,status:"Active",shape_id:null,source_faceart_id:null,source_file_id:null,style_id:null,refsize_p1x:null,refsize_p1y:null,refsize_p2x:null,refsize_p2y:null,refsize_distance:null,refsize:null,filename:"unitedstates01.svg",extension:"svg",url:"2020/files/graphics/unitedstates01.kGtdJEmDH2.svg",url_thumb:null,categories:"67,100166,61",used:36},{id:100009,signgroup_id:100009,name:"Square",keywords:"square, rectangle",repeat_ind:1,user_id:null,file_id:9799,status:"Active",shape_id:null,source_faceart_id:null,source_file_id:null,style_id:null,refsize_p1x:null,refsize_p1y:null,refsize_p2x:null,refsize_p2y:null,refsize_distance:null,refsize:null,filename:"square.svg",extension:"svg",url:"2020/files/graphics/square.iws0LSNDBI.svg",url_thumb:null,categories:"61,66,100166",used:126},{id:100010,signgroup_id:100010,name:"Circle",keywords:"circle, oval",repeat_ind:1,user_id:null,file_id:9711,status:"Active",shape_id:null,source_faceart_id:null,source_file_id:null,style_id:null,refsize_p1x:null,refsize_p1y:null,refsize_p2x:null,refsize_p2y:null,refsize_distance:null,refsize:null,filename:"circle.svg",extension:"svg",url:"2020/files/graphics/circle.7ebHp8qG4V.svg",url_thumb:null,categories:"61,66,100166",used:923},{id:100288,signgroup_id:100288,name:"Open Twenty Four Hours",keywords:"open, hours,",repeat_ind:1,user_id:null,file_id:202103,status:"Active",shape_id:null,source_faceart_id:null,source_file_id:null,style_id:null,refsize_p1x:null,refsize_p1y:null,refsize_p2x:null,refsize_p2y:null,refsize_distance:null,refsize:null,filename:"10148twenfourhr.png",extension:"png",url:"2020/files/graphics/10148twenfourhr.ASL5rHop4p.png",url_thumb:"2020/files/graphics/10148twenfourhr-thumb.ASL5rHop4p.png",categories:"100166,73,70,61",used:72},{id:100106,signgroup_id:100106,name:"Star 1",keywords:"sky,",repeat_ind:1,user_id:null,file_id:9730,status:"Active",shape_id:null,source_faceart_id:null,source_file_id:null,style_id:null,refsize_p1x:null,refsize_p1y:null,refsize_p2x:null,refsize_p2y:null,refsize_distance:null,refsize:null,filename:"star1.svg",extension:"svg",url:"2020/files/graphics/star1.nl2qNgdIhC.svg",url_thumb:null,categories:"66,64,100166,61",used:292},{id:100292,signgroup_id:100292,name:"Sun Tan",keywords:"Tan, sun, beach, tanning",repeat_ind:1,user_id:null,file_id:202109,status:"Active",shape_id:null,source_faceart_id:null,source_file_id:null,style_id:null,refsize_p1x:null,refsize_p1y:null,refsize_p2x:null,refsize_p2y:null,refsize_distance:null,refsize:null,filename:"10154tan.png",extension:"png",url:"2020/files/graphics/10154tan.ZSFrJvmj2t.png",url_thumb:"2020/files/graphics/10154tan-thumb.ZSFrJvmj2t.png",categories:"100166,61,104,70,112",used:29},{id:100287,signgroup_id:100287,name:"Earth Image",keywords:"earth, planet, home, space, globe",repeat_ind:1,user_id:null,file_id:202097,status:"Active",shape_id:null,source_faceart_id:null,source_file_id:null,style_id:null,refsize_p1x:null,refsize_p1y:null,refsize_p2x:null,refsize_p2y:null,refsize_distance:null,refsize:null,filename:"10146earth.png",extension:"png",url:"2020/files/graphics/10146earth.qkUGFmdKHf.png",url_thumb:"2020/files/graphics/10146earth-thumb.qkUGFmdKHf.png",categories:"104,100166,67,61",used:54},{id:100013,signgroup_id:100013,name:"Car Swoop",keywords:"car, car shape, car silhouette, auto",repeat_ind:1,user_id:null,file_id:9798,status:"Active",shape_id:null,source_faceart_id:null,source_file_id:null,style_id:null,refsize_p1x:null,refsize_p1y:null,refsize_p2x:null,refsize_p2y:null,refsize_distance:null,refsize:null,filename:"carswoop.svg",extension:"svg",url:"2020/files/graphics/carswoop.zCvUS99kwE.svg",url_thumb:null,categories:"61,86,100166",used:62},{id:316987,signgroup_id:146521,text:null,font_name:null,font_size:null,shadow_size:"0.00",align:null,position_x:-273,position_y:-164,width:600,angle:0,type:"image",height:375,stack_order:1,scale_x:.899401,scale_y:.915697,faceart_id:3819,color_hex:"#000000",stroke_color_hex:"#000000",shadow_color_hex:"#000000",opacity:"1.0",stroke_size:"0.00",line_height:null,text_max_width_percent:null,text_max_height_percent:null,font_style:null,flip_h:0,flip_v:0,diameter:null,kerning:null,face:0,filename:"flowers1.jpg",url:"files/users/tony@parissigns.com/graphics/flowers1.jpg",url_thumb:"files/users/tony@parissigns.com/graphics/flowers1-thumb.png"},{id:316988,signgroup_id:146521,text:null,font_name:null,font_size:null,shadow_size:"0.00",align:null,position_x:-296,position_y:33,width:60,angle:0,type:"svg",height:60,stack_order:2,scale_x:9.43536,scale_y:1.00875,faceart_id:3814,color_hex:"#95337f",stroke_color_hex:"#000000",shadow_color_hex:"#000000",opacity:"0.6",stroke_size:"0.00",line_height:null,text_max_width_percent:null,text_max_height_percent:null,font_style:null,flip_h:0,flip_v:0,diameter:null,kerning:null,face:0,filename:"square.svg",url:"2020/files/graphics/square.iws0LSNDBI.svg",url_thumb:null},{id:316989,signgroup_id:146521,text:"Flowers",font_name:"Yesteryear",font_size:149,shadow_size:"1.00",align:"center",position_x:-226,position_y:-110,width:null,angle:0,type:"text",height:null,stack_order:3,scale_x:1,scale_y:1,faceart_id:null,color_hex:"#ffffff",stroke_color_hex:"#000000",shadow_color_hex:"#000000",opacity:"1.0",stroke_size:"5.00",line_height:1.16,text_max_width_percent:null,text_max_height_percent:null,font_style:null,flip_h:0,flip_v:0,diameter:null,kerning:null,face:0,filename:null,url:null,url_thumb:null},{id:316990,signgroup_id:146521,text:"Your Name",font_name:"Vollkorn",font_size:46,shadow_size:"1.00",align:"left",position_x:-48,position_y:-92,width:null,angle:0,type:"text",height:null,stack_order:4,scale_x:1,scale_y:1,faceart_id:null,color_hex:"#ffffff",stroke_color_hex:"#000000",shadow_color_hex:"#000000",opacity:"1.0",stroke_size:"4.00",line_height:1.16,text_max_width_percent:null,text_max_height_percent:null,font_style:null,flip_h:0,flip_v:0,diameter:null,kerning:null,face:0,filename:null,url:null,url_thumb:null},{id:316991,signgroup_id:146521,text:"and Gifts",font_name:"Vollkorn",font_size:59,shadow_size:"1.00",align:"center",position_x:-137,position_y:28,width:null,angle:0,type:"text",height:null,stack_order:5,scale_x:1,scale_y:1,faceart_id:null,color_hex:"#ffffff",stroke_color_hex:"#000000",shadow_color_hex:"#000000",opacity:"1.0",stroke_size:"4.00",line_height:1.16,text_max_width_percent:null,text_max_height_percent:null,font_style:null,flip_h:0,flip_v:0,diameter:null,kerning:null,face:0,filename:null,url:null,url_thumb:null}]}],Y})();var ut=se(9631),gt=se(6087),_t=se(5004);function ht(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"button",2),f.NdJ("click",function(){const xt=f.CHM(S).$implicit,Ot=f.oxw();return f.KtG(Ot.SelectedShape(xt.groups))}),f._UZ(2,"img",3),f.qZA(),f.BQk()}if(2&Y){const S=pt.$implicit;f.xp6(1),f.s9C("id",S.id),f.xp6(1),f.s9C("src","https://storage.googleapis.com/signmonkey-148101.appspot.com/"+S.url,f.LSH)}}let ft=(()=>{class Y{constructor(S){this.dialog=S,this.shapeEmitter=new f.vpe,this.shapeLst=[]}ngOnInit(){this.shapeLst="Lit Shape Sign"==this.product.title?F.litshape:F.faceshape}SelectedShape(S){const j=F.shapesArr.find(xt=>xt.id==S);this.shapeEmitter.emit(j)}}return Y.\u0275fac=function(S){return new(S||Y)(f.Y36(_t.uw))},Y.\u0275cmp=f.Xpm({type:Y,selectors:[["app-shapes-side-bar"]],inputs:{product:"product"},outputs:{shapeEmitter:"shapeEmitter"},decls:2,vars:1,consts:[[1,"sc-kTUwUJ","exoAQC"],[4,"ngFor","ngForOf"],[1,"sc-dqBHgY","kZLXmX",3,"id","click"],["width","100px","height","100px",2,"margin","2px","border-radius","3px",3,"src"]],template:function(S,I){1&S&&(f.TgZ(0,"div",0),f.YNc(1,ht,3,2,"ng-container",1),f.qZA()),2&S&&(f.xp6(1),f.Q6J("ngForOf",I.shapeLst))},dependencies:[_.sg]}),Y})();function bt(Y,pt){if(1&Y){const S=f.EpF();f.TgZ(0,"button",45),f.NdJ("click",function(){const xt=f.CHM(S).$implicit,Ot=f.oxw(2);return f.KtG(Ot.fontSelect(xt.name))}),f._UZ(1,"img",46),f._uU(2),f.qZA()}if(2&Y){const S=pt.$implicit;f.xp6(1),f.Q6J("src",S.imgpath,f.LSH),f.xp6(1),f.hij(" ",S.name,"")}}function wt(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"mat-step")(2,"button",41),f.NdJ("click",function(){f.CHM(S);const j=f.oxw();return f.KtG(j.exit())}),f._uU(3,"Back"),f.qZA(),f.TgZ(4,"button",3),f._uU(5,"Next"),f.qZA(),f.TgZ(6,"form",42),f._UZ(7,"input",43),f.qZA()(),f.TgZ(8,"mat-step")(9,"button",2),f._uU(10,"Back"),f.qZA(),f.TgZ(11,"button",3),f._uU(12,"Next"),f.qZA(),f.TgZ(13,"h5",35),f._uU(14,"Choose Type font"),f.qZA(),f.TgZ(15,"mat-action-list"),f.YNc(16,bt,3,2,"button",44),f.qZA()(),f.BQk()}if(2&Y){const S=f.oxw();f.xp6(6),f.Q6J("formGroup",S.firstFormGroup),f.xp6(10),f.Q6J("ngForOf",S.fontArray)}}function vt(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"mat-step")(2,"button",41),f.NdJ("click",function(){f.CHM(S);const j=f.oxw();return f.KtG(j.exit())}),f._uU(3,"Back"),f.qZA(),f.TgZ(4,"button",3),f._uU(5,"Next"),f.qZA(),f.TgZ(6,"div",47),f.NdJ("click",function(){f.CHM(S);const j=f.oxw(),xt=f.MAs(1);return f.KtG(j.navigateToNextStep(xt))}),f._UZ(7,"img",48),f.TgZ(8,"div",49),f._uU(9,"Choose A Shape"),f.qZA(),f._UZ(10,"i",50),f.qZA()(),f.TgZ(11,"mat-step")(12,"button",2),f._uU(13,"Back"),f.qZA(),f.TgZ(14,"button",3),f._uU(15,"Next"),f.qZA(),f.TgZ(16,"app-shapes-side-bar",51),f.NdJ("shapeEmitter",function(j){f.CHM(S);const xt=f.oxw();return f.KtG(xt.selectedShape(j))}),f.qZA()(),f.BQk()}if(2&Y){const S=f.oxw();f.xp6(16),f.Q6J("product",S.selectedProduct)}}function k(Y,pt){1&Y&&(f.TgZ(0,"li",5)(1,"button",52),f._UZ(2,"img",11),f.qZA()())}function M(Y,pt){1&Y&&(f.TgZ(0,"li",5)(1,"button",53),f._UZ(2,"img",11),f.qZA()())}const D=function(Y){return{backgroundColor:Y}};function R(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"button",54),f.NdJ("click",function(){const xt=f.CHM(S).$implicit,Ot=f.oxw();return f.KtG(Ot.colorSelect(xt.name,"field"))}),f.qZA(),f.BQk()}if(2&Y){const S=pt.$implicit;f.xp6(1),f.Q6J("ngStyle",f.VKq(1,D,S.name))}}function Z(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"button",54),f.NdJ("click",function(){const xt=f.CHM(S).$implicit,Ot=f.oxw();return f.KtG(Ot.colorSelect(xt.name,"field"))}),f.qZA(),f.BQk()}if(2&Y){const S=pt.$implicit;f.xp6(1),f.Q6J("ngStyle",f.VKq(1,D,S.name))}}function P(Y,pt){1&Y&&(f.TgZ(0,"div",16)(1,"h5",55)(2,"button",56),f._uU(3," Sherwin Williams "),f.qZA()(),f.TgZ(4,"div",57)(5,"div",20)(6,"div",58)(7,"div",59),f._UZ(8,"div",60)(9,"div",61),f.qZA(),f.TgZ(10,"div",59),f._UZ(11,"div",62)(12,"div",61),f.qZA(),f.TgZ(13,"div",63),f._UZ(14,"div",64)(15,"div",61),f.qZA(),f.TgZ(16,"div",65),f._UZ(17,"div",66)(18,"div",61),f.qZA(),f.TgZ(19,"div",67),f._UZ(20,"div",68)(21,"div",61),f.qZA(),f.TgZ(22,"div",69),f._UZ(23,"div",64)(24,"div",70),f.qZA(),f.TgZ(25,"div",71),f._UZ(26,"div",64)(27,"div",72),f.qZA(),f.TgZ(28,"div",73),f._UZ(29,"div",64)(30,"div",74),f.qZA(),f.TgZ(31,"div",75),f._UZ(32,"div",61)(33,"div",70),f.qZA(),f.TgZ(34,"div",76),f._UZ(35,"div",61)(36,"div",72),f.qZA(),f.TgZ(37,"div",77),f._UZ(38,"div",61)(39,"div",74),f.qZA(),f.TgZ(40,"div",78),f._UZ(41,"div",61)(42,"div",79),f.qZA(),f.TgZ(43,"div",80),f._UZ(44,"div",70)(45,"div",61),f.qZA(),f.TgZ(46,"div",59),f._UZ(47,"div",81)(48,"div",82),f.qZA(),f.TgZ(49,"div",59),f._UZ(50,"div",83)(51,"div",70),f.qZA()()()()())}function O(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"button",87),f.NdJ("click",function(){const xt=f.CHM(S).$implicit,Ot=f.oxw(2);return f.KtG(Ot.colorSelect(xt.name,"field"))}),f._uU(2),f.qZA(),f.BQk()}if(2&Y){const S=pt.$implicit;f.xp6(1),f.Q6J("ngStyle",f.VKq(3,D,S.name))("ngClass",S.name),f.xp6(1),f.Oqu(S.name)}}function z(Y,pt){if(1&Y&&(f.TgZ(0,"div",16)(1,"h5",84)(2,"button",85),f._uU(3," Pantone "),f.qZA()(),f.TgZ(4,"div",86)(5,"div",20)(6,"mat-action-list",33),f.YNc(7,O,3,5,"ng-container",22),f.qZA()()()()),2&Y){const S=f.oxw();f.xp6(7),f.Q6J("ngForOf",S.colorArray)}}function N(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"button",87),f.NdJ("click",function(){const xt=f.CHM(S).$implicit,Ot=f.oxw();return f.KtG(Ot.colorSelect(xt.name,"field"))}),f._uU(2),f.qZA(),f.BQk()}if(2&Y){const S=pt.$implicit;f.xp6(1),f.Q6J("ngStyle",f.VKq(3,D,S.name))("ngClass",S.name),f.xp6(1),f.Oqu(S.name)}}function J(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"button",54),f.NdJ("click",function(){const xt=f.CHM(S).$implicit,Ot=f.oxw();return f.KtG(Ot.colorSelect(xt.name,"stroke"))}),f.qZA(),f.BQk()}if(2&Y){const S=pt.$implicit;f.xp6(1),f.Q6J("ngStyle",f.VKq(1,D,S.name))}}function X(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"button",54),f.NdJ("click",function(){const xt=f.CHM(S).$implicit,Ot=f.oxw();return f.KtG(Ot.colorSelect(xt.name,"side"))}),f.qZA(),f.BQk()}if(2&Y){const S=pt.$implicit;f.xp6(1),f.Q6J("ngStyle",f.VKq(1,D,S.name))}}function rt(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"button",54),f.NdJ("click",function(){const xt=f.CHM(S).$implicit,Ot=f.oxw();return f.KtG(Ot.colorSelect(xt.name,"race"))}),f.qZA(),f.BQk()}if(2&Y){const S=pt.$implicit;f.xp6(1),f.Q6J("ngStyle",f.VKq(1,D,S.name))}}function lt(Y,pt){if(1&Y){const S=f.EpF();f.ynx(0),f.TgZ(1,"button",54),f.NdJ("click",function(){const xt=f.CHM(S).$implicit,Ot=f.oxw();return f.KtG(Ot.colorSelect(xt.name,"shadow"))}),f.qZA(),f.BQk()}if(2&Y){const S=pt.$implicit;f.xp6(1),f.Q6J("ngStyle",f.VKq(1,D,S.name))}}function dt(Y,pt){1&Y&&f._uU(0,"Done")}let K=(()=>{class Y{constructor(S){this._formBuilder=S,this.unavailable=!1,this.data={value:"LETTERS",font:"Tahoma",size:"100",color:"red"},this.step=-1,this.fontArray=[{name:"Tahoma",imgpath:"../../../assets/images/standard.png"},{name:"Serif",imgpath:"../../../assets/images/serifbold.png"},{name:"Brush Script MT",imgpath:"../../../assets/images/brush.png"},{name:"Freehand",imgpath:"../../../assets/images/freestyle.png"},{name:"Oswald",imgpath:"../../../assets/images/standard-condemed.png"},{name:"Varela Round ",imgpath:"../../../assets/images/standard-round.png"},{name:"Courier New",imgpath:"../../../assets/images/boxer.png"}],this.colorArray=[{name:"rgb(249, 214, 22)"},{name:"rgb(0, 140, 66)"},{name:"rgb(148, 46, 181)"},{name:"rgb(223, 185, 122)"},{name:"rgb(0, 51, 127)"},{name:"rgb(0, 114, 114)"},{name:"rgb(170, 0, 79)"},{name:"rgb(192, 192, 192)"},{name:"rgb(0, 83, 62)"},{name:"rgb(255, 158, 27)"},{name:"rgb(235, 111, 189)"},{name:"rgb(255, 198, 30)"},{name:"rgb(127, 186, 0)"},{name:"rgb(184, 97, 37)"},{name:"rgb(242, 125, 0)"},{name:"rgb(0, 150, 94)"},{name:"rgb(255, 0, 153)"}],this.bckEvt=new f.vpe,this.ValueChange=new f.vpe}ngOnInit(){this.firstFormGroup=this._formBuilder.group({firstCtrl:["",C.kI.required]}),this.data.product=this.selectedProduct,this.isLinear=!1,this.edValueKeyPress()}exit(){this.selectedProduct.category="",this.bckEvt.emit(this.selectedProduct)}fontSelect(S){this.data.font=S,this.ValueChange.emit(this.data)}sizeSelect(S){this.data.size=S,this.ValueChange.emit(this.data)}colorSelect(S,I){switch(this.data.faceImage="",I){case"side":this.data.sideColor=S;break;case"stroke":this.data.boarderColor=S;break;case"shadow":this.data.shadowColor=S;break;case"race":this.data.raceColor=S;break;default:this.data.color=S}this.ValueChange.emit(this.data)}imgSelect(S){this.data.faceImage=S,this.ValueChange.emit(this.data)}edValueKeyPress(){this.firstFormGroup.controls.firstCtrl.valueChanges.pipe((0,A.b)(500)).subscribe(S=>{this.data.value=S,this.ValueChange.emit(this.data)})}completed(S){S.reset(),this.data.completed=!0,this.ValueChange.emit(this.data),this.data={value:"",font:"Tahoma",size:"100",color:"red"}}navigateToNextStep(S){S.next()}selectedShape(S){this.data.shapes=S;let I=ot.faceArt[0].facearts?.filter(j=>j.signgroup_id==S.faceArtId);this.data.graphics=[],I?.forEach(j=>{this.data.graphics?.push({faceart_url:j.url??"",faceart_url_thumb:j.url_thumb??"",scale_x:.1,scale_y:.1,text:j.text??"",font_name:j.font_name??"",font_size:j.font_size??20,font_style:j.font_style??"",position_x:j.position_x,position_y:j.position_y,color_hex:j.color_hex,opacity:Number(j.opacity),stack_order:j.stack_order})}),this.ValueChange.emit(this.data)}}return Y.\u0275fac=function(S){return new(S||Y)(f.Y36(C.qu))},Y.\u0275cmp=f.Xpm({type:Y,selectors:[["app-product-details"]],inputs:{selectedProduct:"selectedProduct"},outputs:{bckEvt:"bckEvt",ValueChange:"ValueChange"},decls:88,vars:13,consts:[["stepper",""],[4,"ngIf"],["mat-button","","matStepperPrevious",""],["mat-button","","matStepperNext",""],["id","myTab","role","tablist",1,"nav","nav-tabs","mt-3","justify-content-between","mt-3","mb-5"],["role","presentation",1,"nav-item"],["id","face-tab","data-bs-toggle","tab","data-bs-target","#face-tab-pane","type","button","role","tab","aria-controls","face-tab-pane","aria-selected","true",1,"nav-link","p-0","m-0","active"],["src","../../../assets/images/letter1.png","alt",""],["id","trim-tab","data-bs-toggle","tab","data-bs-target","#trim-tab-pane","type","button","role","tab","aria-controls","trim-tab-pane","aria-selected","false",1,"nav-link","p-0","m-0"],["src","../../../assets/images/letter2.png","alt",""],["id","boarder-tab","data-bs-toggle","tab","data-bs-target","#boarder-tab-pane","type","button","role","tab","aria-controls","boarder-tab-pane","aria-selected","false",1,"nav-link","p-0","m-0"],["src","../../../assets/images/letter3.png","alt",""],["class","nav-item","role","presentation",4,"ngIf"],["id","myTabContent",1,"tab-content"],["id","face-tab-pane","role","tabpanel","aria-labelledby","face-tab","tabindex","0",1,"tab-pane","fade","show","active"],["id","accordionExample",1,"accordion"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"accordion-button"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[1,"sc-fjdhpX","fRtSug"],[4,"ngFor","ngForOf"],["id","headingTwo",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","aria-labelledby","headingTwo","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#designFills","aria-expanded","false","aria-controls","designFills",1,"accordion-button","collapsed"],["id","designFills","aria-labelledby","headingTwo","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],["src","../assets/images/face-art/O60AC.png",3,"click"],["class","accordion-item",4,"ngIf"],["id","headingFive",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFive","aria-expanded","false","aria-controls","collapseFive",1,"accordion-button","collapsed"],["id","collapseFive","aria-labelledby","headingFive","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,"d-flex"],["id","trim-tab-pane","role","tabpanel","aria-labelledby","trim-tab","tabindex","0",1,"tab-pane","fade"],[1,"desctitle"],["id","boarder-tab-pane","role","tabpanel","aria-labelledby","boarder-tab","tabindex","0",1,"tab-pane","fade"],["id","race-tab-pane","role","tabpanel","aria-labelledby","race-tab","tabindex","0",1,"tab-pane","fade"],["id","shadow-tab-pane","role","tabpanel","aria-labelledby","shadow-tab","tabindex","0",1,"tab-pane","fade"],["matStepLabel",""],["mat-button","",1,"Reset",3,"click"],["mat-button","","matStepperPrevious","",3,"click"],["role","search",1,"d-flex","mt-3",3,"formGroup"],["id","edValue","placeholder","Enter sign letters","type","text","formControlName","firstCtrl",1,"form-control","me-2"],["mat-list-item","",3,"click",4,"ngFor","ngForOf"],["mat-list-item","",3,"click"],["alt","",3,"src"],[1,"d-flex","align-items-center","cursor-pointer",3,"click"],["src","https://storage.googleapis.com/signmonkey-148101.appspot.com/2020/categories/channel-letters-and-logos.jpg","width","180"],[1,"mx-3"],["aria-hidden","true",1,"fa","fa-chevron-right"],[3,"product","shapeEmitter"],["id","race-tab","data-bs-toggle","tab","data-bs-target","#race-tab-pane","type","button","role","tab","aria-controls","race-tab-pane","aria-selected","false",1,"nav-link","p-0","m-0"],["id","shadow-tab","data-bs-toggle","tab","data-bs-target","#shadow-tab-pane","type","button","role","tab","aria-controls","shadow-tab-pane","aria-selected","false",1,"nav-link","p-0","m-0"],[1,"color-box",3,"ngStyle","click"],["id","headingThree",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseThree","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseThree","aria-labelledby","headingThree","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,"d-flex","justify-content-between"],[1,"dual"],[1,"dual-half",2,"background-color","rgb(0, 114, 198)"],[1,"dual-half",2,"background-color","rgb(255, 255, 255)"],[1,"dual-half",2,"background-color","rgb(0, 51, 127)"],["title","Black / White",1,"dual"],[1,"dual-half",2,"background-color","rgb(0, 0, 0)"],["title","Green / White",1,"dual"],[1,"dual-half",2,"background-color","rgb(0, 107, 63)"],["title","Duranodic Bronze / White",1,"dual"],[1,"dual-half",2,"background-color","rgb(45, 41, 38)"],["title","Black / Red",1,"dual"],[1,"dual-half",2,"background-color","rgb(255, 0, 0)"],["title","Black / Blue",1,"dual"],[1,"dual-half",2,"background-color","rgb(0, 0, 255)"],["title","Black / Green",1,"dual"],[1,"dual-half",2,"background-color","rgb(0, 255, 0)"],["title","White / Red",1,"dual"],["title","White / Blue",1,"dual"],["title","White / Green",1,"dual"],["title","White/ Yellow",1,"dual"],[1,"dual-half",2,"background-color","rgb(249, 214, 22)"],["title","Red / White",1,"dual"],[1,"dual-half",2,"background-color","rgb(130, 133, 133)"],[1,"dual-half",2,"background-color","rgb(212, 212, 212)"],[1,"dual-half",2,"background-color","rgb(162, 170, 173)"],["id","headingFour",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseFour","aria-expanded","false","aria-controls","collapseFour",1,"accordion-button","collapsed"],["id","collapseFour","aria-labelledby","headingFour","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],["mat-list-item","",1,"color-box",3,"ngStyle","ngClass","click"]],template:function(S,I){if(1&S){const j=f.EpF();f.TgZ(0,"mat-stepper",null,0),f.YNc(2,wt,17,2,"ng-container",1),f.YNc(3,vt,17,1,"ng-container",1),f.TgZ(4,"mat-step")(5,"button",2),f._uU(6,"Back"),f.qZA(),f.TgZ(7,"button",3),f._uU(8,"Next"),f.qZA(),f.TgZ(9,"ul",4)(10,"li",5)(11,"button",6),f._UZ(12,"img",7),f.qZA()(),f.TgZ(13,"li",5)(14,"button",8),f._UZ(15,"img",9),f.qZA()(),f.TgZ(16,"li",5)(17,"button",10),f._UZ(18,"img",11),f.qZA()(),f.YNc(19,k,3,0,"li",12),f.YNc(20,M,3,0,"li",12),f.qZA(),f.TgZ(21,"div",13)(22,"div",14)(23,"div",15)(24,"div",16)(25,"h5",17)(26,"button",18),f._uU(27," Premium Colors "),f.qZA()(),f.TgZ(28,"div",19)(29,"div",20)(30,"div",21),f.YNc(31,R,2,3,"ng-container",22),f.qZA()()()(),f.TgZ(32,"div",16)(33,"h5",23)(34,"button",24),f._uU(35," Day/Night "),f.qZA()(),f.TgZ(36,"div",25)(37,"div",20)(38,"div",21),f.YNc(39,Z,2,3,"ng-container",22),f.qZA()()()(),f.TgZ(40,"div",16)(41,"h5",23)(42,"button",26),f._uU(43," Design Fills "),f.qZA()(),f.TgZ(44,"div",27)(45,"div",20)(46,"img",28),f.NdJ("click",function(){return I.imgSelect("../assets/images/face-art/O60AC.png")}),f.qZA()()()(),f.YNc(47,P,52,0,"div",29),f.YNc(48,z,8,1,"div",29),f.TgZ(49,"div",16)(50,"h5",30)(51,"button",31),f._uU(52," Pantone "),f.qZA()(),f.TgZ(53,"div",32)(54,"div",20)(55,"mat-action-list",33),f.YNc(56,N,3,5,"ng-container",22),f.qZA()()()()()(),f.TgZ(57,"div",34)(58,"h5",35),f._uU(59,"Choose trim color"),f.qZA(),f.TgZ(60,"div",20)(61,"div",21),f.YNc(62,J,2,3,"ng-container",22),f.qZA()()(),f.TgZ(63,"div",36)(64,"h5",35),f._uU(65,"Choose border color"),f.qZA(),f.TgZ(66,"div",20)(67,"div",21),f.YNc(68,X,2,3,"ng-container",22),f.qZA()()(),f.TgZ(69,"div",37)(70,"h5",35),f._uU(71,"Choose race color"),f.qZA(),f.TgZ(72,"div",20)(73,"div",21),f.YNc(74,rt,2,3,"ng-container",22),f.qZA()()(),f.TgZ(75,"div",38)(76,"h5",35),f._uU(77,"Choose shadow color"),f.qZA(),f.TgZ(78,"div",20)(79,"div",21),f.YNc(80,lt,2,3,"ng-container",22),f.qZA()()()()(),f.TgZ(81,"mat-step"),f.YNc(82,dt,1,0,"ng-template",39),f.TgZ(83,"div")(84,"button",2),f._uU(85,"Back"),f.qZA(),f.TgZ(86,"button",40),f.NdJ("click",function(){f.CHM(j);const Ot=f.MAs(1);return f.KtG(I.completed(Ot))}),f._uU(87,"Done"),f.qZA()()()()}2&S&&(f.xp6(2),f.Q6J("ngIf",I.selectedProduct.title.toLowerCase().includes("letter")),f.xp6(1),f.Q6J("ngIf",!I.selectedProduct.title.toLowerCase().includes("letter")),f.xp6(16),f.Q6J("ngIf",I.selectedProduct.title.toLowerCase().includes("raceway")),f.xp6(1),f.Q6J("ngIf",I.selectedProduct.title.toLowerCase().includes("halo")),f.xp6(11),f.Q6J("ngForOf",I.colorArray),f.xp6(8),f.Q6J("ngForOf",I.colorArray),f.xp6(8),f.Q6J("ngIf",I.unavailable),f.xp6(1),f.Q6J("ngIf",I.unavailable),f.xp6(8),f.Q6J("ngForOf",I.colorArray),f.xp6(6),f.Q6J("ngForOf",I.colorArray),f.xp6(6),f.Q6J("ngForOf",I.colorArray),f.xp6(6),f.Q6J("ngForOf",I.colorArray),f.xp6(6),f.Q6J("ngForOf",I.colorArray))},dependencies:[_.mk,_.sg,_.O5,_.PC,C._Y,C.Fj,C.JJ,C.JL,C.sg,C.u,ut.C0,ut.VY,ut.Vq,ut.Ic,ut.fd,gt.lT,gt.Tg,ft],styles:[".mat-horizontal-stepper-header-container{display:none!important}  .mat-pseudo-checkbox{display:none!important}.desctitle[_ngcontent-%COMP%]{margin:20px 0 10px;padding:8px;background:rgba(105,65,198,.1);text-align:center;font-size:14px;font-weight:400}.color-box[_ngcontent-%COMP%]{height:25px!important;width:25px;background-color:red;margin:0 10px 0 0}.accordion-button[_ngcontent-%COMP%]{padding:5px 15px}.dual[_ngcontent-%COMP%]{display:flex;height:25px;width:25px;padding:0}.dual[_ngcontent-%COMP%]   .dual-half[_ngcontent-%COMP%]{flex:1;border:1px solid #000000}.mat-horizontal-content-container[_ngcontent-%COMP%]{padding:0}"]}),Y})();const U=["prdDtls"],$=["close"];function it(Y,pt){if(1&Y){const S=f.EpF();f.TgZ(0,"app-products",12),f.NdJ("clickEvent",function(j){f.CHM(S);const xt=f.oxw();return f.KtG(xt.products(j))}),f.qZA()}}function q(Y,pt){if(1&Y){const S=f.EpF();f.TgZ(0,"app-product-details",13),f.NdJ("bckEvt",function(j){f.CHM(S);const xt=f.oxw();return f.KtG(xt.prodDtls(j))})("ValueChange",function(j){f.CHM(S);const xt=f.oxw();return f.KtG(xt.ValueChange1(j))}),f.qZA()}if(2&Y){const S=f.oxw();f.Q6J("selectedProduct",S.selectedProduct)}}let st=(()=>{class Y{constructor(){this.selectedProduct={category:"",subCategory:"",type:""},this.ValueChange=new f.vpe}ngAfterViewInit(){this.close.nativeElement.click()}products(S){this.selectedProduct=S}prodDtls(S){this.selectedProduct=S}ValueChange1(S){S.completed&&this.close.nativeElement.click(),this.ValueChange.emit(S)}}return Y.\u0275fac=function(S){return new(S||Y)},Y.\u0275cmp=f.Xpm({type:Y,selectors:[["app-signmaker-nav-bar"]],viewQuery:function(S,I){if(1&S&&(f.Gf(U,5),f.Gf($,5)),2&S){let j;f.iGM(j=f.CRH())&&(I.prdDtls=j.first),f.iGM(j=f.CRH())&&(I.close=j.first)}},outputs:{ValueChange:"ValueChange"},decls:14,vars:2,consts:[[1,"navbar","bg-body-tertiary"],[1,"container-fluid"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasNavbar","aria-controls","offcanvasNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasNavbar","aria-labelledby","offcanvasNavbarLabel","data-bs-backdrop","false","data-bs-keyboard","false",1,"offcanvas","offcanvas-bottom","visible"],[1,"offcanvas-header"],["id","offcanvasNavbarLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close"],["close",""],[1,"offcanvas-body"],[3,"clickEvent",4,"ngIf","ngIfElse"],["prd",""],[3,"clickEvent"],[3,"selectedProduct","bckEvt","ValueChange"]],template:function(S,I){if(1&S&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"button",2),f._UZ(3,"div",3),f.qZA(),f.TgZ(4,"div",4)(5,"div",5)(6,"h5",6),f._uU(7,"Products"),f.qZA(),f._UZ(8,"button",7,8),f.qZA(),f.TgZ(10,"div",9),f.YNc(11,it,1,0,"app-products",10),f.YNc(12,q,1,1,"ng-template",null,11,f.W1O),f.qZA()()()()),2&S){const j=f.MAs(13);f.xp6(11),f.Q6J("ngIf",""==I.selectedProduct.category)("ngIfElse",j)}},dependencies:[_.O5,b,K],styles:[".visible[_ngcontent-%COMP%]{visibility:visible}"]}),Y})();var et=se(8621),Pt=se(7489),yt=se(1135);let Q=(()=>{class Y{constructor(){this.status=new yt.X(!1),this.count=new yt.X(0)}display(S){this.count.next(S?this.count.getValue()+1:this.count.getValue()-1),(this.count.getValue()<1||S)&&this.status.next(S)}}return Y.\u0275fac=function(S){return new(S||Y)},Y.\u0275prov=f.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();const St=["workArea"];let Ft=(()=>{class Y{constructor(S,I,j,xt){this.renderer=S,this.host=I,this.dialog=j,this.loadService=xt,this.mouse={x:0,y:0},this.data=[],this.click=!1,this.width=0,this.height=0}ngOnInit(){this.width=window.innerWidth,this.height=window.innerHeight,this.canvas=new et.fabric.Canvas("exampleCanvas",{width:window.innerWidth,height:window.innerHeight}),this.upperCanvas=new et.fabric.Canvas("upperCanvas",{width:this.width,height:this.height,preserveObjectStacking:!0,imageSmoothingEnabled:!1,enableRetinaScaling:!1}),this.setBackgroundImage(this.canvas)}inputChange(S){let I=window.innerWidth/2;S.x=I,S.y=75,S.completed?(this.upperCanvas.setDimensions({width:0,height:0}),this.upperCanvas.requestRenderAll(),this.currentObjects&&this.data.push(this.currentObjects),this.canvasDraw()):S?.shapes?(this.upperCanvas.setDimensions({width:this.width,height:this.height}),S.opacity=.1,this.setBackgroundImage(this.canvas,S.opacity),this.setObjectsOpacity(this.canvas,S.opacity),this.drawShapes(this.upperCanvas,S)):(this.upperCanvas.setDimensions({width:this.width,height:this.height}),S.opacity=1,S.x=0,S.y=0,this.setObjectsOpacity(this.canvas,S.opacity),this.draw(this.upperCanvas,S))}setObjectsOpacity(S,I){S.getObjects().forEach(j=>{j.opacity=I})}canvasDraw(){this.clearCanvas(this.canvas);let S=[];Pt.cloneDeep(this.data).forEach(j=>{"Shape"==j.type?(S.push(j.obj),this.drawShapes1(this.canvas,j.obj)):this.draw(this.canvas,j.obj)}),this.setBackgroundImage(this.canvas)}setBackgroundImage(S,I=1){S.setBackgroundImage("../assets/images/banner.png",this.canvas.renderAll.bind(this.canvas),{originX:"left",originY:"top",scaleX:.3,scaleY:.3,opacity:I})}clearCanvas(S){S.getObjects().forEach(I=>{I!==this.canvas.backgroundImage&&S.remove(I)}),S.off("mouse:down")}setOpacity(S,I=1){S.getObjects().forEach(j=>j.opacity=I)}setSelectable(S,I){S.getObjects().forEach(j=>j.selectable=I)}draw(S,I){if(I?.completed||this.clearCanvas(S),null!=I&&""!=I.value){let Ot,j=null!=I.x&&null!=I.x?I.x:window.innerWidth/2,xt=null!=I.y&&null!=I.y?I.y:75,Gt=[];for(let Mt=0;Mt<7;Mt++)Ot=new et.fabric.Text(I.value,{fill:I.sideColor??"Black",fontSize:Number(I.size)??100,left:j+Mt,top:xt+Mt,fontFamily:I.font,fontWeight:"bold"}),Gt.push(Ot);for(let Mt=0;Mt<3;Mt++)Ot=new et.fabric.Text(I.value,{fill:I.boarderColor??"Black",fontSize:Number(I.size)??100,left:j+Mt,top:xt+Mt,fontFamily:I.font,fontWeight:"bold"}),Gt.push(Ot);Ot=new et.fabric.Text(I.value,{fill:I.color??"green",fontSize:Number(I.size)??100,left:j,top:xt,fontFamily:I.font,fontWeight:"bold",shadow:I.product.title.toLowerCase().includes("halo")?new et.fabric.Shadow({color:I.shadowColor??"orange",blur:25}):void 0}),null!=I.faceImage&&""!=I.faceImage&&et.fabric.util.loadImage(I.faceImage,function(Mt){Ot.set("fill",new et.fabric.Pattern({source:Mt,repeat:"repeat"}))}),Gt.push(Ot),this.txtWidth=Ot.getScaledWidth();let ne=j-10,oe=xt,ye=[];if(I.product.title.toLowerCase().includes("raceway")){for(let kt=1;kt<=3;kt++){let Xt=new et.fabric.Rect({width:this.txtWidth+32,height:20,fill:"black",left:ne+kt,top:(Number(I.size)-20)/2+oe+kt});ye.push(Xt)}let Mt=new et.fabric.Rect({width:this.txtWidth+32,height:20,fill:I.raceColor??"pink",left:ne,top:(Number(I.size)-20)/2+oe});ye.push(Mt)}let Re=new et.fabric.Group([...ye,...Gt],{useSetOnGroup:!1,borderDashArray:[7,7],borderColor:"black"});et.fabric.Object.prototype.controls.deleteControl=new et.fabric.Control({x:.5,y:-.5,offsetY:0,cursorStyle:"pointer",mouseUpHandler:this.deleteObject(this),render:this.renderIcon(G.deleteIcon)}),et.fabric.Object.prototype.setControlsVisibility({ml:!1,tl:!1,tr:!1,mr:!1,mtr:!1,mb:!1,bl:!1,mt:!1}),S.add(Re),I.completed?this.setBackgroundImage(S):this.setOpacity(S,I.opacity),this.setSelectable(S,I?.completed??!1),this.currentObjects={type:"Text",obj:I}}}deleteObject(S){return function(I,j,xt,Ot){var Gt=j.target,ne=Gt.canvas;return ne?.remove(Gt),ne?.requestRenderAll(),S.progressBar(Gt),!0}}cloneObject(S,I){var j=I.target,xt=j.canvas;j.clone(function(Ot){Ot.left=Ot.left??10,Ot.top=Ot.top??10,xt?.add(Ot)})}progressBar(S){let I=0,j=setInterval(()=>{I-2<=0?(I=0,clearInterval(j)):I-=2,this.workArea.nativeElement.insertAdjacentHTML("beforeend",'<mat-progress-bar mode="determinate" [value]="timerLeft"></mat-progress-bar>')},2e3)}renderIcon(S){return function(I,j,xt,Ot,Gt){var ne=document.createElement("img");ne.src=S,I.save(),I.translate(j,xt),I.rotate(et.fabric.util.degreesToRadians(Gt.angle)),I.drawImage(ne,-12,-12,24,24),I.restore()}}listObject(S){return function(I,j,xt,Ot){return S.workArea.nativeElement.insertAdjacentHTML("beforeend",`<ul class="sc-bdVaJa jgLspe" style="visibility: visible; position:absolute;left: \n        ${I.clientX}px; top: ${I.clientY}px;"><li class="sc-bwzfXH haAKrB"><a (click)="stretchObject()">\n        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrows-alt" \n        class="svg-inline--fa fa-arrows-alt fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" \n        viewBox="0 0 512 512"><path fill="currentColor" \n        d="${F.Stretch.backgroundPath}"></path></svg>Stretch</a></li>\n        <li class="sc-bwzfXH haAKrB" (click)="stretchObject()"><a>\n        <svg aria-hidden="true"  data-prefix="fas" data-icon="clone" class="svg-inline--fa fa-clone fa-w-16 " \n        role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" \n        d="${F.Copy.backgroundPath}"></path></svg>Duplicate</a>\n        </li>\n        </ul>`),!0}}stretchObject(){et.fabric.Object.prototype.setControlsVisibility({ml:!0,tl:!0,tr:!0,mr:!0,mtr:!0,mb:!0,bl:!0,mt:!0})}drawShapes(S,I){if(S){I.selectable||(this.clearCanvas(S),this.currentObjects=void 0);let xt=I.shapes?.path.split(" ")??[],Ot=xt[1].split(","),[Gt,ne]=Ot.map(kt=>Number(kt));Gt=(S.width??0)/2-600,ne=(S.height??0)/2-80;let oe=xt.join(" "),ye=[];for(let kt=5;kt<12;kt++){let Xt=new et.fabric.Path(oe,{name:"shadow",stroke:I.sideColor,left:Gt+kt,top:ne+kt,selectable:I.selectable,evented:!1,scaleX:4,scaleY:4,absolutePositioned:!0});S.sendBackwards(Xt,!0),ye.push(Xt)}for(let kt=0;kt<6;kt++){let Xt=new et.fabric.Path(oe,{name:"boarder",stroke:I.boarderColor??"black",left:Gt+kt,top:ne+kt,selectable:I.selectable,evented:!1,scaleX:4,scaleY:4,absolutePositioned:!0});S.sendBackwards(Xt,!0),ye.push(Xt)}let Re=new et.fabric.Path(oe,{name:"shapeFace",stroke:I.color??"green",left:Gt,top:ne,fill:I.color??"green",selectable:I.selectable,evented:!1,scaleX:4,scaleY:4,absolutePositioned:!0});S.sendBackwards(Re,!0),ye.push(Re);let Mt=new et.fabric.Path(oe,{name:"ShapeToClip",stroke:I.boarderColor??I.color,left:Gt,top:ne,fill:"rgba(0,0,0,0)",selectable:I.selectable,evented:!1,scaleX:4,scaleY:4,absolutePositioned:!0});ye.push(Mt),S.add(...ye);var j=[];if(I.graphics?.forEach(kt=>{if(this.loadService.status.next(!0),kt.faceart_url){var Ke,Xt=new Image;Xt.onload=()=>{Ke=new et.fabric.Image(Xt,{name:"clipped",strokeDashArray:[7,7],cornerStyle:"circle",left:(S.width??0)/2-600-(kt.position_x??0),top:(S.height??0)/2-80-(kt.position_y??0),absolutePositioned:!0,scaleX:kt.scale_x??4,scaleY:kt.scale_y??4,clipPath:Re,opacity:kt.opacity}),S.add(Ke),j.push({stackOrder:kt.stack_order,obj:Ke}),this.loadService.status.next(!1),this.currentObjects={type:"Shape",obj:I}},Xt.src="https://storage.googleapis.com/signmonkey-148101.appspot.com/"+kt.faceart_url}else{let bi=new et.fabric.Text(kt.text??"",{fill:kt.color_hex??"white",stroke:kt.stroke_color_hex??"black",fontSize:kt.font_size??100,left:(S.width??0)/2-600-(kt.position_x??0),top:(S.height??0)/2-80-(kt.position_y??0),fontFamily:kt.font_name,fontWeight:kt.font_style,clipPath:Re,name:"clipped",borderDashArray:[7,7]});S.add(bi),j.push({stackOrder:kt.stack_order,obj:bi}),this.loadService.status.next(!1),this.currentObjects={type:"Shape",obj:I}}}),this.loadService.status.subscribe(kt=>{0==kt&&j.length==I.graphics?.length&&(j.sort((Xt,Ke)=>(Xt.stackOrder??0)-(Ke.stackOrder??0)),j.forEach(Xt=>{S.sendBackwards(Xt.obj,!0)}),j=[])}),et.fabric.Object.prototype.setControlsVisibility({ml:!1,tl:!1,tr:!1,mr:!1,mb:!1,bl:!1,mt:!1}),!I.selectable){let kt;S.on("mouse:down",Xt=>{"clipped"==Xt.target?.name&&Xt.target?(Xt.target.set("clipPath",void 0),Xt.target.set("name","Object"),kt&&(kt?.set("clipPath",Re),kt?.set("name","clipped"),kt=void 0),kt=Xt.target):null==Xt.target||null==Xt.target||Xt.target!=kt?(kt?.set("clipPath",Re),kt?.set("name","clipped"),kt=void 0):Xt.target&&(kt=Xt.target);let bi=[];S.getObjects().filter(Se=>"path"!=Se.type).forEach(Se=>{bi.push({faceart_url:"image"==Se.get("type")?Se.getSrc():"",scale_x:Se.scaleX,scale_y:Se.scaleY,position_y:Se.top,position_x:Se.left,width:Se.width,height:Se.height})}),I.graphics=bi,this.currentObjects={type:"Shape",obj:I}})}et.fabric.Object.prototype.controls.deleteControl=new et.fabric.Control({x:.5,y:-.5,offsetY:0,cursorStyle:"pointer",mouseUpHandler:this.deleteObject(this),render:this.renderIcon(G.deleteIcon)}),et.fabric.Object.prototype.controls.listControl=new et.fabric.Control({x:-.5,y:-.5,offsetY:0,cursorStyle:"pointer",mouseUpHandler:this.listObject(this),render:this.renderIcon(G.ListIcon)})}}drawShapes1(S,I){if(S){let xt=I.shapes?.path.split(" ")??[],Ot=(S.width??0)/2-600,Gt=(S.height??0)/2-80,ne=xt.join(" "),oe=[];for(let Mt=5;Mt<12;Mt++){let kt=new et.fabric.Path(ne,{name:"shadow",stroke:I.sideColor,left:Ot+Mt,top:Gt+Mt,scaleX:4,scaleY:4,absolutePositioned:!0});oe.push(kt)}for(let Mt=0;Mt<6;Mt++){let kt=new et.fabric.Path(ne,{name:"boarder",stroke:I.boarderColor??"black",left:Ot+Mt,top:Gt+Mt,scaleX:4,scaleY:4,absolutePositioned:!0});oe.push(kt)}let ye=new et.fabric.Path(ne,{name:"shapeFace",stroke:I.color??"green",left:Ot,top:Gt,fill:I.color??"green",scaleX:4,scaleY:4,absolutePositioned:!0});oe.push(ye);let Re=new et.fabric.Path(ne,{name:"ShapeToClip",stroke:I.boarderColor??I.color,left:Ot,top:Gt,fill:"rgba(0,0,0,0)",scaleX:4,scaleY:4,absolutePositioned:!0});oe.push(Re);var j=new et.fabric.Group(oe);S.add(j),I.graphics?.forEach(Mt=>{if(Mt.faceart_url){var Xt,kt=new Image;kt.onload=()=>{Xt=new et.fabric.Image(kt,{name:"clipped",left:Mt.position_x??(S.width??0)/2-600,top:Mt.position_y??(S.height??0)/2-80,absolutePositioned:!0,scaleX:Mt.scale_x,scaleY:Mt.scale_y,selectable:!1,evented:!1,clipPath:ye,width:Mt.width,height:Mt.height}),S.add(Xt),j.addWithUpdate(Xt)},kt.src=(Mt.faceart_url.includes("https://storage.googleapis.com/")?Mt.faceart_url:"https://storage.googleapis.com/signmonkey-148101.appspot.com/"+Mt.faceart_url)??""}else{let Ke=new et.fabric.Text(Mt.text??"",{fill:Mt.color_hex??"white",stroke:Mt.stroke_color_hex??"black",fontSize:Mt.font_size??100,left:Mt.position_x??(S.width??0)/2-600,top:Mt.position_y??(S.height??0)/2-80,fontFamily:Mt.font_name,fontWeight:Mt.font_style,clipPath:ye,name:"clipped",strokeDashArray:[7,7],cornerStyle:"circle"});S.add(Ke)}}),et.fabric.Object.prototype.setControlsVisibility({ml:!1,tl:!1,tr:!1,mr:!1,mb:!1,bl:!1,mt:!1}),et.fabric.Object.prototype.controls.deleteControl=new et.fabric.Control({x:.5,y:-.5,offsetY:0,cursorStyle:"pointer",mouseUpHandler:this.deleteObject(this),render:this.renderIcon(G.deleteIcon)}),et.fabric.Object.prototype.controls.listControl=new et.fabric.Control({x:-.5,y:-.5,offsetY:0,cursorStyle:"pointer",mouseUpHandler:this.listObject(this),render:this.renderIcon(G.ListIcon)})}}updateMeasures(S){var I=S.target;I?.getScaledWidth(),I?.getScaledHeight()}clippingImage(S,I,j,xt){let Ot;return S&&(I&&(Ot=I,I.cloneAsImage(function(Gt){Gt.set({clipPath:j,name:"clipped",left:I.left,top:I.top,strokeDashArray:I.strokeDashArray}),S.add(Gt),S.requestRenderAll()}),I.cloneAsImage(function(Gt){Gt.set({clipPath:xt,name:"clippedImage",left:I.left,top:I.top,selectable:!1}),Ot=Gt})),j.set("selectable",!1),S.requestRenderAll()),Ot}}return Y.\u0275fac=function(S){return new(S||Y)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(_t.uw),f.Y36(Q))},Y.\u0275cmp=f.Xpm({type:Y,selectors:[["app-design"]],viewQuery:function(S,I){if(1&S&&f.Gf(St,5),2&S){let j;f.iGM(j=f.CRH())&&(I.workArea=j.first)}},decls:6,vars:0,consts:[[1,"banner"],[1,"work-area"],["workArea",""],["id","exampleCanvas",1,"lower-canvas"],["id","upperCanvas"]],template:function(S,I){1&S&&(f.TgZ(0,"div",0)(1,"div",1,2)(3,"canvas",3),f._uU(4," Your browser doesn\u2019t currently support HTML5 Canvas. Please check caniuse.com/#feat=canvas for information on browser support for canvas. "),f.qZA(),f._UZ(5,"canvas",4),f.qZA()())}}),Y})();const Bt=["design"],Ut=[{path:"",component:(()=>{class Y{valueChange(S){this.design.inputChange(S)}}return Y.\u0275fac=function(S){return new(S||Y)},Y.\u0275cmp=f.Xpm({type:Y,selectors:[["app-signmaker"]],viewQuery:function(S,I){if(1&S&&f.Gf(Bt,5),2&S){let j;f.iGM(j=f.CRH())&&(I.design=j.first)}},decls:4,vars:0,consts:[[1,"banner","position-relative"],[3,"ValueChange"],["design",""]],template:function(S,I){1&S&&(f.TgZ(0,"div",0)(1,"app-signmaker-nav-bar",1),f.NdJ("ValueChange",function(xt){return I.valueChange(xt)}),f.qZA(),f._UZ(2,"app-design",null,2),f.qZA())},dependencies:[st,Ft]}),Y})()}];let ee=(()=>{class Y{}return Y.\u0275fac=function(S){return new(S||Y)},Y.\u0275mod=f.oAB({type:Y}),Y.\u0275inj=f.cJS({imports:[_.ez,E.Bz.forChild(Ut),E.Bz]}),Y})();var Jt=se(5042),xe=se(9270);let Ne=(()=>{class Y{}return Y.\u0275fac=function(S){return new(S||Y)},Y.\u0275mod=f.oAB({type:Y}),Y.\u0275inj=f.cJS({imports:[_.ez,Jt.x,xe.I]}),Y})(),_e=(()=>{class Y{}return Y.\u0275fac=function(S){return new(S||Y)},Y.\u0275mod=f.oAB({type:Y}),Y.\u0275inj=f.cJS({imports:[_.ez,ee,E.Bz,xe.I,Jt.x,Ne]}),Y})()},8621:(ti,At,se)=>{var p,o,u,c,n,s,_=_||{version:"5.3.0"};if(At.fabric=_,typeof document<"u"&&typeof window<"u")_.document=document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?document:document.implementation.createHTMLDocument(""),_.window=window;else{var f=new(se(4960).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;_.document=f.document,_.jsdomImplForWrapper=se(6759).implForWrapper,_.nodeCanvas=se(6272).Canvas,_.window=f,DOMParser=_.window.DOMParser}function yi(p,o){var u=p.canvas,c=o.targetCanvas,n=c.getContext("2d");n.translate(0,c.height),n.scale(1,-1),n.drawImage(u,0,u.height-c.height,c.width,c.height,0,0,c.width,c.height)}function de(p,o){var c=o.targetCanvas.getContext("2d"),n=o.destinationWidth,s=o.destinationHeight,e=n*s*4,a=new Uint8Array(this.imageBuffer,0,e),l=new Uint8ClampedArray(this.imageBuffer,0,e);p.readPixels(0,0,n,s,p.RGBA,p.UNSIGNED_BYTE,a);var r=new ImageData(l,n,s);c.putImageData(r,0,0)}_.isTouchSupported="ontouchstart"in _.window||"ontouchstart"in _.document||_.window&&_.window.navigator&&_.window.navigator.maxTouchPoints>0,_.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",_.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],_.DPI=96,_.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",_.commaWsp="(?:\\s+,?\\s*|,\\s*)",_.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,_.reNonWord=/[ \n\.,;!\?\-]/,_.fontPaths={},_.iMatrix=[1,0,0,1,0,0],_.svgNS="http://www.w3.org/2000/svg",_.perfLimitSizeTotal=2097152,_.maxCacheSideLimit=4096,_.minCacheSideLimit=256,_.charWidthsCache={},_.textureSize=2048,_.disableStyleCopyPaste=!1,_.enableGLFiltering=!0,_.devicePixelRatio=_.window.devicePixelRatio||_.window.webkitDevicePixelRatio||_.window.mozDevicePixelRatio||1,_.browserShadowBlurConstant=1,_.arcToSegmentsCache={},_.boundsOfCurveCache={},_.cachesBoundsOfCurve=!0,_.forceGLPutImageData=!1,_.initFilterBackend=function(){return _.enableGLFiltering&&_.isWebglSupported&&_.isWebglSupported(_.textureSize)?(console.log("max texture size: "+_.maxTextureSize),new _.WebglFilterBackend({tileSize:_.textureSize})):_.Canvas2dFilterBackend?new _.Canvas2dFilterBackend:void 0},typeof document<"u"&&typeof window<"u"&&(window.fabric=_),function(){function p(e,a){if(this.__eventListeners[e]){var l=this.__eventListeners[e];a?l[l.indexOf(a)]=!1:_.util.array.fill(l,!1)}}function u(e,a){var l=function(){a.apply(this,arguments),this.off(e,l)}.bind(this);this.on(e,l)}_.Observable={fire:function s(e,a){if(!this.__eventListeners)return this;var l=this.__eventListeners[e];if(!l)return this;for(var r=0,h=l.length;r<h;r++)l[r]&&l[r].call(this,a||{});return this.__eventListeners[e]=l.filter(function(g){return!1!==g}),this},on:function o(e,a){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var l in e)this.on(l,e[l]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(a);return this},once:function c(e,a){if(1===arguments.length)for(var l in e)u.call(this,l,e[l]);else u.call(this,e,a);return this},off:function n(e,a){if(!this.__eventListeners)return this;if(0===arguments.length)for(e in this.__eventListeners)p.call(this,e);else if(1===arguments.length&&"object"==typeof arguments[0])for(var l in e)p.call(this,l,e[l]);else p.call(this,e,a);return this}}}(),_.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var p=0,o=arguments.length;p<o;p++)this._onObjectAdded(arguments[p]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(p,o,u){var c=this._objects;return u?c[o]=p:c.splice(o,0,p),this._onObjectAdded&&this._onObjectAdded(p),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var o,p=this._objects,u=!1,c=0,n=arguments.length;c<n;c++)-1!==(o=p.indexOf(arguments[c]))&&(u=!0,p.splice(o,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[c]));return this.renderOnAddRemove&&u&&this.requestRenderAll(),this},forEachObject:function(p,o){for(var u=this.getObjects(),c=0,n=u.length;c<n;c++)p.call(o,u[c],c,u);return this},getObjects:function(p){return typeof p>"u"?this._objects.concat():this._objects.filter(function(o){return o.type===p})},item:function(p){return this._objects[p]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(p,o){return this._objects.indexOf(p)>-1||!!o&&this._objects.some(function(u){return"function"==typeof u.contains&&u.contains(p,!0)})},complexity:function(){return this._objects.reduce(function(p,o){return p+(o.complexity?o.complexity():0)},0)}},_.CommonMethods={_setOptions:function(p){for(var o in p)this.set(o,p[o])},_initGradient:function(p,o){p&&p.colorStops&&!(p instanceof _.Gradient)&&this.set(o,new _.Gradient(p))},_initPattern:function(p,o,u){!p||!p.source||p instanceof _.Pattern?u&&u():this.set(o,new _.Pattern(p,u))},_setObject:function(p){for(var o in p)this._set(o,p[o])},set:function(p,o){return"object"==typeof p?this._setObject(p):this._set(p,o),this},_set:function(p,o){this[p]=o},toggle:function(p){var o=this.get(p);return"boolean"==typeof o&&this.set(p,!o),this},get:function(p){return this[p]}},p=At,o=Math.sqrt,u=Math.atan2,c=Math.pow,n=Math.PI/180,s=Math.PI/2,_.util={cos:function(e){if(0===e)return 1;switch(e<0&&(e=-e),e/s){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},sin:function(e){if(0===e)return 0;var l=1;switch(e<0&&(l=-1),e/s){case 1:return l;case 2:return 0;case 3:return-l}return Math.sin(e)},removeFromArray:function(e,a){var l=e.indexOf(a);return-1!==l&&e.splice(l,1),e},getRandomInt:function(e,a){return Math.floor(Math.random()*(a-e+1))+e},degreesToRadians:function(e){return e*n},radiansToDegrees:function(e){return e/n},rotatePoint:function(e,a,l){var r=new _.Point(e.x-a.x,e.y-a.y),h=_.util.rotateVector(r,l);return new _.Point(h.x,h.y).addEquals(a)},rotateVector:function(e,a){var l=_.util.sin(a),r=_.util.cos(a);return{x:e.x*r-e.y*l,y:e.x*l+e.y*r}},createVector:function(e,a){return new _.Point(a.x-e.x,a.y-e.y)},calcAngleBetweenVectors:function(e,a){return Math.acos((e.x*a.x+e.y*a.y)/(Math.hypot(e.x,e.y)*Math.hypot(a.x,a.y)))},getHatVector:function(e){return new _.Point(e.x,e.y).multiply(1/Math.hypot(e.x,e.y))},getBisector:function(e,a,l){var r=_.util.createVector(e,a),h=_.util.createVector(e,l),g=_.util.calcAngleBetweenVectors(r,h),m=_.util.calcAngleBetweenVectors(_.util.rotateVector(r,g),h);return{vector:_.util.getHatVector(_.util.rotateVector(r,g*(0===m?1:-1)/2)),angle:g}},projectStrokeOnPoints:function(e,a,l){var r=[],h=a.strokeWidth/2,g=a.strokeUniform?new _.Point(1/a.scaleX,1/a.scaleY):new _.Point(1,1),m=function(v){var b=h/Math.hypot(v.x,v.y);return new _.Point(v.x*b*g.x,v.y*b*g.y)};return e.length<=1||e.forEach(function(v,b){var A,F,C=new _.Point(v.x,v.y);0===b?(F=e[b+1],A=l?m(_.util.createVector(F,C)).addEquals(C):e[e.length-1]):b===e.length-1?(A=e[b-1],F=l?m(_.util.createVector(A,C)).addEquals(C):e[0]):(A=e[b-1],F=e[b+1]);var gt,_t,G=_.util.getBisector(C,A,F),ot=G.vector;if("miter"===a.strokeLineJoin&&(gt=-h/Math.sin(G.angle/2),_t=new _.Point(ot.x*gt*g.x,ot.y*gt*g.y),Math.hypot(_t.x,_t.y)/h<=a.strokeMiterLimit))return r.push(C.add(_t)),void r.push(C.subtract(_t));gt=-h*Math.SQRT2,_t=new _.Point(ot.x*gt*g.x,ot.y*gt*g.y),r.push(C.add(_t)),r.push(C.subtract(_t))}),r},transformPoint:function(e,a,l){return l?new _.Point(a[0]*e.x+a[2]*e.y,a[1]*e.x+a[3]*e.y):new _.Point(a[0]*e.x+a[2]*e.y+a[4],a[1]*e.x+a[3]*e.y+a[5])},makeBoundingBoxFromPoints:function(e,a){if(a)for(var l=0;l<e.length;l++)e[l]=_.util.transformPoint(e[l],a);var r=[e[0].x,e[1].x,e[2].x,e[3].x],h=_.util.array.min(r),m=_.util.array.max(r)-h,v=[e[0].y,e[1].y,e[2].y,e[3].y],b=_.util.array.min(v);return{left:h,top:b,width:m,height:_.util.array.max(v)-b}},invertTransform:function(e){var a=1/(e[0]*e[3]-e[1]*e[2]),l=[a*e[3],-a*e[1],-a*e[2],a*e[0]],r=_.util.transformPoint({x:e[4],y:e[5]},l,!0);return l[4]=-r.x,l[5]=-r.y,l},toFixed:function(e,a){return parseFloat(Number(e).toFixed(a))},parseUnit:function(e,a){var l=/\D{0,2}$/.exec(e),r=parseFloat(e);switch(a||(a=_.Text.DEFAULT_SVG_FONT_SIZE),l[0]){case"mm":return r*_.DPI/25.4;case"cm":return r*_.DPI/2.54;case"in":return r*_.DPI;case"pt":return r*_.DPI/72;case"pc":return r*_.DPI/72*12;case"em":return r*a;default:return r}},falseFunction:function(){return!1},getKlass:function(e,a){return e=_.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1)),_.util.resolveNamespace(a)[e]},getSvgAttributes:function(e){var a=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":a=a.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":a=a.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":a=a.concat(["offset","stop-color","stop-opacity"])}return a},resolveNamespace:function(e){if(!e)return _;var r,a=e.split("."),l=a.length,h=p||_.window;for(r=0;r<l;++r)h=h[a[r]];return h},loadImage:function(e,a,l,r){if(e){var h=_.util.createImage(),g=function(){a&&a.call(l,h,!1),h=h.onload=h.onerror=null};h.onload=g,h.onerror=function(){_.log("Error loading "+h.src),a&&a.call(l,null,!0),h=h.onload=h.onerror=null},0!==e.indexOf("data")&&null!=r&&(h.crossOrigin=r),"data:image/svg"===e.substring(0,14)&&(h.onload=null,_.util.loadImageInDom(h,g)),h.src=e}else a&&a.call(l,e)},loadImageInDom:function(e,a){var l=_.document.createElement("div");l.style.width=l.style.height="1px",l.style.left=l.style.top="-100%",l.style.position="absolute",l.appendChild(e),_.document.querySelector("body").appendChild(l),e.onload=function(){a(),l.parentNode.removeChild(l),l=null}},enlivenObjects:function(e,a,l,r){var h=[],g=0,m=(e=e||[]).length;function v(){++g===m&&a&&a(h.filter(function(b){return b}))}m?e.forEach(function(b,C){b&&b.type?_.util.getKlass(b.type,l).fromObject(b,function(F,G){G||(h[C]=F),r&&r(b,F,G),v()}):v()}):a&&a(h)},enlivenObjectEnlivables:function(e,a,l){var r=_.Object.ENLIVEN_PROPS.filter(function(h){return!!e[h]});_.util.enlivenObjects(r.map(function(h){return e[h]}),function(h){var g={};r.forEach(function(m,v){g[m]=h[v],a&&(a[m]=h[v])}),l&&l(g)})},enlivenPatterns:function(e,a){function l(){++h===g&&a&&a(r)}var r=[],h=0,g=(e=e||[]).length;g?e.forEach(function(m,v){m&&m.source?new _.Pattern(m,function(b){r[v]=b,l()}):(r[v]=m,l())}):a&&a(r)},groupSVGElements:function(e,a,l){var r;return e&&1===e.length?(typeof l<"u"&&(e[0].sourcePath=l),e[0]):(a&&(a.width&&a.height?a.centerPoint={x:a.width/2,y:a.height/2}:(delete a.width,delete a.height)),r=new _.Group(e,a),typeof l<"u"&&(r.sourcePath=l),r)},populateWithProperties:function(e,a,l){if(l&&Array.isArray(l))for(var r=0,h=l.length;r<h;r++)l[r]in e&&(a[l[r]]=e[l[r]])},createCanvasElement:function(){return _.document.createElement("canvas")},copyCanvasElement:function(e){var a=_.util.createCanvasElement();return a.width=e.width,a.height=e.height,a.getContext("2d").drawImage(e,0,0),a},toDataURL:function(e,a,l){return e.toDataURL("image/"+a,l)},createImage:function(){return _.document.createElement("img")},multiplyTransformMatrices:function(e,a,l){return[e[0]*a[0]+e[2]*a[1],e[1]*a[0]+e[3]*a[1],e[0]*a[2]+e[2]*a[3],e[1]*a[2]+e[3]*a[3],l?0:e[0]*a[4]+e[2]*a[5]+e[4],l?0:e[1]*a[4]+e[3]*a[5]+e[5]]},qrDecompose:function(e){var a=u(e[1],e[0]),l=c(e[0],2)+c(e[1],2),r=o(l),h=(e[0]*e[3]-e[2]*e[1])/r,g=u(e[0]*e[2]+e[1]*e[3],l);return{angle:a/n,scaleX:r,scaleY:h,skewX:g/n,skewY:0,translateX:e[4],translateY:e[5]}},calcRotateMatrix:function(e){if(!e.angle)return _.iMatrix.concat();var a=_.util.degreesToRadians(e.angle),l=_.util.cos(a),r=_.util.sin(a);return[l,r,-r,l,0,0]},calcDimensionsMatrix:function(e){var a=typeof e.scaleX>"u"?1:e.scaleX,l=typeof e.scaleY>"u"?1:e.scaleY,r=[e.flipX?-a:a,0,0,e.flipY?-l:l,0,0],h=_.util.multiplyTransformMatrices,g=_.util.degreesToRadians;return e.skewX&&(r=h(r,[1,0,Math.tan(g(e.skewX)),1],!0)),e.skewY&&(r=h(r,[1,Math.tan(g(e.skewY)),0,1],!0)),r},composeMatrix:function(e){var a=[1,0,0,1,e.translateX||0,e.translateY||0],l=_.util.multiplyTransformMatrices;return e.angle&&(a=l(a,_.util.calcRotateMatrix(e))),(1!==e.scaleX||1!==e.scaleY||e.skewX||e.skewY||e.flipX||e.flipY)&&(a=l(a,_.util.calcDimensionsMatrix(e))),a},resetObjectTransform:function(e){e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},saveObjectTransform:function(e){return{scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}},isTransparent:function(e,a,l,r){r>0&&(a>r?a-=r:a=0,l>r?l-=r:l=0);var g,h=!0,v=e.getImageData(a,l,2*r||1,2*r||1),b=v.data.length;for(g=3;g<b&&0!=(h=v.data[g]<=0);g+=4);return v=null,h},parsePreserveAspectRatioAttribute:function(e){var g,a="meet",h=e.split(" ");return h&&h.length&&("meet"!==(a=h.pop())&&"slice"!==a?(g=a,a="meet"):h.length&&(g=h.pop())),{meetOrSlice:a,alignX:"none"!==g?g.slice(1,4):"none",alignY:"none"!==g?g.slice(5,8):"none"}},clearFabricFontCache:function(e){(e=(e||"").toLowerCase())?_.charWidthsCache[e]&&delete _.charWidthsCache[e]:_.charWidthsCache={}},limitDimsByArea:function(e,a){var l=Math.sqrt(a*e),r=Math.floor(a/l);return{x:Math.floor(l),y:r}},capValue:function(e,a,l){return Math.max(e,Math.min(a,l))},findScaleToFit:function(e,a){return Math.min(a.width/e.width,a.height/e.height)},findScaleToCover:function(e,a){return Math.max(a.width/e.width,a.height/e.height)},matrixToSVG:function(e){return"matrix("+e.map(function(a){return _.util.toFixed(a,_.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(e,a){var l=_.util.invertTransform(a),r=_.util.multiplyTransformMatrices(l,e.calcOwnMatrix());_.util.applyTransformToObject(e,r)},addTransformToObject:function(e,a){_.util.applyTransformToObject(e,_.util.multiplyTransformMatrices(a,e.calcOwnMatrix()))},applyTransformToObject:function(e,a){var l=_.util.qrDecompose(a),r=new _.Point(l.translateX,l.translateY);e.flipX=!1,e.flipY=!1,e.set("scaleX",l.scaleX),e.set("scaleY",l.scaleY),e.skewX=l.skewX,e.skewY=l.skewY,e.angle=l.angle,e.setPositionByOrigin(r,"center","center")},sizeAfterTransform:function(e,a,l){var r=e/2,h=a/2,g=[{x:-r,y:-h},{x:r,y:-h},{x:-r,y:h},{x:r,y:h}],m=_.util.calcDimensionsMatrix(l),v=_.util.makeBoundingBoxFromPoints(g,m);return{x:v.width,y:v.height}},mergeClipPaths:function(e,a){var l=e,r=a;l.inverted&&!r.inverted&&(l=a,r=e),_.util.applyTransformToObject(r,_.util.multiplyTransformMatrices(_.util.invertTransform(l.calcTransformMatrix()),r.calcTransformMatrix()));var h=l.inverted&&r.inverted;return h&&(l.inverted=r.inverted=!1),new _.Group([l],{clipPath:r,inverted:h})},hasStyleChanged:function(e,a,l){return l=l||!1,e.fill!==a.fill||e.stroke!==a.stroke||e.strokeWidth!==a.strokeWidth||e.fontSize!==a.fontSize||e.fontFamily!==a.fontFamily||e.fontWeight!==a.fontWeight||e.fontStyle!==a.fontStyle||e.textBackgroundColor!==a.textBackgroundColor||e.deltaY!==a.deltaY||l&&(e.overline!==a.overline||e.underline!==a.underline||e.linethrough!==a.linethrough)},stylesToArray:function(l,a){l=_.util.object.clone(l,!0);for(var r=a.split("\n"),h=-1,g={},m=[],v=0;v<r.length;v++)if(l[v])for(var b=0;b<r[v].length;b++){h++;var C=l[v][b];C&&Object.keys(C).length>0&&(_.util.hasStyleChanged(g,C,!0)?m.push({start:h,end:h+1,style:C}):m[m.length-1].end++),g=C||{}}else h+=r[v].length;return m},stylesFromArray:function(e,a){if(!Array.isArray(e))return e;for(var l=a.split("\n"),r=-1,h=0,g={},m=0;m<l.length;m++)for(var v=0;v<l[m].length;v++)r++,e[h]&&e[h].start<=r&&r<e[h].end&&(g[m]=g[m]||{},g[m][v]=Object.assign({},e[h].style),r===e[h].end-1&&h++);return g}},function(){var p=Array.prototype.join,o={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},u={m:"l",M:"L"};function c(k,M,D,R,Z,P,O,z,N,J,X){var rt=_.util.cos(k),lt=_.util.sin(k),dt=_.util.cos(M),K=_.util.sin(M),U=D*Z*dt-R*P*K+O,$=R*Z*dt+D*P*K+z;return["C",J+N*(-D*Z*lt-R*P*rt),X+N*(-R*Z*lt+D*P*rt),U+N*(D*Z*K+R*P*dt),$+N*(R*Z*K-D*P*dt),U,$]}function s(k,M,D,R){var Z=Math.atan2(M,k),P=Math.atan2(R,D);return P>=Z?P-Z:2*Math.PI-(Z-P)}function a(k,M,D){for(var X=function n(k,M,D,R,Z,P,O){var z=Math.PI,N=O*z/180,J=_.util.sin(N),X=_.util.cos(N),rt=0,lt=0,dt=-X*k*.5-J*M*.5,K=-X*M*.5+J*k*.5,U=(D=Math.abs(D))*D,$=(R=Math.abs(R))*R,it=K*K,q=dt*dt,st=U*$-U*it-$*q,et=0;if(st<0){var Pt=Math.sqrt(1-st/(U*$));D*=Pt,R*=Pt}else et=(Z===P?-1:1)*Math.sqrt(st/(U*it+$*q));var yt=et*D*K/R,Q=-et*R*dt/D,St=X*yt-J*Q+.5*k,Ft=J*yt+X*Q+.5*M,Bt=s(1,0,(dt-yt)/D,(K-Q)/R),Kt=s((dt-yt)/D,(K-Q)/R,(-dt-yt)/D,(-K-Q)/R);0===P&&Kt>0?Kt-=2*z:1===P&&Kt<0&&(Kt+=2*z);for(var Ut=Math.ceil(Math.abs(Kt/z*2)),ee=[],Jt=Kt/Ut,xe=8/3*Math.sin(Jt/4)*Math.sin(Jt/4)/Math.sin(Jt/2),Ne=Bt+Jt,_e=0;_e<Ut;_e++)ee[_e]=c(Bt,Ne,X,J,D,R,St,Ft,xe,rt,lt),rt=ee[_e][5],lt=ee[_e][6],Bt=Ne,Ne+=Jt;return ee}(D[6]-k,D[7]-M,D[1],D[2],D[4],D[5],D[3]),rt=0,lt=X.length;rt<lt;rt++)X[rt][1]+=k,X[rt][2]+=M,X[rt][3]+=k,X[rt][4]+=M,X[rt][5]+=k,X[rt][6]+=M;return X}function r(k,M,D,R){return Math.sqrt((D-k)*(D-k)+(R-M)*(R-M))}function b(k,M,D,R,Z,P,O,z){return function(N){var J=function h(k){return k*k*k}(N),X=function g(k){return 3*k*k*(1-k)}(N),rt=function m(k){return 3*k*(1-k)*(1-k)}(N),lt=function v(k){return(1-k)*(1-k)*(1-k)}(N);return{x:O*J+Z*X+D*rt+k*lt,y:z*J+P*X+R*rt+M*lt}}}function C(k,M,D,R,Z,P,O,z){return function(N){var J=1-N;return Math.atan2(3*J*J*(R-M)+6*J*N*(P-R)+3*N*N*(z-P),3*J*J*(D-k)+6*J*N*(Z-D)+3*N*N*(O-Z))}}function ot(k,M,D,R,Z,P){return function(O){var z=function A(k){return k*k}(O),N=function F(k){return 2*k*(1-k)}(O),J=function G(k){return(1-k)*(1-k)}(O);return{x:Z*z+D*N+k*J,y:P*z+R*N+M*J}}}function ut(k,M,D,R,Z,P){return function(O){var z=1-O;return Math.atan2(2*z*(R-M)+2*O*(P-R),2*z*(D-k)+2*O*(Z-D))}}function gt(k,M,D){var Z,O,R={x:M,y:D},P=0;for(O=1;O<=100;O+=1)Z=k(O/100),P+=r(R.x,R.y,Z.x,Z.y),R=Z;return P}function ht(k){for(var R,J,X,rt,M=0,D=k.length,Z=0,P=0,O=0,z=0,N=[],lt=0;lt<D;lt++){switch(X={x:Z,y:P,command:(R=k[lt])[0]},R[0]){case"M":X.length=0,O=Z=R[1],z=P=R[2];break;case"L":X.length=r(Z,P,R[1],R[2]),Z=R[1],P=R[2];break;case"C":J=b(Z,P,R[1],R[2],R[3],R[4],R[5],R[6]),rt=C(Z,P,R[1],R[2],R[3],R[4],R[5],R[6]),X.iterator=J,X.angleFinder=rt,X.length=gt(J,Z,P),Z=R[5],P=R[6];break;case"Q":J=ot(Z,P,R[1],R[2],R[3],R[4]),rt=ut(Z,P,R[1],R[2],R[3],R[4]),X.iterator=J,X.angleFinder=rt,X.length=gt(J,Z,P),Z=R[3],P=R[4];break;case"Z":case"z":X.destX=O,X.destY=z,X.length=r(Z,P,O,z),Z=O,P=z}M+=X.length,N.push(X)}return N.push({length:M,x:Z,y:P}),N}_.util.joinPath=function(k){return k.map(function(M){return M.join(" ")}).join(" ")},_.util.parsePath=function bt(k){var R,Z,rt,lt,dt,M=[],D=[],P=_.rePathCommand,O="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",z="("+O+")"+_.commaWsp,N="([01])"+_.commaWsp+"?",X=new RegExp(z+"?"+z+"?"+z+N+N+z+"?("+O+")","g");if(!k||!k.match)return M;for(var U,K=0,$=(dt=k.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;K<$;K++){lt=(R=dt[K]).slice(1).trim(),D.length=0;var it=R.charAt(0);if(U=[it],"a"===it.toLowerCase())for(var q;q=X.exec(lt);)for(var st=1;st<q.length;st++)D.push(q[st]);else for(;rt=P.exec(lt);)D.push(rt[0]);st=0;for(var et=D.length;st<et;st++)Z=parseFloat(D[st]),isNaN(Z)||U.push(Z);var Pt=o[it.toLowerCase()],yt=u[it]||it;if(U.length-1>Pt)for(var Q=1,St=U.length;Q<St;Q+=Pt)M.push([it].concat(U.slice(Q,Q+Pt))),it=yt;else M.push(U)}return M},_.util.makePathSimpler=function l(k){var O,z,N,X,rt,lt,M=0,D=0,R=k.length,Z=0,P=0,J=[];for(z=0;z<R;++z){switch(N=!1,(O=k[z].slice(0))[0]){case"l":O[0]="L",O[1]+=M,O[2]+=D;case"L":M=O[1],D=O[2];break;case"h":O[1]+=M;case"H":O[0]="L",O[2]=D,M=O[1];break;case"v":O[1]+=D;case"V":O[0]="L",D=O[1],O[1]=M,O[2]=D;break;case"m":O[0]="M",O[1]+=M,O[2]+=D;case"M":M=O[1],D=O[2],Z=O[1],P=O[2];break;case"c":O[0]="C",O[1]+=M,O[2]+=D,O[3]+=M,O[4]+=D,O[5]+=M,O[6]+=D;case"C":rt=O[3],lt=O[4],M=O[5],D=O[6];break;case"s":O[0]="S",O[1]+=M,O[2]+=D,O[3]+=M,O[4]+=D;case"S":"C"===X?(rt=2*M-rt,lt=2*D-lt):(rt=M,lt=D),M=O[3],D=O[4],O[0]="C",O[5]=O[3],O[6]=O[4],O[3]=O[1],O[4]=O[2],O[1]=rt,O[2]=lt,rt=O[3],lt=O[4];break;case"q":O[0]="Q",O[1]+=M,O[2]+=D,O[3]+=M,O[4]+=D;case"Q":rt=O[1],lt=O[2],M=O[3],D=O[4];break;case"t":O[0]="T",O[1]+=M,O[2]+=D;case"T":"Q"===X?(rt=2*M-rt,lt=2*D-lt):(rt=M,lt=D),O[0]="Q",M=O[1],D=O[2],O[1]=rt,O[2]=lt,O[3]=M,O[4]=D;break;case"a":O[0]="A",O[6]+=M,O[7]+=D;case"A":N=!0,J=J.concat(a(M,D,O)),M=O[6],D=O[7];break;case"z":case"Z":M=Z,D=P}N||J.push(O),X=O[0]}return J},_.util.getSmoothPathFromPoints=function wt(k,M){var R,D=[],Z=new _.Point(k[0].x,k[0].y),P=new _.Point(k[1].x,k[1].y),O=k.length,z=1,N=0,J=O>2;for(J&&(z=k[2].x<P.x?-1:k[2].x===P.x?0:1,N=k[2].y<P.y?-1:k[2].y===P.y?0:1),D.push(["M",Z.x-z*(M=M||0),Z.y-N*M]),R=1;R<O;R++){if(!Z.eq(P)){var X=Z.midPointFrom(P);D.push(["Q",Z.x,Z.y,X.x,X.y])}Z=k[R],R+1<k.length&&(P=k[R+1])}return J&&(z=Z.x>k[R-2].x?1:Z.x===k[R-2].x?0:-1,N=Z.y>k[R-2].y?1:Z.y===k[R-2].y?0:-1),D.push(["L",Z.x+z*M,Z.y+N*M]),D},_.util.getPathSegmentsInfo=ht,_.util.getBoundsOfCurve=function e(k,M,D,R,Z,P,O,z){var N;if(_.cachesBoundsOfCurve&&(N=p.call(arguments),_.boundsOfCurveCache[N]))return _.boundsOfCurveCache[N];var U,$,it,q,st,et,Pt,yt,J=Math.sqrt,X=Math.min,rt=Math.max,lt=Math.abs,dt=[],K=[[],[]];$=6*k-12*D+6*Z,U=-3*k+9*D-9*Z+3*O,it=3*D-3*k;for(var Q=0;Q<2;++Q)if(Q>0&&($=6*M-12*R+6*P,U=-3*M+9*R-9*P+3*z,it=3*R-3*M),lt(U)<1e-12){if(lt($)<1e-12)continue;0<(q=-it/$)&&q<1&&dt.push(q)}else!((Pt=$*$-4*it*U)<0)&&(0<(st=(-$+(yt=J(Pt)))/(2*U))&&st<1&&dt.push(st),0<(et=(-$-yt)/(2*U))&&et<1&&dt.push(et));for(var Ut,Bt=dt.length,Kt=Bt;Bt--;)K[0][Bt]=(Ut=1-(q=dt[Bt]))*Ut*Ut*k+3*Ut*Ut*q*D+3*Ut*q*q*Z+q*q*q*O,K[1][Bt]=Ut*Ut*Ut*M+3*Ut*Ut*q*R+3*Ut*q*q*P+q*q*q*z;K[0][Kt]=k,K[1][Kt]=M,K[0][Kt+1]=O,K[1][Kt+1]=z;var ee=[{x:X.apply(null,K[0]),y:X.apply(null,K[1])},{x:rt.apply(null,K[0]),y:rt.apply(null,K[1])}];return _.cachesBoundsOfCurve&&(_.boundsOfCurveCache[N]=ee),ee},_.util.getPointOnPath=function ft(k,M,D){D||(D=ht(k));for(var R=0;M-D[R].length>0&&R<D.length-2;)M-=D[R].length,R++;var N,Z=D[R],P=M/Z.length,z=k[R];switch(Z.command){case"M":return{x:Z.x,y:Z.y,angle:0};case"Z":case"z":return(N=new _.Point(Z.x,Z.y).lerp(new _.Point(Z.destX,Z.destY),P)).angle=Math.atan2(Z.destY-Z.y,Z.destX-Z.x),N;case"L":return(N=new _.Point(Z.x,Z.y).lerp(new _.Point(z[1],z[2]),P)).angle=Math.atan2(z[2]-Z.y,z[1]-Z.x),N;case"C":case"Q":return function _t(k,M){for(var O,z,X,D=0,R=0,Z=k.iterator,P={x:k.x,y:k.y},N=.01,J=k.angleFinder;R<M&&N>1e-4;)O=Z(D),X=D,(z=r(P.x,P.y,O.x,O.y))+R>M?(D-=N,N/=2):(P=O,D+=N,R+=z);return O.angle=J(X),O}(Z,M)}},_.util.transformPath=function vt(k,M,D){return D&&(M=_.util.multiplyTransformMatrices(M,[1,0,0,1,-D.x,-D.y])),k.map(function(R){for(var Z=R.slice(0),P={},O=1;O<R.length-1;O+=2)P.x=R[O],P.y=R[O+1],P=_.util.transformPoint(P,M),Z[O]=P.x,Z[O+1]=P.y;return Z})}}(),function(){var p=Array.prototype.slice;function s(e,a,l){if(e&&0!==e.length){var r=e.length-1,h=a?e[r][a]:e[r];if(a)for(;r--;)l(e[r][a],h)&&(h=e[r][a]);else for(;r--;)l(e[r],h)&&(h=e[r]);return h}}_.util.array={fill:function n(e,a){for(var l=e.length;l--;)e[l]=a;return e},invoke:function o(e,a){for(var l=p.call(arguments,2),r=[],h=0,g=e.length;h<g;h++)r[h]=l.length?e[h][a].apply(e[h],l):e[h][a].call(e[h]);return r},min:function c(e,a){return s(e,a,function(l,r){return l<r})},max:function u(e,a){return s(e,a,function(l,r){return l>=r})}}}(),function(){function p(u,c,n){if(n)if(!_.isLikelyNode&&c instanceof Element)u=c;else if(c instanceof Array){u=[];for(var s=0,e=c.length;s<e;s++)u[s]=p({},c[s],n)}else if(c&&"object"==typeof c)for(var a in c)"canvas"===a||"group"===a?u[a]=null:c.hasOwnProperty(a)&&(u[a]=p({},c[a],n));else u=c;else for(var a in c)u[a]=c[a];return u}_.util.object={extend:p,clone:function o(u,c){return p({},u,c)}},_.util.object.extend(_.util,_.Observable)}(),function(){function n(s,e){var a=s.charCodeAt(e);if(isNaN(a))return"";if(a<55296||a>57343)return s.charAt(e);if(55296<=a&&a<=56319){if(s.length<=e+1)throw"High surrogate without following low surrogate";var l=s.charCodeAt(e+1);if(56320>l||l>57343)throw"High surrogate without following low surrogate";return s.charAt(e)+s.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";var r=s.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1}_.util.string={camelize:function p(s){return s.replace(/-+(.)?/g,function(e,a){return a?a.toUpperCase():""})},capitalize:function o(s,e){return s.charAt(0).toUpperCase()+(e?s.slice(1):s.slice(1).toLowerCase())},escapeXml:function u(s){return s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function c(s){var a,e=0,l=[];for(e=0;e<s.length;e++)!1!==(a=n(s,e))&&l.push(a);return l}}}(),function(){var p=Array.prototype.slice,o=function(){},u=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}(),c=function(a,l,r){for(var h in l)a.prototype[h]=h in a.prototype&&"function"==typeof a.prototype[h]&&(l[h]+"").indexOf("callSuper")>-1?function(g){return function(){var m=this.constructor.superclass;this.constructor.superclass=r;var v=l[g].apply(this,arguments);if(this.constructor.superclass=m,"initialize"!==g)return v}}(h):l[h],u&&(l.toString!==Object.prototype.toString&&(a.prototype.toString=l.toString),l.valueOf!==Object.prototype.valueOf&&(a.prototype.valueOf=l.valueOf))};function n(){}function s(a){for(var l=null,r=this;r.constructor.superclass;){var h=r.constructor.superclass.prototype[a];if(r[a]!==h){l=h;break}r=r.constructor.superclass.prototype}return l?arguments.length>1?l.apply(this,p.call(arguments,1)):l.call(this):console.log("tried to callSuper "+a+", method not found in prototype chain",this)}_.util.createClass=function e(){var a=null,l=p.call(arguments,0);function r(){this.initialize.apply(this,arguments)}"function"==typeof l[0]&&(a=l.shift()),r.superclass=a,r.subclasses=[],a&&(n.prototype=a.prototype,r.prototype=new n,a.subclasses.push(r));for(var h=0,g=l.length;h<g;h++)c(r,l[h],a);return r.prototype.initialize||(r.prototype.initialize=o),r.prototype.constructor=r,r.prototype.callSuper=s,r}}(),function(){var p=!!_.document.createElement("div").attachEvent,o=["touchstart","touchmove","touchend"];_.util.addListener=function(c,n,s,e){c&&c.addEventListener(n,s,!p&&e)},_.util.removeListener=function(c,n,s,e){c&&c.removeEventListener(n,s,!p&&e)},_.util.getPointer=function(c){var s=_.util.getScrollLeftTop(c.target),e=function u(c){var n=c.changedTouches;return n&&n[0]?n[0]:c}(c);return{x:e.clientX+s.left,y:e.clientY+s.top}},_.util.isTouchEvent=function(c){return o.indexOf(c.type)>-1||"touch"===c.pointerType}}(),function(){var o=_.document.createElement("div"),n=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(e){return e};"string"==typeof o.style.opacity?s=function(e,a){return e.style.opacity=a,e}:"string"==typeof o.style.filter&&(s=function(e,a){var l=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(l.zoom=1),n.test(l.filter)?l.filter=l.filter.replace(n,a=a>=.9999?"":"alpha(opacity="+100*a+")"):l.filter+=" alpha(opacity="+100*a+")",e}),_.util.setStyle=function p(e,a){var l=e.style;if(!l)return e;if("string"==typeof a)return e.style.cssText+=";"+a,a.indexOf("opacity")>-1?s(e,a.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var r in a)"opacity"===r?s(e,a[r]):l.setProperty("float"===r||"cssFloat"===r?typeof l.styleFloat>"u"?"cssFloat":"styleFloat":r,a[r]);return e}}(),function(){var u,r,v,b,p=Array.prototype.slice,c=function(v){return p.call(v,0)};try{u=c(_.document.childNodes)instanceof Array}catch{}function n(v,b){var C=_.document.createElement(v);for(var A in b)"class"===A?C.className=b[A]:"for"===A?C.htmlFor=b[A]:C.setAttribute(A,b[A]);return C}function a(v){for(var b=0,C=0,A=_.document.documentElement,F=_.document.body||{scrollLeft:0,scrollTop:0};v&&(v.parentNode||v.host)&&((v=v.parentNode||v.host)===_.document?(b=F.scrollLeft||A.scrollLeft||0,C=F.scrollTop||A.scrollTop||0):(b+=v.scrollLeft||0,C+=v.scrollTop||0),1!==v.nodeType||"fixed"!==v.style.position););return{left:b,top:C}}u||(c=function(v){for(var b=new Array(v.length),C=v.length;C--;)b[C]=v[C];return b}),r=_.document.defaultView&&_.document.defaultView.getComputedStyle?function(v,b){var C=_.document.defaultView.getComputedStyle(v,null);return C?C[b]:void 0}:function(v,b){var C=v.style[b];return!C&&v.currentStyle&&(C=v.currentStyle[b]),C},b="userSelect"in(v=_.document.documentElement.style)?"userSelect":"MozUserSelect"in v?"MozUserSelect":"WebkitUserSelect"in v?"WebkitUserSelect":"KhtmlUserSelect"in v?"KhtmlUserSelect":"",_.util.makeElementUnselectable=function C(F){return typeof F.onselectstart<"u"&&(F.onselectstart=_.util.falseFunction),b?F.style[b]="none":"string"==typeof F.unselectable&&(F.unselectable="on"),F},_.util.makeElementSelectable=function A(F){return typeof F.onselectstart<"u"&&(F.onselectstart=null),b?F.style[b]="":"string"==typeof F.unselectable&&(F.unselectable=""),F},_.util.setImageSmoothing=function m(v,b){v.imageSmoothingEnabled=v.imageSmoothingEnabled||v.webkitImageSmoothingEnabled||v.mozImageSmoothingEnabled||v.msImageSmoothingEnabled||v.oImageSmoothingEnabled,v.imageSmoothingEnabled=b},_.util.getById=function o(v){return"string"==typeof v?_.document.getElementById(v):v},_.util.toArray=c,_.util.addClass=function s(v,b){v&&-1===(" "+v.className+" ").indexOf(" "+b+" ")&&(v.className+=(v.className?" ":"")+b)},_.util.makeElement=n,_.util.wrapElement=function e(v,b,C){return"string"==typeof b&&(b=n(b,C)),v.parentNode&&v.parentNode.replaceChild(b,v),b.appendChild(v),b},_.util.getScrollLeftTop=a,_.util.getElementOffset=function l(v){var b,G,C=v&&v.ownerDocument,A={left:0,top:0},F={left:0,top:0},ot={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!C)return F;for(var ut in ot)F[ot[ut]]+=parseInt(r(v,ut),10)||0;return b=C.documentElement,typeof v.getBoundingClientRect<"u"&&(A=v.getBoundingClientRect()),G=a(v),{left:A.left+G.left-(b.clientLeft||0)+F.left,top:A.top+G.top-(b.clientTop||0)+F.top}},_.util.getNodeCanvas=function h(v){var b=_.jsdomImplForWrapper(v);return b._canvas||b._image},_.util.cleanUpJsdomNode=function g(v){if(_.isLikelyNode){var b=_.jsdomImplForWrapper(v);b&&(b._image=null,b._canvas=null,b._currentSrc=null,b._attributes=null,b._classList=null)}}}(),function(){function o(){}_.util.request=function u(c,n){n||(n={});var s=n.method?n.method.toUpperCase():"GET",e=n.onComplete||function(){},a=new _.window.XMLHttpRequest,l=n.body||n.parameters;return a.onreadystatechange=function(){4===a.readyState&&(e(a),a.onreadystatechange=o)},"GET"===s&&(l=null,"string"==typeof n.parameters&&(c=function p(c,n){return c+(/\?/.test(c)?"&":"?")+n}(c,n.parameters))),a.open(s,c,!0),("POST"===s||"PUT"===s)&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(l),a}}(),_.log=console.log,_.warn=console.warn,function(){var p=_.util.object.extend,o=_.util.object.clone,u=[];function c(){return!1}function n(h,g,m,v){return-m*Math.cos(h/v*(Math.PI/2))+m+g}_.util.object.extend(u,{cancelAll:function(){var h=this.splice(0);return h.forEach(function(g){g.cancel()}),h},cancelByCanvas:function(h){if(!h)return[];var g=this.filter(function(m){return"object"==typeof m.target&&m.target.canvas===h});return g.forEach(function(m){m.cancel()}),g},cancelByTarget:function(h){var g=this.findAnimationsByTarget(h);return g.forEach(function(m){m.cancel()}),g},findAnimationIndex:function(h){return this.indexOf(this.findAnimation(h))},findAnimation:function(h){return this.find(function(g){return g.cancel===h})},findAnimationsByTarget:function(h){return h?this.filter(function(g){return g.target===h}):[]}});var e=_.window.requestAnimationFrame||_.window.webkitRequestAnimationFrame||_.window.mozRequestAnimationFrame||_.window.oRequestAnimationFrame||_.window.msRequestAnimationFrame||function(h){return _.window.setTimeout(h,1e3/60)},a=_.window.cancelAnimationFrame||_.window.clearTimeout;function l(){return e.apply(_.window,arguments)}_.util.animate=function s(h){h||(h={});var m,g=!1,v=function(){var b=_.runningAnimations.indexOf(m);return b>-1&&_.runningAnimations.splice(b,1)[0]};return m=p(o(h),{cancel:function(){return g=!0,v()},currentValue:"startValue"in h?h.startValue:0,completionRate:0,durationRate:0}),_.runningAnimations.push(m),l(function(b){var G,C=b||+new Date,A=h.duration||500,F=C+A,ot=h.onChange||c,ut=h.abort||c,gt=h.onComplete||c,_t=h.easing||n,ht="startValue"in h&&h.startValue.length>0,ft="startValue"in h?h.startValue:0,bt="endValue"in h?h.endValue:100,wt=h.byValue||(ht?ft.map(function(vt,k){return bt[k]-ft[k]}):bt-ft);h.onStart&&h.onStart(),function vt(k){var M=(G=k||+new Date)>F?A:G-C,D=M/A,R=ht?ft.map(function(P,O){return _t(M,ft[O],wt[O],A)}):_t(M,ft,wt,A),Z=Math.abs(ht?(R[0]-ft[0])/wt[0]:(R-ft)/wt);if(m.currentValue=ht?R.slice():R,m.completionRate=Z,m.durationRate=D,!g){if(ut(R,Z,D))return void v();if(G>F)return m.currentValue=ht?bt.slice():bt,m.completionRate=1,m.durationRate=1,ot(ht?bt.slice():bt,1,1),gt(bt,1,1),void v();ot(R,Z,D),l(vt)}}(C)}),m.cancel},_.util.requestAnimFrame=l,_.util.cancelAnimFrame=function r(){return a.apply(_.window,arguments)},_.runningAnimations=u}(),function(){function p(u,c,n){var s="rgba("+parseInt(u[0]+n*(c[0]-u[0]),10)+","+parseInt(u[1]+n*(c[1]-u[1]),10)+","+parseInt(u[2]+n*(c[2]-u[2]),10);return(s+=","+(u&&c?parseFloat(u[3]+n*(c[3]-u[3])):1))+")"}_.util.animateColor=function o(u,c,n,s){var e=new _.Color(u).getSource(),a=new _.Color(c).getSource(),l=s.onComplete,r=s.onChange;return _.util.animate(_.util.object.extend(s=s||{},{duration:n||500,startValue:e,endValue:a,byValue:a,easing:function(h,g,m,v){return p(g,m,s.colorEasing?s.colorEasing(h,v):1-Math.cos(h/v*(Math.PI/2)))},onComplete:function(h,g,m){if(l)return l(p(a,a,0),g,m)},onChange:function(h,g,m){if(r){if(Array.isArray(h))return r(p(h,h,0),g,m);r(h,g,m)}}}))}}(),function(){function p(k,M,D,R){return k<Math.abs(M)?(k=M,R=D/4):R=0===M&&0===k?D/(2*Math.PI)*Math.asin(1):D/(2*Math.PI)*Math.asin(M/k),{a:k,c:M,p:D,s:R}}function o(k,M,D){return k.a*Math.pow(2,10*(M-=1))*Math.sin((M*D-k.s)*(2*Math.PI)/k.p)}function bt(k,M,D,R){return D-wt(R-k,0,D,R)+M}function wt(k,M,D,R){return(k/=R)<1/2.75?D*(7.5625*k*k)+M:k<2/2.75?D*(7.5625*(k-=1.5/2.75)*k+.75)+M:k<2.5/2.75?D*(7.5625*(k-=2.25/2.75)*k+.9375)+M:D*(7.5625*(k-=2.625/2.75)*k+.984375)+M}_.util.ease={easeInQuad:function(k,M,D,R){return D*(k/=R)*k+M},easeOutQuad:function(k,M,D,R){return-D*(k/=R)*(k-2)+M},easeInOutQuad:function(k,M,D,R){return(k/=R/2)<1?D/2*k*k+M:-D/2*(--k*(k-2)-1)+M},easeInCubic:function(k,M,D,R){return D*(k/=R)*k*k+M},easeOutCubic:function u(k,M,D,R){return D*((k=k/R-1)*k*k+1)+M},easeInOutCubic:function c(k,M,D,R){return(k/=R/2)<1?D/2*k*k*k+M:D/2*((k-=2)*k*k+2)+M},easeInQuart:function n(k,M,D,R){return D*(k/=R)*k*k*k+M},easeOutQuart:function s(k,M,D,R){return-D*((k=k/R-1)*k*k*k-1)+M},easeInOutQuart:function e(k,M,D,R){return(k/=R/2)<1?D/2*k*k*k*k+M:-D/2*((k-=2)*k*k*k-2)+M},easeInQuint:function a(k,M,D,R){return D*(k/=R)*k*k*k*k+M},easeOutQuint:function l(k,M,D,R){return D*((k=k/R-1)*k*k*k*k+1)+M},easeInOutQuint:function r(k,M,D,R){return(k/=R/2)<1?D/2*k*k*k*k*k+M:D/2*((k-=2)*k*k*k*k+2)+M},easeInSine:function h(k,M,D,R){return-D*Math.cos(k/R*(Math.PI/2))+D+M},easeOutSine:function g(k,M,D,R){return D*Math.sin(k/R*(Math.PI/2))+M},easeInOutSine:function m(k,M,D,R){return-D/2*(Math.cos(Math.PI*k/R)-1)+M},easeInExpo:function v(k,M,D,R){return 0===k?M:D*Math.pow(2,10*(k/R-1))+M},easeOutExpo:function b(k,M,D,R){return k===R?M+D:D*(1-Math.pow(2,-10*k/R))+M},easeInOutExpo:function C(k,M,D,R){return 0===k?M:k===R?M+D:(k/=R/2)<1?D/2*Math.pow(2,10*(k-1))+M:D/2*(2-Math.pow(2,-10*--k))+M},easeInCirc:function A(k,M,D,R){return-D*(Math.sqrt(1-(k/=R)*k)-1)+M},easeOutCirc:function F(k,M,D,R){return D*Math.sqrt(1-(k=k/R-1)*k)+M},easeInOutCirc:function G(k,M,D,R){return(k/=R/2)<1?-D/2*(Math.sqrt(1-k*k)-1)+M:D/2*(Math.sqrt(1-(k-=2)*k)+1)+M},easeInElastic:function ot(k,M,D,R){var P=0;return 0===k?M:1==(k/=R)?M+D:(P||(P=.3*R),-o(p(D,D,P,1.70158),k,R)+M)},easeOutElastic:function ut(k,M,D,R){var P=0;if(0===k)return M;if(1==(k/=R))return M+D;P||(P=.3*R);var z=p(D,D,P,1.70158);return z.a*Math.pow(2,-10*k)*Math.sin((k*R-z.s)*(2*Math.PI)/z.p)+z.c+M},easeInOutElastic:function gt(k,M,D,R){var P=0;if(0===k)return M;if(2==(k/=R/2))return M+D;P||(P=R*(.3*1.5));var z=p(D,D,P,1.70158);return k<1?-.5*o(z,k,R)+M:z.a*Math.pow(2,-10*(k-=1))*Math.sin((k*R-z.s)*(2*Math.PI)/z.p)*.5+z.c+M},easeInBack:function _t(k,M,D,R,Z){return void 0===Z&&(Z=1.70158),D*(k/=R)*k*((Z+1)*k-Z)+M},easeOutBack:function ht(k,M,D,R,Z){return void 0===Z&&(Z=1.70158),D*((k=k/R-1)*k*((Z+1)*k+Z)+1)+M},easeInOutBack:function ft(k,M,D,R,Z){return void 0===Z&&(Z=1.70158),(k/=R/2)<1?D/2*(k*k*((1+(Z*=1.525))*k-Z))+M:D/2*((k-=2)*k*((1+(Z*=1.525))*k+Z)+2)+M},easeInBounce:bt,easeOutBounce:wt,easeInOutBounce:function vt(k,M,D,R){return k<R/2?.5*bt(2*k,0,D,R)+M:.5*wt(2*k-R,0,D,R)+.5*D+M}}}(),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.util.object.extend,c=o.util.object.clone,n=o.util.toFixed,s=o.util.parseUnit,e=o.util.multiplyTransformMatrices,g={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},m={stroke:"strokeOpacity",fill:"fillOpacity"},v="font-size",b="clip-path";function C(P){return P in g?g[P]:P}function A(P,O,z,N){var X,J=Array.isArray(O);if("fill"!==P&&"stroke"!==P||"none"!==O){if("strokeUniform"===P)return"non-scaling-stroke"===O;if("strokeDashArray"===P)O="none"===O?null:O.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===P)O=z&&z.transformMatrix?e(z.transformMatrix,o.parseTransformAttribute(O)):o.parseTransformAttribute(O);else if("visible"===P)O="none"!==O&&"hidden"!==O,z&&!1===z.visible&&(O=!1);else if("opacity"===P)O=parseFloat(O),z&&typeof z.opacity<"u"&&(O*=z.opacity);else if("textAnchor"===P)O="start"===O?"left":"end"===O?"right":"center";else if("charSpacing"===P)X=s(O,N)/N*1e3;else if("paintFirst"===P){var rt=O.indexOf("fill"),lt=O.indexOf("stroke");O="fill",(rt>-1&&lt>-1&&lt<rt||-1===rt&&lt>-1)&&(O="stroke")}else{if("href"===P||"xlink:href"===P||"font"===P)return O;if("imageSmoothing"===P)return"optimizeQuality"===O;X=J?O.map(s):s(O,N)}}else O="";return!J&&isNaN(X)?O:X}function F(P){return new RegExp("^("+P.join("|")+")\\b","i")}function ot(P,O){var J,X,rt,N=[];for(X=0,rt=O.length;X<rt;X++)J=P.getElementsByTagName(O[X]),N=N.concat(Array.prototype.slice.call(J));return N}function ht(P,O){var z,N=!0;return(z=bt(P,O.pop()))&&O.length&&(N=function ft(P,O){for(var z,N=!0;P.parentNode&&1===P.parentNode.nodeType&&O.length;)N&&(z=O.pop()),N=bt(P=P.parentNode,z);return 0===O.length}(P,O)),z&&N&&0===O.length}function bt(P,O){var X,rt,z=P.nodeName,N=P.getAttribute("class"),J=P.getAttribute("id");if(X=new RegExp("^"+z,"i"),O=O.replace(X,""),J&&O.length&&(X=new RegExp("#"+J+"(?![a-zA-Z\\-]+)","i"),O=O.replace(X,"")),N&&O.length)for(rt=(N=N.split(" ")).length;rt--;)X=new RegExp("\\."+N[rt]+"(?![a-zA-Z\\-]+)","i"),O=O.replace(X,"");return 0===O.length}function wt(P,O){var z;if(P.getElementById&&(z=P.getElementById(O)),z)return z;var N,J,X,rt=P.getElementsByTagName("*");for(J=0,X=rt.length;J<X;J++)if(O===(N=rt[J]).getAttribute("id"))return N}o.svgValidTagNamesRegEx=F(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),o.svgViewBoxElementsRegEx=F(["symbol","image","marker","pattern","view","svg"]),o.svgInvalidAncestorsRegEx=F(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),o.svgValidParentsRegEx=F(["symbol","g","a","svg","clipPath","defs"]),o.cssRules={},o.gradientDefs={},o.clipPaths={},o.parseTransformAttribute=function(){function z(Q,St,Ft){Q[Ft]=Math.tan(o.util.degreesToRadians(St[0]))}var J=o.iMatrix,X=o.reNum,rt=o.commaWsp,q="(?:(?:(matrix)\\s*\\(\\s*("+X+")"+rt+"("+X+")"+rt+"("+X+")"+rt+"("+X+")"+rt+"("+X+")"+rt+"("+X+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+X+")(?:"+rt+"("+X+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+X+")(?:"+rt+"("+X+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+X+")(?:"+rt+"("+X+")"+rt+"("+X+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+X+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+X+")\\s*\\)))",Pt=new RegExp("^\\s*(?:(?:"+q+"(?:"+rt+"*"+q+")*)?)\\s*$"),yt=new RegExp(q,"g");return function(Q){var St=J.concat(),Ft=[];if(!Q||Q&&!Pt.test(Q))return St;Q.replace(yt,function(Kt){var Ut=new RegExp(q).exec(Kt).filter(function(xe){return!!xe}),ee=Ut[1],Jt=Ut.slice(2).map(parseFloat);switch(ee){case"translate":!function N(Q,St){Q[4]=St[0],2===St.length&&(Q[5]=St[1])}(St,Jt);break;case"rotate":Jt[0]=o.util.degreesToRadians(Jt[0]),function P(Q,St){var Ft=o.util.cos(St[0]),Bt=o.util.sin(St[0]),Kt=0,Ut=0;3===St.length&&(Kt=St[1],Ut=St[2]),Q[0]=Ft,Q[1]=Bt,Q[2]=-Bt,Q[3]=Ft,Q[4]=Kt-(Ft*Kt-Bt*Ut),Q[5]=Ut-(Bt*Kt+Ft*Ut)}(St,Jt);break;case"scale":!function O(Q,St){var Bt=2===St.length?St[1]:St[0];Q[0]=St[0],Q[3]=Bt}(St,Jt);break;case"skewX":z(St,Jt,2);break;case"skewY":z(St,Jt,1);break;case"matrix":St=Jt}Ft.push(St.concat()),St=J.concat()});for(var Bt=Ft[0];Ft.length>1;)Ft.shift(),Bt=o.util.multiplyTransformMatrices(Bt,Ft[0]);return Bt}}();var k=new RegExp("^\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*$");function M(P){if(!o.svgViewBoxElementsRegEx.test(P.nodeName))return{};var J,X,rt,lt,dt,K,O=P.getAttribute("viewBox"),z=1,N=1,U=P.getAttribute("width"),$=P.getAttribute("height"),it=P.getAttribute("x")||0,q=P.getAttribute("y")||0,st=P.getAttribute("preserveAspectRatio")||"",et=!O||!(O=O.match(k)),Pt=!U||!$||"100%"===U||"100%"===$,yt=et&&Pt,Q={},St="",Ft=0,Bt=0;if(Q.width=0,Q.height=0,Q.toBeParsed=yt,et&&(it||q)&&P.parentNode&&"#document"!==P.parentNode.nodeName&&(St=" translate("+s(it)+" "+s(q)+") ",dt=(P.getAttribute("transform")||"")+St,P.setAttribute("transform",dt),P.removeAttribute("x"),P.removeAttribute("y")),yt)return Q;if(et)return Q.width=s(U),Q.height=s($),Q;if(J=-parseFloat(O[1]),X=-parseFloat(O[2]),rt=parseFloat(O[3]),lt=parseFloat(O[4]),Q.minX=J,Q.minY=X,Q.viewBoxWidth=rt,Q.viewBoxHeight=lt,Pt?(Q.width=rt,Q.height=lt):(Q.width=s(U),Q.height=s($),z=Q.width/rt,N=Q.height/lt),"none"!==(st=o.util.parsePreserveAspectRatioAttribute(st)).alignX&&("meet"===st.meetOrSlice&&(N=z=z>N?N:z),"slice"===st.meetOrSlice&&(N=z=z>N?z:N),Ft=Q.width-rt*z,Bt=Q.height-lt*z,"Mid"===st.alignX&&(Ft/=2),"Mid"===st.alignY&&(Bt/=2),"Min"===st.alignX&&(Ft=0),"Min"===st.alignY&&(Bt=0)),1===z&&1===N&&0===J&&0===X&&0===it&&0===q)return Q;if((it||q)&&"#document"!==P.parentNode.nodeName&&(St=" translate("+s(it)+" "+s(q)+") "),dt=St+" matrix("+z+" 0 0 "+N+" "+(J*z+Ft)+" "+(X*N+Bt)+") ","svg"===P.nodeName){for(K=P.ownerDocument.createElementNS(o.svgNS,"g");P.firstChild;)K.appendChild(P.firstChild);P.appendChild(K)}else(K=P).removeAttribute("x"),K.removeAttribute("y"),dt=K.getAttribute("transform")+dt;return K.setAttribute("transform",dt),Q}function R(P,O){var N="xlink:href",X=wt(P,O.getAttribute(N).slice(1));if(X&&X.getAttribute(N)&&R(P,X),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(lt){X&&!O.hasAttribute(lt)&&X.hasAttribute(lt)&&O.setAttribute(lt,X.getAttribute(lt))}),!O.children.length)for(var rt=X.cloneNode(!0);rt.firstChild;)O.appendChild(rt.firstChild);O.removeAttribute(N)}o.parseSVGDocument=function(P,O,z,N){if(P){!function vt(P){for(var O=ot(P,["use","svg:use"]),z=0;O.length&&z<O.length;){var N=O[z],J=N.getAttribute("xlink:href")||N.getAttribute("href");if(null===J)return;var it,q,st,et,X=J.slice(1),rt=N.getAttribute("x")||0,lt=N.getAttribute("y")||0,dt=wt(P,X).cloneNode(!0),K=(dt.getAttribute("transform")||"")+" translate("+rt+", "+lt+")",$=O.length,Pt=o.svgNS;if(M(dt),/^svg$/i.test(dt.nodeName)){var yt=dt.ownerDocument.createElementNS(Pt,"g");for(q=0,et=(st=dt.attributes).length;q<et;q++)it=st.item(q),yt.setAttributeNS(Pt,it.nodeName,it.nodeValue);for(;dt.firstChild;)yt.appendChild(dt.firstChild);dt=yt}for(q=0,et=(st=N.attributes).length;q<et;q++)"x"!==(it=st.item(q)).nodeName&&"y"!==it.nodeName&&"xlink:href"!==it.nodeName&&"href"!==it.nodeName&&("transform"===it.nodeName?K=it.nodeValue+" "+K:dt.setAttribute(it.nodeName,it.nodeValue));dt.setAttribute("transform",K),dt.setAttribute("instantiated_by_use","1"),dt.removeAttribute("id"),N.parentNode.replaceChild(dt,N),O.length===$&&z++}}(P);var X,rt,J=o.Object.__uid++,lt=M(P),dt=o.util.toArray(P.getElementsByTagName("*"));if(lt.crossOrigin=N&&N.crossOrigin,lt.svgUid=J,0===dt.length&&o.isLikelyNode){var K=[];for(X=0,rt=(dt=P.selectNodes('//*[name(.)!="svg"]')).length;X<rt;X++)K[X]=dt[X];dt=K}var U=dt.filter(function(it){return M(it),o.svgValidTagNamesRegEx.test(it.nodeName.replace("svg:",""))&&!function D(P,O){for(;P&&(P=P.parentNode);)if(P.nodeName&&O.test(P.nodeName.replace("svg:",""))&&!P.getAttribute("instantiated_by_use"))return!0;return!1}(it,o.svgInvalidAncestorsRegEx)});if(!U||U&&!U.length)return void(O&&O([],{}));var $={};dt.filter(function(it){return"clipPath"===it.nodeName.replace("svg:","")}).forEach(function(it){var q=it.getAttribute("id");$[q]=o.util.toArray(it.getElementsByTagName("*")).filter(function(st){return o.svgValidTagNamesRegEx.test(st.nodeName.replace("svg:",""))})}),o.gradientDefs[J]=o.getGradientDefs(P),o.cssRules[J]=o.getCSSRules(P),o.clipPaths[J]=$,o.parseElements(U,function(it,q){O&&(O(it,lt,q,dt),delete o.gradientDefs[J],delete o.cssRules[J],delete o.clipPaths[J])},c(lt),z,N)}};var Z=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+o.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+o.reNum+"))?\\s+(.*)");u(o,{parseFontDeclaration:function(P,O){var z=P.match(Z);if(z){var N=z[1],J=z[3],X=z[4],rt=z[5],lt=z[6];N&&(O.fontStyle=N),J&&(O.fontWeight=isNaN(parseFloat(J))?J:parseFloat(J)),X&&(O.fontSize=s(X)),lt&&(O.fontFamily=lt),rt&&(O.lineHeight="normal"===rt?1:rt)}},getGradientDefs:function(P){var N,z=ot(P,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),J=0,X={};for(J=z.length;J--;)(N=z[J]).getAttribute("xlink:href")&&R(P,N),X[N.getAttribute("id")]=N;return X},parseAttributes:function(P,O,z){if(P){var N,X,rt,J={};typeof z>"u"&&(z=P.getAttribute("svgUid")),P.parentNode&&o.svgValidParentsRegEx.test(P.parentNode.nodeName)&&(J=o.parseAttributes(P.parentNode,O,z));var lt=O.reduce(function(st,et){return(N=P.getAttribute(et))&&(st[et]=N),st},{}),dt=u(function _t(P,O){var z={};for(var N in o.cssRules[O])if(ht(P,N.split(" ")))for(var J in o.cssRules[O][N])z[J]=o.cssRules[O][N][J];return z}(P,z),o.parseStyleAttribute(P));lt=u(lt,dt),dt[b]&&P.setAttribute(b,dt[b]),X=rt=J.fontSize||o.Text.DEFAULT_SVG_FONT_SIZE,lt[v]&&(lt[v]=X=s(lt[v],rt));var K,U,$={};for(var it in lt)U=A(K=C(it),lt[it],J,X),$[K]=U;$&&$.font&&o.parseFontDeclaration($.font,$);var q=u(J,$);return o.svgValidParentsRegEx.test(P.nodeName)?q:function G(P){for(var O in m)if(!(typeof P[m[O]]>"u"||""===P[O])){if(typeof P[O]>"u"){if(!o.Object.prototype[O])continue;P[O]=o.Object.prototype[O]}if(0!==P[O].indexOf("url(")){var z=new o.Color(P[O]);P[O]=z.setAlpha(n(z.getAlpha()*P[m[O]],2)).toRgba()}}return P}(q)}},parseElements:function(P,O,z,N,J){new o.ElementsParser(P,O,z,N,J).parse()},parseStyleAttribute:function(P){var O={},z=P.getAttribute("style");return z&&("string"==typeof z?function ut(P,O){var z,N;P.replace(/;\s*$/,"").split(";").forEach(function(J){var X=J.split(":");z=X[0].trim().toLowerCase(),N=X[1].trim(),O[z]=N})}(z,O):function gt(P,O){for(var J in P)typeof P[J]>"u"||(O[J.toLowerCase()]=P[J])}(z,O)),O},parsePointsAttribute:function(P){if(!P)return null;var z,N,O=[];for(z=0,N=(P=(P=P.replace(/,/g," ").trim()).split(/\s+/)).length;z<N;z+=2)O.push({x:parseFloat(P[z]),y:parseFloat(P[z+1])});return O},getCSSRules:function(P){var z,N,O=P.getElementsByTagName("style"),J={};for(z=0,N=O.length;z<N;z++){var rt=O[z].textContent;""!==(rt=rt.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&rt.split("}").filter(function(lt){return lt.trim()}).forEach(function(lt){var dt=lt.split("{"),K={},$=dt[1].trim().split(";").filter(function(et){return et.trim()});for(z=0,N=$.length;z<N;z++){var it=$[z].split(":"),q=it[0].trim(),st=it[1].trim();K[q]=st}(lt=dt[0].trim()).split(",").forEach(function(et){""!==(et=et.replace(/^svg/i,"").trim())&&(J[et]?o.util.object.extend(J[et],K):J[et]=o.util.object.clone(K))})})}return J},loadSVGFromURL:function(P,O,z,N){P=P.replace(/^\n\s*/,"").trim(),new o.util.request(P,{method:"get",onComplete:function J(X){var rt=X.responseXML;if(!rt||!rt.documentElement)return O&&O(null),!1;o.parseSVGDocument(rt.documentElement,function(lt,dt,K,U){O&&O(lt,dt,K,U)},z,N)}})},loadSVGFromString:function(P,O,z,N){var X=(new o.window.DOMParser).parseFromString(P.trim(),"text/xml");o.parseSVGDocument(X.documentElement,function(rt,lt,dt,K){O(rt,lt,dt,K)},z,N)}})}(At),_.ElementsParser=function(p,o,u,c,n,s){this.elements=p,this.callback=o,this.options=u,this.reviver=c,this.svgUid=u&&u.svgUid||0,this.parsingOptions=n,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=s},function(p){p.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},p.createObjects=function(){var o=this;this.elements.forEach(function(u,c){u.setAttribute("svgUid",o.svgUid),o.createObject(u,c)})},p.findTag=function(o){return _[_.util.string.capitalize(o.tagName.replace("svg:",""))]},p.createObject=function(o,u){var c=this.findTag(o);if(c&&c.fromElement)try{c.fromElement(o,this.createCallback(u,o),this.options)}catch(n){_.log(n)}else this.checkIfDone()},p.createCallback=function(o,u){var c=this;return function(n){var s;c.resolveGradient(n,u,"fill"),c.resolveGradient(n,u,"stroke"),n instanceof _.Image&&n._originalElement&&(s=n.parsePreserveAspectRatioAttribute(u)),n._removeTransformMatrix(s),c.resolveClipPath(n,u),c.reviver&&c.reviver(u,n),c.instances[o]=n,c.checkIfDone()}},p.extractPropertyDefinition=function(o,u,c){var n=o[u],s=this.regexUrl;if(s.test(n)){s.lastIndex=0;var e=s.exec(n)[1];return s.lastIndex=0,_[c][this.svgUid][e]}},p.resolveGradient=function(o,u,c){var n=this.extractPropertyDefinition(o,c,"gradientDefs");if(n){var s=u.getAttribute(c+"-opacity"),e=_.Gradient.fromElement(n,o,s,this.options);o.set(c,e)}},p.createClipPathCallback=function(o,u){return function(c){c._removeTransformMatrix(),c.fillRule=c.clipRule,u.push(c)}},p.resolveClipPath=function(o,u){var n,e,a,l,c=this.extractPropertyDefinition(o,"clipPath","clipPaths");if(c){a=[],e=_.util.invertTransform(o.calcTransformMatrix());for(var h=c[0].parentNode,g=u;g.parentNode&&g.getAttribute("clip-path")!==o.clipPath;)g=g.parentNode;g.parentNode.appendChild(h);for(var m=0;m<c.length;m++)this.findTag(n=c[m]).fromElement(n,this.createClipPathCallback(o,a),this.options);c=1===a.length?a[0]:new _.Group(a),l=_.util.multiplyTransformMatrices(e,c.calcTransformMatrix()),c.clipPath&&this.resolveClipPath(c,g);var r=_.util.qrDecompose(l);c.flipX=!1,c.flipY=!1,c.set("scaleX",r.scaleX),c.set("scaleY",r.scaleY),c.angle=r.angle,c.skewX=r.skewX,c.skewY=0,c.setPositionByOrigin({x:r.translateX,y:r.translateY},"center","center"),o.clipPath=c}else delete o.clipPath},p.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(o){return null!=o}),this.callback(this.instances,this.elements))}}(_.ElementsParser.prototype),function(p){"use strict";var o=p.fabric||(p.fabric={});function u(c,n){this.x=c,this.y=n}o.Point?o.warn("fabric.Point is already defined"):(o.Point=u,u.prototype={type:"point",constructor:u,add:function(c){return new u(this.x+c.x,this.y+c.y)},addEquals:function(c){return this.x+=c.x,this.y+=c.y,this},scalarAdd:function(c){return new u(this.x+c,this.y+c)},scalarAddEquals:function(c){return this.x+=c,this.y+=c,this},subtract:function(c){return new u(this.x-c.x,this.y-c.y)},subtractEquals:function(c){return this.x-=c.x,this.y-=c.y,this},scalarSubtract:function(c){return new u(this.x-c,this.y-c)},scalarSubtractEquals:function(c){return this.x-=c,this.y-=c,this},multiply:function(c){return new u(this.x*c,this.y*c)},multiplyEquals:function(c){return this.x*=c,this.y*=c,this},divide:function(c){return new u(this.x/c,this.y/c)},divideEquals:function(c){return this.x/=c,this.y/=c,this},eq:function(c){return this.x===c.x&&this.y===c.y},lt:function(c){return this.x<c.x&&this.y<c.y},lte:function(c){return this.x<=c.x&&this.y<=c.y},gt:function(c){return this.x>c.x&&this.y>c.y},gte:function(c){return this.x>=c.x&&this.y>=c.y},lerp:function(c,n){return typeof n>"u"&&(n=.5),n=Math.max(Math.min(1,n),0),new u(this.x+(c.x-this.x)*n,this.y+(c.y-this.y)*n)},distanceFrom:function(c){var n=this.x-c.x,s=this.y-c.y;return Math.sqrt(n*n+s*s)},midPointFrom:function(c){return this.lerp(c)},min:function(c){return new u(Math.min(this.x,c.x),Math.min(this.y,c.y))},max:function(c){return new u(Math.max(this.x,c.x),Math.max(this.y,c.y))},toString:function(){return this.x+","+this.y},setXY:function(c,n){return this.x=c,this.y=n,this},setX:function(c){return this.x=c,this},setY:function(c){return this.y=c,this},setFromPoint:function(c){return this.x=c.x,this.y=c.y,this},swap:function(c){var n=this.x,s=this.y;this.x=c.x,this.y=c.y,c.x=n,c.y=s},clone:function(){return new u(this.x,this.y)}})}(At),function(p){"use strict";var o=p.fabric||(p.fabric={});function u(c){this.status=c,this.points=[]}o.Intersection?o.warn("fabric.Intersection is already defined"):(o.Intersection=u,o.Intersection.prototype={constructor:u,appendPoint:function(c){return this.points.push(c),this},appendPoints:function(c){return this.points=this.points.concat(c),this}},o.Intersection.intersectLineLine=function(c,n,s,e){var a,l=(e.x-s.x)*(c.y-s.y)-(e.y-s.y)*(c.x-s.x),r=(n.x-c.x)*(c.y-s.y)-(n.y-c.y)*(c.x-s.x),h=(e.y-s.y)*(n.x-c.x)-(e.x-s.x)*(n.y-c.y);if(0!==h){var g=l/h,m=r/h;0<=g&&g<=1&&0<=m&&m<=1?(a=new u("Intersection")).appendPoint(new o.Point(c.x+g*(n.x-c.x),c.y+g*(n.y-c.y))):a=new u}else a=new u(0===l||0===r?"Coincident":"Parallel");return a},o.Intersection.intersectLinePolygon=function(c,n,s){var h,g,e=new u,a=s.length;for(g=0;g<a;g++)h=u.intersectLineLine(c,n,s[g],s[(g+1)%a]),e.appendPoints(h.points);return e.points.length>0&&(e.status="Intersection"),e},o.Intersection.intersectPolygonPolygon=function(c,n){var a,s=new u,e=c.length;for(a=0;a<e;a++){var h=u.intersectLinePolygon(c[a],c[(a+1)%e],n);s.appendPoints(h.points)}return s.points.length>0&&(s.status="Intersection"),s},o.Intersection.intersectPolygonRectangle=function(c,n,s){var e=n.min(s),a=n.max(s),l=new o.Point(a.x,e.y),r=new o.Point(e.x,a.y),h=u.intersectLinePolygon(e,l,c),g=u.intersectLinePolygon(l,a,c),m=u.intersectLinePolygon(a,r,c),v=u.intersectLinePolygon(r,e,c),b=new u;return b.appendPoints(h.points),b.appendPoints(g.points),b.appendPoints(m.points),b.appendPoints(v.points),b.points.length>0&&(b.status="Intersection"),b})}(At),function(p){"use strict";var o=p.fabric||(p.fabric={});function u(n){n?this._tryParsingColor(n):this.setSource([0,0,0,1])}function c(n,s,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+6*(s-n)*e:e<.5?s:e<2/3?n+(s-n)*(2/3-e)*6:n}o.Color?o.warn("fabric.Color is already defined."):(o.Color=u,o.Color.prototype={_tryParsingColor:function(n){var s;n in u.colorNameMap&&(n=u.colorNameMap[n]),"transparent"===n&&(s=[255,255,255,0]),s||(s=u.sourceFromHex(n)),s||(s=u.sourceFromRgb(n)),s||(s=u.sourceFromHsl(n)),s||(s=[0,0,0,1]),s&&this.setSource(s)},_rgbToHsl:function(n,s,e){var a,l,r,h=o.util.array.max([n/=255,s/=255,e/=255]),g=o.util.array.min([n,s,e]);if(r=(h+g)/2,h===g)a=l=0;else{var m=h-g;switch(l=r>.5?m/(2-h-g):m/(h+g),h){case n:a=(s-e)/m+(s<e?6:0);break;case s:a=(e-n)/m+2;break;case e:a=(n-s)/m+4}a/=6}return[Math.round(360*a),Math.round(100*l),Math.round(100*r)]},getSource:function(){return this._source},setSource:function(n){this._source=n},toRgb:function(){var n=this.getSource();return"rgb("+n[0]+","+n[1]+","+n[2]+")"},toRgba:function(){var n=this.getSource();return"rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")"},toHsl:function(){var n=this.getSource(),s=this._rgbToHsl(n[0],n[1],n[2]);return"hsl("+s[0]+","+s[1]+"%,"+s[2]+"%)"},toHsla:function(){var n=this.getSource(),s=this._rgbToHsl(n[0],n[1],n[2]);return"hsla("+s[0]+","+s[1]+"%,"+s[2]+"%,"+n[3]+")"},toHex:function(){var s,e,a,n=this.getSource();return s=1===(s=n[0].toString(16)).length?"0"+s:s,e=1===(e=n[1].toString(16)).length?"0"+e:e,a=1===(a=n[2].toString(16)).length?"0"+a:a,s.toUpperCase()+e.toUpperCase()+a.toUpperCase()},toHexa:function(){var s,n=this.getSource();return s=1===(s=(s=Math.round(255*n[3])).toString(16)).length?"0"+s:s,this.toHex()+s.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(n){var s=this.getSource();return s[3]=n,this.setSource(s),this},toGrayscale:function(){var n=this.getSource(),s=parseInt((.3*n[0]+.59*n[1]+.11*n[2]).toFixed(0),10);return this.setSource([s,s,s,n[3]]),this},toBlackWhite:function(n){var s=this.getSource(),e=(.3*s[0]+.59*s[1]+.11*s[2]).toFixed(0),a=s[3];return n=n||127,e=Number(e)<Number(n)?0:255,this.setSource([e,e,e,a]),this},overlayWith:function(n){n instanceof u||(n=new u(n));var h,s=[],e=this.getAlpha(),l=this.getSource(),r=n.getSource();for(h=0;h<3;h++)s.push(Math.round(.5*l[h]+.5*r[h]));return s[3]=e,this.setSource(s),this}},o.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,o.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,o.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,o.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},o.Color.fromRgb=function(n){return u.fromSource(u.sourceFromRgb(n))},o.Color.sourceFromRgb=function(n){var s=n.match(u.reRGBa);if(s){var e=parseInt(s[1],10)/(/%$/.test(s[1])?100:1)*(/%$/.test(s[1])?255:1),a=parseInt(s[2],10)/(/%$/.test(s[2])?100:1)*(/%$/.test(s[2])?255:1),l=parseInt(s[3],10)/(/%$/.test(s[3])?100:1)*(/%$/.test(s[3])?255:1);return[parseInt(e,10),parseInt(a,10),parseInt(l,10),s[4]?parseFloat(s[4]):1]}},o.Color.fromRgba=u.fromRgb,o.Color.fromHsl=function(n){return u.fromSource(u.sourceFromHsl(n))},o.Color.sourceFromHsl=function(n){var s=n.match(u.reHSLa);if(s){var r,h,g,e=(parseFloat(s[1])%360+360)%360/360,a=parseFloat(s[2])/(/%$/.test(s[2])?100:1),l=parseFloat(s[3])/(/%$/.test(s[3])?100:1);if(0===a)r=h=g=l;else{var m=l<=.5?l*(a+1):l+a-l*a,v=2*l-m;r=c(v,m,e+1/3),h=c(v,m,e),g=c(v,m,e-1/3)}return[Math.round(255*r),Math.round(255*h),Math.round(255*g),s[4]?parseFloat(s[4]):1]}},o.Color.fromHsla=u.fromHsl,o.Color.fromHex=function(n){return u.fromSource(u.sourceFromHex(n))},o.Color.sourceFromHex=function(n){if(n.match(u.reHex)){var s=n.slice(n.indexOf("#")+1),e=3===s.length||4===s.length,a=8===s.length||4===s.length,l=e?s.charAt(0)+s.charAt(0):s.substring(0,2),r=e?s.charAt(1)+s.charAt(1):s.substring(2,4),h=e?s.charAt(2)+s.charAt(2):s.substring(4,6),g=a?e?s.charAt(3)+s.charAt(3):s.substring(6,8):"FF";return[parseInt(l,16),parseInt(r,16),parseInt(h,16),parseFloat((parseInt(g,16)/255).toFixed(2))]}},o.Color.fromSource=function(n){var s=new u;return s.setSource(n),s})}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=["e","se","s","sw","w","nw","n","ne","e"],c=["ns","nesw","ew","nwse"],n={},s="left",e="top",a="right",l="bottom",r="center",h={top:l,bottom:e,left:a,right:s,center:r},g=o.util.radiansToDegrees,m=Math.sign||function(K){return(K>0)-(K<0)||+K};function v(K,U){var $=K.angle+g(Math.atan2(U.y,U.x))+360;return Math.round($%360/45)}function b(K,U){var $=U.transform.target,it=$.canvas,q=o.util.object.clone(U);q.target=$,it&&it.fire("object:"+K,q),$.fire(K,U)}function C(K,U){var $=U.canvas,q=K[$.uniScaleKey];return $.uniformScaling&&!q||!$.uniformScaling&&q}function A(K){return K.originX===r&&K.originY===r}function F(K,U,$){var it=K.lockScalingX,q=K.lockScalingY;return!!(it&&q||!U&&(it||q)&&$||it&&"x"===U||q&&"y"===U)}function ht(K,U,$,it){return{e:K,transform:U,pointer:{x:$,y:it}}}function ft(K){return function(U,$,it,q){var st=$.target,et=st.getCenterPoint(),Pt=st.translateToOriginPoint(et,$.originX,$.originY),yt=K(U,$,it,q);return st.setPositionByOrigin(Pt,$.originX,$.originY),yt}}function bt(K,U){return function($,it,q,st){var et=U($,it,q,st);return et&&b(K,ht($,it,q,st)),et}}function wt(K,U,$,it,q){var st=K.target,et=st.controls[K.corner],Pt=st.canvas.getZoom(),yt=st.padding/Pt,Q=st.toLocalPoint(new o.Point(it,q),U,$);return Q.x>=yt&&(Q.x-=yt),Q.x<=-yt&&(Q.x+=yt),Q.y>=yt&&(Q.y-=yt),Q.y<=yt&&(Q.y+=yt),Q.x-=et.offsetX,Q.y-=et.offsetY,Q}function vt(K){return K.flipX!==K.flipY}function k(K,U,$,it,q){if(0!==K[U]){var st=K._getTransformedDimensions()[it];K.set($,q/st*K[$])}}function M(K,U,$,it){var Q,q=U.target,st=q._getTransformedDimensions(0,q.skewY),et=wt(U,U.originX,U.originY,$,it),Pt=Math.abs(2*et.x)-st.x,yt=q.skewX;Pt<2?Q=0:(Q=g(Math.atan2(Pt/q.scaleX,st.y/q.scaleY)),U.originX===s&&U.originY===l&&(Q=-Q),U.originX===a&&U.originY===e&&(Q=-Q),vt(q)&&(Q=-Q));var St=yt!==Q;if(St){var Ft=q._getTransformedDimensions().y;q.set("skewX",Q),k(q,"skewY","scaleY","y",Ft)}return St}function D(K,U,$,it){var Q,q=U.target,st=q._getTransformedDimensions(q.skewX,0),et=wt(U,U.originX,U.originY,$,it),Pt=Math.abs(2*et.y)-st.y,yt=q.skewY;Pt<2?Q=0:(Q=g(Math.atan2(Pt/q.scaleY,st.x/q.scaleX)),U.originX===s&&U.originY===l&&(Q=-Q),U.originX===a&&U.originY===e&&(Q=-Q),vt(q)&&(Q=-Q));var St=yt!==Q;if(St){var Ft=q._getTransformedDimensions().x;q.set("skewY",Q),k(q,"skewX","scaleX","x",Ft)}return St}function O(K,U,$,it,q){var Q,St,Ft,Bt,ee,Jt,st=U.target,et=st.lockScalingX,Pt=st.lockScalingY,yt=(q=q||{}).by,Kt=C(K,st),Ut=F(st,yt,Kt),xe=U.gestureScale;if(Ut)return!1;if(xe)St=U.scaleX*xe,Ft=U.scaleY*xe;else{if(Q=wt(U,U.originX,U.originY,$,it),ee="y"!==yt?m(Q.x):1,Jt="x"!==yt?m(Q.y):1,U.signX||(U.signX=ee),U.signY||(U.signY=Jt),st.lockScalingFlip&&(U.signX!==ee||U.signY!==Jt))return!1;if(Bt=st._getTransformedDimensions(),Kt&&!yt){var Ne=Math.abs(Q.x)+Math.abs(Q.y),_e=U.original,pt=Ne/(Math.abs(Bt.x*_e.scaleX/st.scaleX)+Math.abs(Bt.y*_e.scaleY/st.scaleY));St=_e.scaleX*pt,Ft=_e.scaleY*pt}else St=Math.abs(Q.x*st.scaleX/Bt.x),Ft=Math.abs(Q.y*st.scaleY/Bt.y);A(U)&&(St*=2,Ft*=2),U.signX!==ee&&"y"!==yt&&(U.originX=h[U.originX],St*=-1,U.signX=ee),U.signY!==Jt&&"x"!==yt&&(U.originY=h[U.originY],Ft*=-1,U.signY=Jt)}var S=st.scaleX,I=st.scaleY;return yt?("x"===yt&&st.set("scaleX",St),"y"===yt&&st.set("scaleY",Ft)):(!et&&st.set("scaleX",St),!Pt&&st.set("scaleY",Ft)),S!==st.scaleX||I!==st.scaleY}n.scaleCursorStyleHandler=function G(K,U,$){var q=C(K,$),st="";if(0!==U.x&&0===U.y?st="x":0===U.x&&0!==U.y&&(st="y"),F($,st,q))return"not-allowed";var et=v($,U);return u[et]+"-resize"},n.skewCursorStyleHandler=function ot(K,U,$){if(0!==U.x&&$.lockSkewingY||0!==U.y&&$.lockSkewingX)return"not-allowed";var q=v($,U)%4;return c[q]+"-resize"},n.scaleSkewCursorStyleHandler=function ut(K,U,$){return K[$.canvas.altActionKey]?n.skewCursorStyleHandler(K,U,$):n.scaleCursorStyleHandler(K,U,$)},n.rotationWithSnapping=bt("rotating",ft(function P(K,U,$,it){var q=U,st=q.target,et=st.translateToOriginPoint(st.getCenterPoint(),q.originX,q.originY);if(st.lockRotation)return!1;var St,Pt=Math.atan2(q.ey-et.y,q.ex-et.x),yt=Math.atan2(it-et.y,$-et.x),Q=g(yt-Pt+q.theta);if(st.snapAngle>0){var Ft=st.snapAngle,Bt=st.snapThreshold||Ft,Kt=Math.ceil(Q/Ft)*Ft,Ut=Math.floor(Q/Ft)*Ft;Math.abs(Q-Ut)<Bt?Q=Ut:Math.abs(Q-Kt)<Bt&&(Q=Kt)}return Q<0&&(Q=360+Q),St=st.angle!==(Q%=360),st.angle=Q,St})),n.scalingEqually=bt("scaling",ft(function z(K,U,$,it){return O(K,U,$,it)})),n.scalingX=bt("scaling",ft(function N(K,U,$,it){return O(K,U,$,it,{by:"x"})})),n.scalingY=bt("scaling",ft(function J(K,U,$,it){return O(K,U,$,it,{by:"y"})})),n.scalingYOrSkewingX=function X(K,U,$,it){return K[U.target.canvas.altActionKey]?n.skewHandlerX(K,U,$,it):n.scalingY(K,U,$,it)},n.scalingXOrSkewingY=function rt(K,U,$,it){return K[U.target.canvas.altActionKey]?n.skewHandlerY(K,U,$,it):n.scalingX(K,U,$,it)},n.changeWidth=bt("resizing",ft(function lt(K,U,$,it){var q=U.target,st=wt(U,U.originX,U.originY,$,it),et=q.strokeWidth/(q.strokeUniform?q.scaleX:1),Pt=A(U)?2:1,yt=q.width,Q=Math.abs(st.x*Pt/q.scaleX)-et;return q.set("width",Math.max(Q,0)),yt!==Q})),n.skewHandlerX=function R(K,U,$,it){var et,q=U.target,st=q.skewX,Pt=U.originY;return!q.lockSkewingX&&(0===st?et=wt(U,r,r,$,it).x>0?s:a:(st>0&&(et=Pt===e?s:a),st<0&&(et=Pt===e?a:s),vt(q)&&(et=et===s?a:s)),U.originX=et,bt("skewing",ft(M))(K,U,$,it))},n.skewHandlerY=function Z(K,U,$,it){var et,q=U.target,st=q.skewY,Pt=U.originX;return!q.lockSkewingY&&(0===st?et=wt(U,r,r,$,it).y>0?e:l:(st>0&&(et=Pt===s?e:l),st<0&&(et=Pt===s?l:e),vt(q)&&(et=et===e?l:e)),U.originY=et,bt("skewing",ft(D))(K,U,$,it))},n.dragHandler=function dt(K,U,$,it){var q=U.target,st=$-U.offsetX,et=it-U.offsetY,Pt=!q.get("lockMovementX")&&q.left!==st,yt=!q.get("lockMovementY")&&q.top!==et;return Pt&&q.set("left",st),yt&&q.set("top",et),(Pt||yt)&&b("moving",ht(K,U,$,it)),Pt||yt},n.scaleOrSkewActionName=function gt(K,U,$){var it=K[$.canvas.altActionKey];return 0===U.x?it?"skewX":"scaleY":0===U.y?it?"skewY":"scaleX":void 0},n.rotationStyleHandler=function _t(K,U,$){return $.lockRotation?"not-allowed":U.cursorStyle},n.fireEvent=b,n.wrapWithFixedAnchor=ft,n.wrapWithFireEvent=bt,n.getLocalPoint=wt,o.controlsUtils=n}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.util.degreesToRadians,c=o.controlsUtils;c.renderCircleControl=function n(e,a,l,r,h){r=r||{};var G,g=this.sizeX||r.cornerSize||h.cornerSize,m=this.sizeY||r.cornerSize||h.cornerSize,v=typeof r.transparentCorners<"u"?r.transparentCorners:h.transparentCorners,b=v?"stroke":"fill",C=!v&&(r.cornerStrokeColor||h.cornerStrokeColor),A=a,F=l;e.save(),e.fillStyle=r.cornerColor||h.cornerColor,e.strokeStyle=r.cornerStrokeColor||h.cornerStrokeColor,g>m?(G=g,e.scale(1,m/g),F=l*g/m):m>g?(G=m,e.scale(g/m,1),A=a*m/g):G=g,e.lineWidth=1,e.beginPath(),e.arc(A,F,G/2,0,2*Math.PI,!1),e[b](),C&&e.stroke(),e.restore()},c.renderSquareControl=function s(e,a,l,r,h){r=r||{};var g=this.sizeX||r.cornerSize||h.cornerSize,m=this.sizeY||r.cornerSize||h.cornerSize,v=typeof r.transparentCorners<"u"?r.transparentCorners:h.transparentCorners,b=v?"stroke":"fill",C=!v&&(r.cornerStrokeColor||h.cornerStrokeColor),A=g/2,F=m/2;e.save(),e.fillStyle=r.cornerColor||h.cornerColor,e.strokeStyle=r.cornerStrokeColor||h.cornerStrokeColor,e.lineWidth=1,e.translate(a,l),e.rotate(u(h.angle)),e[b+"Rect"](-A,-F,g,m),C&&e.strokeRect(-A,-F,g,m),e.restore()}}(At),function(p){"use strict";var o=p.fabric||(p.fabric={});o.Control=function u(c){for(var n in c)this[n]=c[n]},o.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(c,n){return n.cursorStyle},getActionName:function(c,n){return n.actionName},getVisibility:function(c,n){var s=c._controlsVisibility;return s&&typeof s[n]<"u"?s[n]:this.visible},setVisibility:function(c){this.visible=c},positionHandler:function(c,n){return o.util.transformPoint({x:this.x*c.x+this.offsetX,y:this.y*c.y+this.offsetY},n)},calcCornerCoords:function(c,n,s,e,a){var l,r,h,g,m=a?this.touchSizeX:this.sizeX,v=a?this.touchSizeY:this.sizeY;if(m&&v&&m!==v){var b=Math.atan2(v,m),C=Math.sqrt(m*m+v*v)/2,A=b-o.util.degreesToRadians(c),F=Math.PI/2-b-o.util.degreesToRadians(c);l=C*o.util.cos(A),r=C*o.util.sin(A),h=C*o.util.cos(F),g=C*o.util.sin(F)}else C=.7071067812*(m&&v?m:n),A=o.util.degreesToRadians(45-c),l=h=C*o.util.cos(A),r=g=C*o.util.sin(A);return{tl:{x:s-g,y:e-h},tr:{x:s+l,y:e-r},bl:{x:s-l,y:e+r},br:{x:s+g,y:e+h}}},render:function(c,n,s,e,a){"circle"===((e=e||{}).cornerStyle||a.cornerStyle)?o.controlsUtils.renderCircleControl.call(this,c,n,s,e,a):o.controlsUtils.renderSquareControl.call(this,c,n,s,e,a)}}}(At),function(){function p(s,e){var r,h,g,m,a=s.getAttribute("style"),l=s.getAttribute("offset")||0;if(l=(l=parseFloat(l)/(/%$/.test(l)?100:1))<0?0:l>1?1:l,a){var v=a.split(/\s*;\s*/);for(""===v[v.length-1]&&v.pop(),m=v.length;m--;){var b=v[m].split(/\s*:\s*/),C=b[0].trim(),A=b[1].trim();"stop-color"===C?r=A:"stop-opacity"===C&&(g=A)}}return r||(r=s.getAttribute("stop-color")||"rgb(0,0,0)"),g||(g=s.getAttribute("stop-opacity")),h=(r=new _.Color(r)).getAlpha(),g=isNaN(parseFloat(g))?1:parseFloat(g),g*=h*e,{offset:l,color:r.toRgb(),opacity:g}}var c=_.util.object.clone;_.Gradient=_.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(s){s||(s={}),s.coords||(s.coords={});var e,a=this;Object.keys(s).forEach(function(l){a[l]=s[l]}),this.id?this.id+="_"+_.Object.__uid++:this.id=_.Object.__uid++,e={x1:s.coords.x1||0,y1:s.coords.y1||0,x2:s.coords.x2||0,y2:s.coords.y2||0},"radial"===this.type&&(e.r1=s.coords.r1||0,e.r2=s.coords.r2||0),this.coords=e,this.colorStops=s.colorStops.slice()},addColorStop:function(s){for(var e in s){var a=new _.Color(s[e]);this.colorStops.push({offset:parseFloat(e),color:a.toRgb(),opacity:a.getAlpha()})}return this},toObject:function(s){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return _.util.populateWithProperties(this,e,s),e},toSVG:function(s,h){var l,r,g,m,a=c(this.coords,!0),v=(h=h||{},c(this.colorStops,!0)),b=a.r1>a.r2,C=this.gradientTransform?this.gradientTransform.concat():_.iMatrix.concat(),A=-this.offsetX,F=-this.offsetY,G=!!h.additionalTransform,ot="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(v.sort(function(ft,bt){return ft.offset-bt.offset}),"objectBoundingBox"===ot?(A/=s.width,F/=s.height):(A+=s.width/2,F+=s.height/2),"path"===s.type&&"percentage"!==this.gradientUnits&&(A-=s.pathOffset.x,F-=s.pathOffset.y),C[4]-=A,C[5]-=F,m='id="SVGID_'+this.id+'" gradientUnits="'+ot+'"',m+=' gradientTransform="'+(G?h.additionalTransform+" ":"")+_.util.matrixToSVG(C)+'" ',"linear"===this.type?g=["<linearGradient ",m,' x1="',a.x1,'" y1="',a.y1,'" x2="',a.x2,'" y2="',a.y2,'">\n']:"radial"===this.type&&(g=["<radialGradient ",m,' cx="',b?a.x1:a.x2,'" cy="',b?a.y1:a.y2,'" r="',b?a.r1:a.r2,'" fx="',b?a.x2:a.x1,'" fy="',b?a.y2:a.y1,'">\n']),"radial"===this.type){if(b)for((v=v.concat()).reverse(),l=0,r=v.length;l<r;l++)v[l].offset=1-v[l].offset;var ut=Math.min(a.r1,a.r2);if(ut>0){var _t=ut/Math.max(a.r1,a.r2);for(l=0,r=v.length;l<r;l++)v[l].offset+=_t*(1-v[l].offset)}}for(l=0,r=v.length;l<r;l++){var ht=v[l];g.push("<stop ",'offset="',100*ht.offset+"%",'" style="stop-color:',ht.color,typeof ht.opacity<"u"?";stop-opacity: "+ht.opacity:";",'"/>\n')}return g.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),g.join("")},toLive:function(s){var e,l,r,a=_.util.object.clone(this.coords);if(this.type){for("linear"===this.type?e=s.createLinearGradient(a.x1,a.y1,a.x2,a.y2):"radial"===this.type&&(e=s.createRadialGradient(a.x1,a.y1,a.r1,a.x2,a.y2,a.r2)),l=0,r=this.colorStops.length;l<r;l++){var h=this.colorStops[l].color,g=this.colorStops[l].opacity,m=this.colorStops[l].offset;typeof g<"u"&&(h=new _.Color(h).setAlpha(g).toRgba()),e.addColorStop(m,h)}return e}}}),_.util.object.extend(_.Gradient,{fromElement:function(s,e,a,l){var r=parseFloat(a)/(/%$/.test(a)?100:1);r=r<0?0:r>1?1:r,isNaN(r)&&(r=1);var g,C,A,ot,h=s.getElementsByTagName("stop"),m="userSpaceOnUse"===s.getAttribute("gradientUnits")?"pixels":"percentage",v=s.getAttribute("gradientTransform")||"",b=[],F=0,G=0;for("linearGradient"===s.nodeName||"LINEARGRADIENT"===s.nodeName?(g="linear",C=function o(s){return{x1:s.getAttribute("x1")||0,y1:s.getAttribute("y1")||0,x2:s.getAttribute("x2")||"100%",y2:s.getAttribute("y2")||0}}(s)):(g="radial",C=function u(s){return{x1:s.getAttribute("fx")||s.getAttribute("cx")||"50%",y1:s.getAttribute("fy")||s.getAttribute("cy")||"50%",r1:0,x2:s.getAttribute("cx")||"50%",y2:s.getAttribute("cy")||"50%",r2:s.getAttribute("r")||"50%"}}(s)),A=h.length;A--;)b.push(p(h[A],r));return ot=_.parseTransformAttribute(v),function n(s,e,a,l){var r,h;Object.keys(e).forEach(function(g){"Infinity"===(r=e[g])?h=1:"-Infinity"===r?h=0:(h=parseFloat(e[g],10),"string"==typeof r&&/^(\d+\.\d+)%|(\d+)%$/.test(r)&&(h*=.01,"pixels"===l&&(("x1"===g||"x2"===g||"r2"===g)&&(h*=a.viewBoxWidth||a.width),("y1"===g||"y2"===g)&&(h*=a.viewBoxHeight||a.height)))),e[g]=h})}(0,C,l,m),"pixels"===m&&(F=-e.left,G=-e.top),new _.Gradient({id:s.getAttribute("id"),type:g,coords:C,colorStops:b,gradientUnits:m,gradientTransform:ot,offsetX:F,offsetY:G})}})}(),function(){"use strict";var p=_.util.toFixed;_.Pattern=_.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(o,u){if(o||(o={}),this.id=_.Object.__uid++,this.setOptions(o),!o.source||o.source&&"string"!=typeof o.source)u&&u(this);else{var c=this;this.source=_.util.createImage(),_.util.loadImage(o.source,function(n,s){c.source=n,u&&u(c,s)},null,this.crossOrigin)}},toObject:function(o){var c,n,u=_.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?c=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(c=this.source.toDataURL()),n={type:"pattern",source:c,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:p(this.offsetX,u),offsetY:p(this.offsetY,u),patternTransform:this.patternTransform?this.patternTransform.concat():null},_.util.populateWithProperties(this,n,o),n},toSVG:function(o){var u="function"==typeof this.source?this.source():this.source,c=u.width/o.width,n=u.height/o.height,s=this.offsetX/o.width,e=this.offsetY/o.height,a="";return("repeat-x"===this.repeat||"no-repeat"===this.repeat)&&(n=1,e&&(n+=Math.abs(e))),("repeat-y"===this.repeat||"no-repeat"===this.repeat)&&(c=1,s&&(c+=Math.abs(s))),u.src?a=u.src:u.toDataURL&&(a=u.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+s+'" y="'+e+'" width="'+c+'" height="'+n+'">\n<image x="0" y="0" width="'+u.width+'" height="'+u.height+'" xlink:href="'+a+'"></image>\n</pattern>\n'},setOptions:function(o){for(var u in o)this[u]=o[u]},toLive:function(o){var u=this.source;return!u||typeof u.src<"u"&&(!u.complete||0===u.naturalWidth||0===u.naturalHeight)?"":o.createPattern(u,this.repeat)}})}(),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.util.toFixed;o.Shadow?o.warn("fabric.Shadow is already defined."):(o.Shadow=o.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(c){for(var n in"string"==typeof c&&(c=this._parseShadow(c)),c)this[n]=c[n];this.id=o.Object.__uid++},_parseShadow:function(c){var n=c.trim(),s=o.Shadow.reOffsetsAndBlur.exec(n)||[];return{color:(n.replace(o.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(s[1],10)||0,offsetY:parseFloat(s[2],10)||0,blur:parseFloat(s[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(c){var n=40,s=40,e=o.Object.NUM_FRACTION_DIGITS,a=o.util.rotateVector({x:this.offsetX,y:this.offsetY},o.util.degreesToRadians(-c.angle)),r=new o.Color(this.color);return c.width&&c.height&&(n=100*u((Math.abs(a.x)+this.blur)/c.width,e)+20,s=100*u((Math.abs(a.y)+this.blur)/c.height,e)+20),c.flipX&&(a.x*=-1),c.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+s+'%" height="'+(100+2*s)+'%" x="-'+n+'%" width="'+(100+2*n)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+u(this.blur?this.blur/2:0,e)+'"></feGaussianBlur>\n\t<feOffset dx="'+u(a.x,e)+'" dy="'+u(a.y,e)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+r.toRgb()+'" flood-opacity="'+r.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var c={},n=o.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(s){this[s]!==n[s]&&(c[s]=this[s])},this),c}}),o.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(At),function(){"use strict";if(_.StaticCanvas)_.warn("fabric.StaticCanvas is already defined.");else{var p=_.util.object.extend,o=_.util.getElementOffset,u=_.util.removeFromArray,c=_.util.toFixed,n=_.util.transformPoint,s=_.util.invertTransform,e=_.util.getNodeCanvas,a=_.util.createCanvasElement,l=new Error("Could not initialize `canvas` element");_.StaticCanvas=_.util.createClass(_.CommonMethods,{initialize:function(r,h){h||(h={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(r,h)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:_.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(r,h){var g=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(r),this._initOptions(h),this.interactive||this._initRetinaScaling(),h.overlayImage&&this.setOverlayImage(h.overlayImage,g),h.backgroundImage&&this.setBackgroundImage(h.backgroundImage,g),h.backgroundColor&&this.setBackgroundColor(h.backgroundColor,g),h.overlayColor&&this.setOverlayColor(h.overlayColor,g),this.calcOffset()},_isRetinaScaling:function(){return _.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,_.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var r=_.devicePixelRatio;this.__initRetinaScaling(r,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(r,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(r,h,g){h.setAttribute("width",this.width*r),h.setAttribute("height",this.height*r),g.scale(r,r)},calcOffset:function(){return this._offset=o(this.lowerCanvasEl),this},setOverlayImage:function(r,h,g){return this.__setBgOverlayImage("overlayImage",r,h,g)},setBackgroundImage:function(r,h,g){return this.__setBgOverlayImage("backgroundImage",r,h,g)},setOverlayColor:function(r,h){return this.__setBgOverlayColor("overlayColor",r,h)},setBackgroundColor:function(r,h){return this.__setBgOverlayColor("backgroundColor",r,h)},__setBgOverlayImage:function(r,h,g,m){return"string"==typeof h?_.util.loadImage(h,function(v,b){if(v){var C=new _.Image(v,m);this[r]=C,C.canvas=this}g&&g(v,b)},this,m&&m.crossOrigin):(m&&h.setOptions(m),this[r]=h,h&&(h.canvas=this),g&&g(h,!1)),this},__setBgOverlayColor:function(r,h,g){return this[r]=h,this._initGradient(h,r),this._initPattern(h,r,g),this},_createCanvasElement:function(){var r=a();if(!r||(r.style||(r.style={}),typeof r.getContext>"u"))throw l;return r},_initOptions:function(r){var h=this.lowerCanvasEl;this._setOptions(r),this.width=this.width||parseInt(h.width,10)||0,this.height=this.height||parseInt(h.height,10)||0,this.lowerCanvasEl.style&&(h.width=this.width,h.height=this.height,h.style.width=this.width+"px",h.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(r){this.lowerCanvasEl=r&&r.getContext?r:_.util.getById(r)||this._createCanvasElement(),_.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(r,h){return this.setDimensions({width:r},h)},setHeight:function(r,h){return this.setDimensions({height:r},h)},setDimensions:function(r,h){var g;for(var m in h=h||{},r)g=r[m],h.cssOnly||(this._setBackstoreDimension(m,r[m]),g+="px",this.hasLostContext=!0),h.backstoreOnly||this._setCssDimension(m,g);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),h.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(r,h){return this.lowerCanvasEl[r]=h,this.upperCanvasEl&&(this.upperCanvasEl[r]=h),this.cacheCanvasEl&&(this.cacheCanvasEl[r]=h),this[r]=h,this},_setCssDimension:function(r,h){return this.lowerCanvasEl.style[r]=h,this.upperCanvasEl&&(this.upperCanvasEl.style[r]=h),this.wrapperEl&&(this.wrapperEl.style[r]=h),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(r){var v,b,C,h=this._activeObject,g=this.backgroundImage,m=this.overlayImage;for(this.viewportTransform=r,b=0,C=this._objects.length;b<C;b++)(v=this._objects[b]).group||v.setCoords(!0);return h&&h.setCoords(),g&&g.setCoords(!0),m&&m.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(r,h){var g=r,m=this.viewportTransform.slice(0);r=n(r,s(this.viewportTransform)),m[0]=h,m[3]=h;var v=n(r,m);return m[4]+=g.x-v.x,m[5]+=g.y-v.y,this.setViewportTransform(m)},setZoom:function(r){return this.zoomToPoint(new _.Point(0,0),r),this},absolutePan:function(r){var h=this.viewportTransform.slice(0);return h[4]=-r.x,h[5]=-r.y,this.setViewportTransform(h)},relativePan:function(r){return this.absolutePan(new _.Point(-r.x-this.viewportTransform[4],-r.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(r){this.stateful&&r.setupState(),r._set("canvas",this),r.setCoords(),this.fire("object:added",{target:r}),r.fire("added")},_onObjectRemoved:function(r){this.fire("object:removed",{target:r}),r.fire("removed"),delete r.canvas},clearContext:function(r){return r.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){return this.renderCanvas(this.contextContainer,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=_.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var r={},h=this.width,g=this.height,m=s(this.viewportTransform);return r.tl=n({x:0,y:0},m),r.br=n({x:h,y:g},m),r.tr=new _.Point(r.br.x,r.tl.y),r.bl=new _.Point(r.tl.x,r.br.y),this.vptCoords=r,r},cancelRequestedRender:function(){this.isRendering&&(_.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(r,h){var g=this.viewportTransform,m=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(r),_.util.setImageSmoothing(r,this.imageSmoothingEnabled),this.fire("before:render",{ctx:r}),this._renderBackground(r),r.save(),r.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._renderObjects(r,h),r.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(r),m&&(m.canvas=this,m.shouldCache(),m._transformDone=!0,m.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(r)),this._renderOverlay(r),this.controlsAboveOverlay&&this.interactive&&this.drawControls(r),this.fire("after:render",{ctx:r})},drawClipPathOnCanvas:function(r){var h=this.viewportTransform,g=this.clipPath;r.save(),r.transform(h[0],h[1],h[2],h[3],h[4],h[5]),r.globalCompositeOperation="destination-in",g.transform(r),r.scale(1/g.zoomX,1/g.zoomY),r.drawImage(g._cacheCanvas,-g.cacheTranslationX,-g.cacheTranslationY),r.restore()},_renderObjects:function(r,h){var g,m;for(g=0,m=h.length;g<m;++g)h[g]&&h[g].render(r)},_renderBackgroundOrOverlay:function(r,h){var g=this[h+"Color"],m=this[h+"Image"],v=this.viewportTransform,b=this[h+"Vpt"];if(g||m){if(g){r.save(),r.beginPath(),r.moveTo(0,0),r.lineTo(this.width,0),r.lineTo(this.width,this.height),r.lineTo(0,this.height),r.closePath(),r.fillStyle=g.toLive?g.toLive(r,this):g,b&&r.transform(v[0],v[1],v[2],v[3],v[4],v[5]),r.transform(1,0,0,1,g.offsetX||0,g.offsetY||0);var C=g.gradientTransform||g.patternTransform;C&&r.transform(C[0],C[1],C[2],C[3],C[4],C[5]),r.fill(),r.restore()}m&&(r.save(),b&&r.transform(v[0],v[1],v[2],v[3],v[4],v[5]),m.render(r),r.restore())}},_renderBackground:function(r){this._renderBackgroundOrOverlay(r,"background")},_renderOverlay:function(r){this._renderBackgroundOrOverlay(r,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new _.Point(this.width/2,this.height/2)},centerObjectH:function(r){return this._centerObject(r,new _.Point(this.getCenterPoint().x,r.getCenterPoint().y))},centerObjectV:function(r){return this._centerObject(r,new _.Point(r.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(r){var h=this.getCenterPoint();return this._centerObject(r,h)},viewportCenterObject:function(r){var h=this.getVpCenter();return this._centerObject(r,h)},viewportCenterObjectH:function(r){var h=this.getVpCenter();return this._centerObject(r,new _.Point(h.x,r.getCenterPoint().y)),this},viewportCenterObjectV:function(r){var h=this.getVpCenter();return this._centerObject(r,new _.Point(r.getCenterPoint().x,h.y))},getVpCenter:function(){var r=this.getCenterPoint(),h=s(this.viewportTransform);return n(r,h)},_centerObject:function(r,h){return r.setPositionByOrigin(h,"center","center"),r.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(r){return this.toDatalessObject(r)},toObject:function(r){return this._toObjectMethod("toObject",r)},toDatalessObject:function(r){return this._toObjectMethod("toDatalessObject",r)},_toObjectMethod:function(r,h){var g=this.clipPath,m={version:_.version,objects:this._toObjects(r,h)};return g&&!g.excludeFromExport&&(m.clipPath=this._toObject(this.clipPath,r,h)),p(m,this.__serializeBgOverlay(r,h)),_.util.populateWithProperties(this,m,h),m},_toObjects:function(r,h){return this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){return this._toObject(g,r,h)},this)},_toObject:function(r,h,g){var m;this.includeDefaultValues||(m=r.includeDefaultValues,r.includeDefaultValues=!1);var v=r[h](g);return this.includeDefaultValues||(r.includeDefaultValues=m),v},__serializeBgOverlay:function(r,h){var g={},m=this.backgroundImage,v=this.overlayImage,b=this.backgroundColor,C=this.overlayColor;return b&&b.toObject?b.excludeFromExport||(g.background=b.toObject(h)):b&&(g.background=b),C&&C.toObject?C.excludeFromExport||(g.overlay=C.toObject(h)):C&&(g.overlay=C),m&&!m.excludeFromExport&&(g.backgroundImage=this._toObject(m,r,h)),v&&!v.excludeFromExport&&(g.overlayImage=this._toObject(v,r,h)),g},svgViewportTransformation:!0,toSVG:function(r,h){r||(r={}),r.reviver=h;var g=[];return this._setSVGPreamble(g,r),this._setSVGHeader(g,r),this.clipPath&&g.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(g,"background"),this._setSVGBgOverlayImage(g,"backgroundImage",h),this._setSVGObjects(g,h),this.clipPath&&g.push("</g>\n"),this._setSVGBgOverlayColor(g,"overlay"),this._setSVGBgOverlayImage(g,"overlayImage",h),g.push("</svg>"),g.join("")},_setSVGPreamble:function(r,h){h.suppressPreamble||r.push('<?xml version="1.0" encoding="',h.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(r,h){var v,g=h.width||this.width,m=h.height||this.height,b='viewBox="0 0 '+this.width+" "+this.height+'" ',C=_.Object.NUM_FRACTION_DIGITS;h.viewBox?b='viewBox="'+h.viewBox.x+" "+h.viewBox.y+" "+h.viewBox.width+" "+h.viewBox.height+'" ':this.svgViewportTransformation&&(b='viewBox="'+c(-(v=this.viewportTransform)[4]/v[0],C)+" "+c(-v[5]/v[3],C)+" "+c(this.width/v[0],C)+" "+c(this.height/v[3],C)+'" '),r.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',g,'" ','height="',m,'" ',b,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",_.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(h),"</defs>\n")},createSVGClipPathMarkup:function(r){var h=this.clipPath;return h?(h.clipPathId="CLIPPATH_"+_.Object.__uid++,'<clipPath id="'+h.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(r.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var r=this;return["background","overlay"].map(function(g){var m=r[g+"Color"];if(m&&m.toLive){var v=r[g+"Vpt"],b=r.viewportTransform;return m.toSVG({width:r.width/(v?b[0]:1),height:r.height/(v?b[3]:1)},{additionalTransform:v?_.util.matrixToSVG(b):""})}}).join("")},createSVGFontFacesMarkup:function(){var g,m,v,b,C,F,G,ot,r="",h={},ut=_.fontPaths,gt=[];for(this._objects.forEach(function ht(ft){gt.push(ft),ft._objects&&ft._objects.forEach(ht)}),G=0,ot=gt.length;G<ot;G++)if(m=(g=gt[G]).fontFamily,-1!==g.type.indexOf("text")&&!h[m]&&ut[m]&&(h[m]=!0,g.styles))for(C in v=g.styles)for(F in b=v[C])!h[m=b[F].fontFamily]&&ut[m]&&(h[m]=!0);for(var _t in h)r+=["\t\t@font-face {\n","\t\t\tfont-family: '",_t,"';\n","\t\t\tsrc: url('",ut[_t],"');\n","\t\t}\n"].join("");return r&&(r=['\t<style type="text/css">',"<![CDATA[\n",r,"]]>","</style>\n"].join("")),r},_setSVGObjects:function(r,h){var g,m,v,b=this._objects;for(m=0,v=b.length;m<v;m++)!(g=b[m]).excludeFromExport&&this._setSVGObject(r,g,h)},_setSVGObject:function(r,h,g){r.push(h.toSVG(g))},_setSVGBgOverlayImage:function(r,h,g){this[h]&&!this[h].excludeFromExport&&this[h].toSVG&&r.push(this[h].toSVG(g))},_setSVGBgOverlayColor:function(r,h){var g=this[h+"Color"],v=this.width,b=this.height;if(g)if(g.toLive){var C=g.repeat,A=_.util.invertTransform(this.viewportTransform),G=this[h+"Vpt"]?_.util.matrixToSVG(A):"";r.push('<rect transform="'+G+" translate(",v/2,",",b/2,')"',' x="',g.offsetX-v/2,'" y="',g.offsetY-b/2,'" ','width="',"repeat-y"===C||"no-repeat"===C?g.source.width:v,'" height="',"repeat-x"===C||"no-repeat"===C?g.source.height:b,'" fill="url(#SVGID_'+g.id+')"',"></rect>\n")}else r.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',g,'"',"></rect>\n")},sendToBack:function(r){if(!r)return this;var g,m,v,h=this._activeObject;if(r===h&&"activeSelection"===r.type)for(g=(v=h._objects).length;g--;)u(this._objects,m=v[g]),this._objects.unshift(m);else u(this._objects,r),this._objects.unshift(r);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(r){if(!r)return this;var g,m,v,h=this._activeObject;if(r===h&&"activeSelection"===r.type)for(v=h._objects,g=0;g<v.length;g++)u(this._objects,m=v[g]),this._objects.push(m);else u(this._objects,r),this._objects.push(r);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(r,h){if(!r)return this;var m,v,b,C,A,g=this._activeObject,F=0;if(r===g&&"activeSelection"===r.type)for(A=g._objects,m=0;m<A.length;m++)(b=this._objects.indexOf(v=A[m]))>0+F&&(C=b-1,u(this._objects,v),this._objects.splice(C,0,v)),F++;else 0!==(b=this._objects.indexOf(r))&&(C=this._findNewLowerIndex(r,b,h),u(this._objects,r),this._objects.splice(C,0,r));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(r,h,g){var m,v;if(g){for(m=h,v=h-1;v>=0;--v)if(r.intersectsWithObject(this._objects[v])||r.isContainedWithinObject(this._objects[v])||this._objects[v].isContainedWithinObject(r)){m=v;break}}else m=h-1;return m},bringForward:function(r,h){if(!r)return this;var m,v,b,C,A,g=this._activeObject,F=0;if(r===g&&"activeSelection"===r.type)for(m=(A=g._objects).length;m--;)(b=this._objects.indexOf(v=A[m]))<this._objects.length-1-F&&(C=b+1,u(this._objects,v),this._objects.splice(C,0,v)),F++;else(b=this._objects.indexOf(r))!==this._objects.length-1&&(C=this._findNewUpperIndex(r,b,h),u(this._objects,r),this._objects.splice(C,0,r));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(r,h,g){var m,v,b;if(g){for(m=h,v=h+1,b=this._objects.length;v<b;++v)if(r.intersectsWithObject(this._objects[v])||r.isContainedWithinObject(this._objects[v])||this._objects[v].isContainedWithinObject(r)){m=v;break}}else m=h+1;return m},moveTo:function(r,h){return u(this._objects,r),this._objects.splice(h,0,r),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(_.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(r){r.dispose&&r.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),_.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),_.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),p(_.StaticCanvas.prototype,_.Observable),p(_.StaticCanvas.prototype,_.Collection),p(_.StaticCanvas.prototype,_.DataURLExporter),p(_.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(r){var h=a();if(!h||!h.getContext)return null;var g=h.getContext("2d");return g&&"setLineDash"===r?typeof g.setLineDash<"u":null}}),_.StaticCanvas.prototype.toJSON=_.StaticCanvas.prototype.toObject,_.isLikelyNode&&(_.StaticCanvas.prototype.createPNGStream=function(){var r=e(this.lowerCanvasEl);return r&&r.createPNGStream()},_.StaticCanvas.prototype.createJPEGStream=function(r){var h=e(this.lowerCanvasEl);return h&&h.createJPEGStream(r)})}}(),_.BaseBrush=_.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(p){p.strokeStyle=this.color,p.lineWidth=this.width,p.lineCap=this.strokeLineCap,p.miterLimit=this.strokeMiterLimit,p.lineJoin=this.strokeLineJoin,p.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(p){var o=this.canvas.viewportTransform;p.save(),p.transform(o[0],o[1],o[2],o[3],o[4],o[5])},_setShadow:function(){if(this.shadow){var p=this.canvas,o=this.shadow,u=p.contextTop,c=p.getZoom();p&&p._isRetinaScaling()&&(c*=_.devicePixelRatio),u.shadowColor=o.color,u.shadowBlur=o.blur*c,u.shadowOffsetX=o.offsetX*c,u.shadowOffsetY=o.offsetY*c}},needsFullRender:function(){return new _.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var p=this.canvas.contextTop;p.shadowColor="",p.shadowBlur=p.shadowOffsetX=p.shadowOffsetY=0},_isOutSideCanvas:function(p){return p.x<0||p.x>this.canvas.getWidth()||p.y<0||p.y>this.canvas.getHeight()}}),_.PencilBrush=_.util.createClass(_.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(p){this.canvas=p,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(p,o,u){var c=o.midPointFrom(u);return p.quadraticCurveTo(o.x,o.y,c.x,c.y),c},onMouseDown:function(p,o){this.canvas._isMainEvent(o.e)&&(this.drawStraightLine=o.e[this.straightLineKey],this._prepareForDrawing(p),this._captureDrawingPath(p),this._render())},onMouseMove:function(p,o){if(this.canvas._isMainEvent(o.e)&&(this.drawStraightLine=o.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(p))&&this._captureDrawingPath(p)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var u=this._points,c=u.length,n=this.canvas.contextTop;this._saveAndTransform(n),this.oldEnd&&(n.beginPath(),n.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(n,u[c-2],u[c-1],!0),n.stroke(),n.restore()}},onMouseUp:function(p){return!this.canvas._isMainEvent(p.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(p){var o=new _.Point(p.x,p.y);this._reset(),this._addPoint(o),this.canvas.contextTop.moveTo(o.x,o.y)},_addPoint:function(p){return!(this._points.length>1&&p.eq(this._points[this._points.length-1])||(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(p),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(p){var o=new _.Point(p.x,p.y);return this._addPoint(o)},_render:function(p){var o,u,c=this._points[0],n=this._points[1];if(this._saveAndTransform(p=p||this.canvas.contextTop),p.beginPath(),2===this._points.length&&c.x===n.x&&c.y===n.y){var s=this.width/1e3;c=new _.Point(c.x,c.y),n=new _.Point(n.x,n.y),c.x-=s,n.x+=s}for(p.moveTo(c.x,c.y),o=1,u=this._points.length;o<u;o++)this._drawSegment(p,c,n),c=this._points[o],n=this._points[o+1];p.lineTo(c.x,c.y),p.stroke(),p.restore()},convertPointsToSVGPath:function(p){return _.util.getSmoothPathFromPoints(p,this.width/1e3)},_isEmptySVGPath:function(p){return"M 0 0 Q 0 0 0 0 L 0 0"===_.util.joinPath(p)},createPath:function(p){var o=new _.Path(p,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,o.shadow=new _.Shadow(this.shadow)),o},decimatePoints:function(p,o){if(p.length<=2)return p;var n,u=this.canvas.getZoom(),c=Math.pow(o/u,2),s=p.length-1,e=p[0],a=[e];for(n=1;n<s-1;n++)Math.pow(e.x-p[n].x,2)+Math.pow(e.y-p[n].y,2)>=c&&a.push(e=p[n]);return a.push(p[s]),a},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var o=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(o))this.canvas.requestRenderAll();else{var u=this.createPath(o);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:u}),this.canvas.add(u),this.canvas.requestRenderAll(),u.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:u})}}}),_.CircleBrush=_.util.createClass(_.BaseBrush,{width:10,initialize:function(p){this.canvas=p,this.points=[]},drawDot:function(p){var o=this.addPoint(p),u=this.canvas.contextTop;this._saveAndTransform(u),this.dot(u,o),u.restore()},dot:function(p,o){p.fillStyle=o.fill,p.beginPath(),p.arc(o.x,o.y,o.radius,0,2*Math.PI,!1),p.closePath(),p.fill()},onMouseDown:function(p){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(p)},_render:function(){var o,u,p=this.canvas.contextTop,c=this.points;for(this._saveAndTransform(p),o=0,u=c.length;o<u;o++)this.dot(p,c[o]);p.restore()},onMouseMove:function(p){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(p)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(p),this._render()):this.drawDot(p))},onMouseUp:function(){var o,u,p=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var c=[];for(o=0,u=this.points.length;o<u;o++){var n=this.points[o],s=new _.Circle({radius:n.radius,left:n.x,top:n.y,originX:"center",originY:"center",fill:n.fill});this.shadow&&(s.shadow=new _.Shadow(this.shadow)),c.push(s)}var e=new _.Group(c);e.canvas=this.canvas,this.canvas.fire("before:path:created",{path:e}),this.canvas.add(e),this.canvas.fire("path:created",{path:e}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=p,this.canvas.requestRenderAll()},addPoint:function(p){var o=new _.Point(p.x,p.y),u=_.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,c=new _.Color(this.color).setAlpha(_.util.getRandomInt(0,100)/100).toRgba();return o.radius=u,o.fill=c,this.points.push(o),o}}),_.SprayBrush=_.util.createClass(_.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(p){this.canvas=p,this.sprayChunks=[]},onMouseDown:function(p){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(p),this.render(this.sprayChunkPoints)},onMouseMove:function(p){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(p)||(this.addSprayChunk(p),this.render(this.sprayChunkPoints))},onMouseUp:function(){var p=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var o=[],u=0,c=this.sprayChunks.length;u<c;u++)for(var n=this.sprayChunks[u],s=0,e=n.length;s<e;s++){var a=new _.Rect({width:n[s].width,height:n[s].width,left:n[s].x+1,top:n[s].y+1,originX:"center",originY:"center",fill:this.color});o.push(a)}this.optimizeOverlapping&&(o=this._getOptimizedRects(o));var l=new _.Group(o);this.shadow&&l.set("shadow",new _.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:l}),this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=p,this.canvas.requestRenderAll()},_getOptimizedRects:function(p){var u,c,n,o={};for(c=0,n=p.length;c<n;c++)o[u=p[c].left+""+p[c].top]||(o[u]=p[c]);var s=[];for(u in o)s.push(o[u]);return s},render:function(p){var u,c,o=this.canvas.contextTop;for(o.fillStyle=this.color,this._saveAndTransform(o),u=0,c=p.length;u<c;u++){var n=p[u];typeof n.opacity<"u"&&(o.globalAlpha=n.opacity),o.fillRect(n.x,n.y,n.width,n.width)}o.restore()},_render:function(){var o,u,p=this.canvas.contextTop;for(p.fillStyle=this.color,this._saveAndTransform(p),o=0,u=this.sprayChunks.length;o<u;o++)this.render(this.sprayChunks[o]);p.restore()},addSprayChunk:function(p){this.sprayChunkPoints=[];var o,u,c,s,n=this.width/2;for(s=0;s<this.density;s++){o=_.util.getRandomInt(p.x-n,p.x+n),u=_.util.getRandomInt(p.y-n,p.y+n),c=this.dotWidthVariance?_.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var e=new _.Point(o,u);e.width=c,this.randomOpacity&&(e.opacity=_.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(e)}this.sprayChunks.push(this.sprayChunkPoints)}}),_.PatternBrush=_.util.createClass(_.PencilBrush,{getPatternSrc:function(){var u=_.util.createCanvasElement(),c=u.getContext("2d");return u.width=u.height=25,c.fillStyle=this.color,c.beginPath(),c.arc(10,10,10,0,2*Math.PI,!1),c.closePath(),c.fill(),u},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(p){return p.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(p){this.callSuper("_setBrushStyles",p),p.strokeStyle=this.getPattern(p)},createPath:function(p){var o=this.callSuper("createPath",p),u=o._getLeftTopCoords().scalarAdd(o.strokeWidth/2);return o.stroke=new _.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-u.x,offsetY:-u.y}),o}}),function(){var p=_.util.getPointer,o=_.util.degreesToRadians,u=_.util.isTouchEvent;for(var c in _.Canvas=_.util.createClass(_.StaticCanvas,{initialize:function(n,s){s||(s={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(n,s),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=_.PencilBrush&&new _.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var s,e,a,n=this.getActiveObjects();if(n.length>0&&!this.preserveObjectStacking){e=[],a=[];for(var l=0,r=this._objects.length;l<r;l++)-1===n.indexOf(s=this._objects[l])?e.push(s):a.push(s);n.length>1&&(this._activeObject._objects=a),e.push.apply(e,a)}else e=this._objects;return e},renderAll:function(){return this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),this.renderCanvas(this.contextContainer,this._chooseObjectsToRender()),this},renderTopLayer:function(n){n.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(n),this.contextTopDirty=!0),n.restore()},renderTop:function(){var n=this.contextTop;return this.clearContext(n),this.renderTopLayer(n),this.fire("after:render"),this},_normalizePointer:function(n,s){var e=n.calcTransformMatrix(),a=_.util.invertTransform(e),l=this.restorePointerVpt(s);return _.util.transformPoint(l,a)},isTargetTransparent:function(n,s,e){if(n.shouldCache()&&n._cacheCanvas&&n!==this._activeObject){var a=this._normalizePointer(n,{x:s,y:e}),l=Math.max(n.cacheTranslationX+a.x*n.zoomX,0),r=Math.max(n.cacheTranslationY+a.y*n.zoomY,0);return _.util.isTransparent(n._cacheContext,Math.round(l),Math.round(r),this.targetFindTolerance)}var h=this.contextCache,g=n.selectionBackgroundColor,m=this.viewportTransform;return n.selectionBackgroundColor="",this.clearContext(h),h.save(),h.transform(m[0],m[1],m[2],m[3],m[4],m[5]),n.render(h),h.restore(),n.selectionBackgroundColor=g,_.util.isTransparent(h,s,e,this.targetFindTolerance)},_isSelectionKeyPressed:function(n){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(e){return!0===n[e]}):n[this.selectionKey]},_shouldClearSelection:function(n,s){var e=this.getActiveObjects(),a=this._activeObject;return!s||s&&a&&e.length>1&&-1===e.indexOf(s)&&a!==s&&!this._isSelectionKeyPressed(n)||s&&!s.evented||s&&!s.selectable&&a&&a!==s},_shouldCenterTransform:function(n,s,e){var a;if(n)return"scale"===s||"scaleX"===s||"scaleY"===s||"resizing"===s?a=this.centeredScaling||n.centeredScaling:"rotate"===s&&(a=this.centeredRotation||n.centeredRotation),a?!e:e},_getOriginFromCorner:function(n,s){var e={x:n.originX,y:n.originY};return"ml"===s||"tl"===s||"bl"===s?e.x="right":("mr"===s||"tr"===s||"br"===s)&&(e.x="left"),"tl"===s||"mt"===s||"tr"===s?e.y="bottom":("bl"===s||"mb"===s||"br"===s)&&(e.y="top"),e},_getActionFromCorner:function(n,s,e,a){if(!s||!n)return"drag";var l=a.controls[s];return l.getActionName(e,l,a)},_setupCurrentTransform:function(n,s,e){if(s){var a=this.getPointer(n),l=s.__corner,r=s.controls[l],h=e&&l?r.getActionHandler(n,s,r):_.controlsUtils.dragHandler,g=this._getActionFromCorner(e,l,n,s),m=this._getOriginFromCorner(s,l),v=n[this.centeredKey],b={target:s,action:g,actionHandler:h,corner:l,scaleX:s.scaleX,scaleY:s.scaleY,skewX:s.skewX,skewY:s.skewY,offsetX:a.x-s.left,offsetY:a.y-s.top,originX:m.x,originY:m.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:o(s.angle),width:s.width*s.scaleX,shiftKey:n.shiftKey,altKey:v,original:_.util.saveObjectTransform(s)};this._shouldCenterTransform(s,g,v)&&(b.originX="center",b.originY="center"),b.original.originX=m.x,b.original.originY=m.y,this._currentTransform=b,this._beforeTransform(n)}},setCursor:function(n){this.upperCanvasEl.style.cursor=n},_drawSelection:function(n){var s=this._groupSelector,e=new _.Point(s.ex,s.ey),a=_.util.transformPoint(e,this.viewportTransform),l=new _.Point(s.ex+s.left,s.ey+s.top),r=_.util.transformPoint(l,this.viewportTransform),h=Math.min(a.x,r.x),g=Math.min(a.y,r.y),m=Math.max(a.x,r.x),v=Math.max(a.y,r.y),b=this.selectionLineWidth/2;this.selectionColor&&(n.fillStyle=this.selectionColor,n.fillRect(h,g,m-h,v-g)),this.selectionLineWidth&&this.selectionBorderColor&&(n.lineWidth=this.selectionLineWidth,n.strokeStyle=this.selectionBorderColor,h+=b,g+=b,m-=b,v-=b,_.Object.prototype._setLineDash.call(this,n,this.selectionDashArray),n.strokeRect(h,g,m-h,v-g))},findTarget:function(n,s){if(!this.skipTargetFind){var h,g,a=this.getPointer(n,!0),l=this._activeObject,r=this.getActiveObjects(),m=u(n),v=r.length>1&&!s||1===r.length;if(this.targets=[],v&&l._findTargetCorner(a,m)||r.length>1&&!s&&l===this._searchPossibleTargets([l],a))return l;if(1===r.length&&l===this._searchPossibleTargets([l],a)){if(!this.preserveObjectStacking)return l;h=l,g=this.targets,this.targets=[]}var b=this._searchPossibleTargets(this._objects,a);return n[this.altSelectionKey]&&b&&h&&b!==h&&(b=h,this.targets=g),b}},_checkTarget:function(n,s,e){if(s&&s.visible&&s.evented&&s.containsPoint(n)){if(!this.perPixelTargetFind&&!s.perPixelTargetFind||s.isEditing)return!0;if(!this.isTargetTransparent(s,e.x,e.y))return!0}},_searchPossibleTargets:function(n,s){for(var e,l,a=n.length;a--;){var r=n[a],h=r.group?this._normalizePointer(r.group,s):s;if(this._checkTarget(h,r,s)){(e=n[a]).subTargetCheck&&e instanceof _.Group&&(l=this._searchPossibleTargets(e._objects,s))&&this.targets.push(l);break}}return e},restorePointerVpt:function(n){return _.util.transformPoint(n,_.util.invertTransform(this.viewportTransform))},getPointer:function(n,s){if(this._absolutePointer&&!s)return this._absolutePointer;if(this._pointer&&s)return this._pointer;var g,e=p(n),a=this.upperCanvasEl,l=a.getBoundingClientRect(),r=l.width||0,h=l.height||0;(!r||!h)&&("top"in l&&"bottom"in l&&(h=Math.abs(l.top-l.bottom)),"right"in l&&"left"in l&&(r=Math.abs(l.right-l.left))),this.calcOffset(),e.x=e.x-this._offset.left,e.y=e.y-this._offset.top,s||(e=this.restorePointerVpt(e));var m=this.getRetinaScaling();return 1!==m&&(e.x/=m,e.y/=m),{x:e.x*(g=0===r||0===h?{width:1,height:1}:{width:a.width/r,height:a.height/h}).width,y:e.y*g.height}},_createUpperCanvas:function(){var n=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),s=this.lowerCanvasEl,e=this.upperCanvasEl;e?e.className="":(e=this._createCanvasElement(),this.upperCanvasEl=e),_.util.addClass(e,"upper-canvas "+n),this.wrapperEl.appendChild(e),this._copyCanvasStyle(s,e),this._applyCanvasStyle(e),this.contextTop=e.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=_.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),_.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),_.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(n){var s=this.width||n.width,e=this.height||n.height;_.util.setStyle(n,{position:"absolute",width:s+"px",height:e+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),n.width=s,n.height=e,_.util.makeElementUnselectable(n)},_copyCanvasStyle:function(n,s){s.style.cssText=n.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var n=this._activeObject;return n?"activeSelection"===n.type&&n._objects?n._objects.slice(0):[n]:[]},_onObjectRemoved:function(n){n===this._activeObject&&(this.fire("before:selection:cleared",{target:n}),this._discardActiveObject(),this.fire("selection:cleared",{target:n}),n.fire("deselected")),n===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",n)},_fireSelectionEvents:function(n,s){var e=!1,a=this.getActiveObjects(),l=[],r=[];n.forEach(function(h){-1===a.indexOf(h)&&(e=!0,h.fire("deselected",{e:s,target:h}),r.push(h))}),a.forEach(function(h){-1===n.indexOf(h)&&(e=!0,h.fire("selected",{e:s,target:h}),l.push(h))}),n.length>0&&a.length>0?e&&this.fire("selection:updated",{e:s,selected:l,deselected:r}):a.length>0?this.fire("selection:created",{e:s,selected:l}):n.length>0&&this.fire("selection:cleared",{e:s,deselected:r})},setActiveObject:function(n,s){var e=this.getActiveObjects();return this._setActiveObject(n,s),this._fireSelectionEvents(e,s),this},_setActiveObject:function(n,s){return!(this._activeObject===n||!this._discardActiveObject(s,n)||n.onSelect({e:s})||(this._activeObject=n,0))},_discardActiveObject:function(n,s){var e=this._activeObject;if(e){if(e.onDeselect({e:n,object:s}))return!1;this._activeObject=null}return!0},discardActiveObject:function(n){var s=this.getActiveObjects(),e=this.getActiveObject();return s.length&&this.fire("before:selection:cleared",{target:e,e:n}),this._discardActiveObject(n),this._fireSelectionEvents(s,n),this},dispose:function(){var n=this.wrapperEl;return this.removeListeners(),n.removeChild(this.upperCanvasEl),n.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(s){_.util.cleanUpJsdomNode(this[s]),this[s]=void 0}.bind(this)),n.parentNode&&n.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,_.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(n){var s=this._activeObject;s&&s._renderControls(n)},_toObject:function(n,s,e){var a=this._realizeGroupTransformOnObject(n),l=this.callSuper("_toObject",n,s,e);return this._unwindGroupTransformOnObject(n,a),l},_realizeGroupTransformOnObject:function(n){if(n.group&&"activeSelection"===n.group.type&&this._activeObject===n.group){var e={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(a){e[a]=n[a]}),_.util.addTransformToObject(n,this._activeObject.calcOwnMatrix()),e}return null},_unwindGroupTransformOnObject:function(n,s){s&&n.set(s)},_setSVGObject:function(n,s,e){var a=this._realizeGroupTransformOnObject(s);this.callSuper("_setSVGObject",n,s,e),this._unwindGroupTransformOnObject(s,a)},setViewportTransform:function(n){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),_.StaticCanvas.prototype.setViewportTransform.call(this,n)}}),_.StaticCanvas)"prototype"!==c&&(_.Canvas[c]=_.StaticCanvas[c])}(),function(){var p=_.util.addListener,o=_.util.removeListener,s={passive:!1};function e(a,l){return a.button&&a.button===l-1}_.util.object.extend(_.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(p,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(a,l){var r=this.upperCanvasEl,h=this._getEventPrefix();a(_.window,"resize",this._onResize),a(r,h+"down",this._onMouseDown),a(r,h+"move",this._onMouseMove,s),a(r,h+"out",this._onMouseOut),a(r,h+"enter",this._onMouseEnter),a(r,"wheel",this._onMouseWheel),a(r,"contextmenu",this._onContextMenu),a(r,"dblclick",this._onDoubleClick),a(r,"dragover",this._onDragOver),a(r,"dragenter",this._onDragEnter),a(r,"dragleave",this._onDragLeave),a(r,"drop",this._onDrop),this.enablePointerEvents||a(r,"touchstart",this._onTouchStart,s),typeof eventjs<"u"&&l in eventjs&&(eventjs[l](r,"gesture",this._onGesture),eventjs[l](r,"drag",this._onDrag),eventjs[l](r,"orientation",this._onOrientationChange),eventjs[l](r,"shake",this._onShake),eventjs[l](r,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(o,"remove");var a=this._getEventPrefix();o(_.document,a+"up",this._onMouseUp),o(_.document,"touchend",this._onTouchEnd,s),o(_.document,a+"move",this._onMouseMove,s),o(_.document,"touchmove",this._onMouseMove,s)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(a,l){this.__onTransformGesture&&this.__onTransformGesture(a,l)},_onDrag:function(a,l){this.__onDrag&&this.__onDrag(a,l)},_onMouseWheel:function(a){this.__onMouseWheel(a)},_onMouseOut:function(a){var l=this._hoveredTarget;this.fire("mouse:out",{target:l,e:a}),this._hoveredTarget=null,l&&l.fire("mouseout",{e:a});var r=this;this._hoveredTargets.forEach(function(h){r.fire("mouse:out",{target:l,e:a}),h&&l.fire("mouseout",{e:a})}),this._hoveredTargets=[]},_onMouseEnter:function(a){!this._currentTransform&&!this.findTarget(a)&&(this.fire("mouse:over",{target:null,e:a}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(a,l){this.__onOrientationChange&&this.__onOrientationChange(a,l)},_onShake:function(a,l){this.__onShake&&this.__onShake(a,l)},_onLongPress:function(a,l){this.__onLongPress&&this.__onLongPress(a,l)},_onDragOver:function(a){a.preventDefault();var l=this._simpleEventHandler("dragover",a);this._fireEnterLeaveEvents(l,a)},_onDrop:function(a){return this._simpleEventHandler("drop:before",a),this._simpleEventHandler("drop",a)},_onContextMenu:function(a){return this.stopContextMenu&&(a.stopPropagation(),a.preventDefault()),!1},_onDoubleClick:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"dblclick"),this._resetTransformEventData(a)},getPointerId:function(a){var l=a.changedTouches;return l?l[0]&&l[0].identifier:this.enablePointerEvents?a.pointerId:-1},_isMainEvent:function(a){return!0===a.isPrimary||!1!==a.isPrimary&&("touchend"===a.type&&0===a.touches.length||!a.changedTouches||a.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(a){a.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(a)),this.__onMouseDown(a),this._resetTransformEventData();var l=this.upperCanvasEl,r=this._getEventPrefix();p(_.document,"touchend",this._onTouchEnd,s),p(_.document,"touchmove",this._onMouseMove,s),o(l,r+"down",this._onMouseDown)},_onMouseDown:function(a){this.__onMouseDown(a),this._resetTransformEventData();var l=this.upperCanvasEl,r=this._getEventPrefix();o(l,r+"move",this._onMouseMove,s),p(_.document,r+"up",this._onMouseUp),p(_.document,r+"move",this._onMouseMove,s)},_onTouchEnd:function(a){if(!(a.touches.length>0)){this.__onMouseUp(a),this._resetTransformEventData(),this.mainTouchId=null;var l=this._getEventPrefix();o(_.document,"touchend",this._onTouchEnd,s),o(_.document,"touchmove",this._onMouseMove,s);var r=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){p(r.upperCanvasEl,l+"down",r._onMouseDown),r._willAddMouseDown=0},400)}},_onMouseUp:function(a){this.__onMouseUp(a),this._resetTransformEventData();var l=this.upperCanvasEl,r=this._getEventPrefix();this._isMainEvent(a)&&(o(_.document,r+"up",this._onMouseUp),o(_.document,r+"move",this._onMouseMove,s),p(l,r+"move",this._onMouseMove,s))},_onMouseMove:function(a){!this.allowTouchScrolling&&a.preventDefault&&a.preventDefault(),this.__onMouseMove(a)},_onResize:function(){this.calcOffset()},_shouldRender:function(a){var l=this._activeObject;return!!(!!l!=!!a||l&&a&&l!==a)},__onMouseUp:function(a){var l,r=this._currentTransform,h=this._groupSelector,g=!1,m=!h||0===h.left&&0===h.top;if(this._cacheTransformEventData(a),l=this._target,this._handleEvent(a,"up:before"),e(a,3))this.fireRightClick&&this._handleEvent(a,"up",3,m);else{if(e(a,2))return this.fireMiddleClick&&this._handleEvent(a,"up",2,m),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(a);else if(this._isMainEvent(a)){if(r&&(this._finalizeCurrentTransform(a),g=r.actionPerformed),!m){var v=l===this._activeObject;this._maybeGroupObjects(a),g||(g=this._shouldRender(l)||!v&&l===this._activeObject)}var b,C;if(l){if(b=l._findTargetCorner(this.getPointer(a,!0),_.util.isTouchEvent(a)),l.selectable&&l!==this._activeObject&&"up"===l.activeOn)this.setActiveObject(l,a),g=!0;else{var A=l.controls[b],F=A&&A.getMouseUpHandler(a,l,A);F&&F(a,r,(C=this.getPointer(a)).x,C.y)}l.isMoving=!1}if(r&&(r.target!==l||r.corner!==b)){var G=r.target&&r.target.controls[r.corner],ot=G&&G.getMouseUpHandler(a,l,A);C=C||this.getPointer(a),ot&&ot(a,r,C.x,C.y)}this._setCursorFromEvent(a,l),this._handleEvent(a,"up",1,m),this._groupSelector=null,this._currentTransform=null,l&&(l.__corner=0),g?this.requestRenderAll():m||this.renderTop()}}},_simpleEventHandler:function(a,l){var r=this.findTarget(l),h=this.targets,g={e:l,target:r,subTargets:h};if(this.fire(a,g),r&&r.fire(a,g),!h)return r;for(var m=0;m<h.length;m++)h[m].fire(a,g);return r},_handleEvent:function(a,l,r,h){var g=this._target,m=this.targets||[],v={e:a,target:g,subTargets:m,button:r||1,isClick:h||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===l&&(v.currentTarget=this.findTarget(a),v.currentSubTargets=this.targets),this.fire("mouse:"+l,v),g&&g.fire("mouse"+l,v);for(var b=0;b<m.length;b++)m[b].fire("mouse"+l,v)},_finalizeCurrentTransform:function(a){var l=this._currentTransform,r=l.target,h={e:a,target:r,transform:l,action:l.action};r._scaling&&(r._scaling=!1),r.setCoords(),(l.actionPerformed||this.stateful&&r.hasStateChanged())&&this._fire("modified",h)},_onMouseDownInDrawingMode:function(a){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(a).requestRenderAll();var l=this.getPointer(a);this.freeDrawingBrush.onMouseDown(l,{e:a,pointer:l}),this._handleEvent(a,"down")},_onMouseMoveInDrawingMode:function(a){if(this._isCurrentlyDrawing){var l=this.getPointer(a);this.freeDrawingBrush.onMouseMove(l,{e:a,pointer:l})}this.setCursor(this.freeDrawingCursor),this._handleEvent(a,"move")},_onMouseUpInDrawingMode:function(a){var l=this.getPointer(a);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:a,pointer:l}),this._handleEvent(a,"up")},__onMouseDown:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"down:before");var l=this._target;if(e(a,3))this.fireRightClick&&this._handleEvent(a,"down",3);else if(e(a,2))this.fireMiddleClick&&this._handleEvent(a,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(a);else if(this._isMainEvent(a)&&!this._currentTransform){this._previousPointer=r=this._pointer;var h=this._shouldRender(l),g=this._shouldGroup(a,l);if(this._shouldClearSelection(a,l)?this.discardActiveObject(a):g&&(this._handleGrouping(a,l),l=this._activeObject),this.selection&&(!l||!l.selectable&&!l.isEditing&&l!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),l){var m=l===this._activeObject;l.selectable&&"down"===l.activeOn&&this.setActiveObject(l,a);var v=l._findTargetCorner(this.getPointer(a,!0),_.util.isTouchEvent(a));if(l.__corner=v,l===this._activeObject&&(v||!g)){this._setupCurrentTransform(a,l,m);var b=l.controls[v],r=this.getPointer(a),C=b&&b.getMouseDownHandler(a,l,b);C&&C(a,this._currentTransform,r.x,r.y)}}this._handleEvent(a,"down"),(h||g)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(a){this._resetTransformEventData(),this._pointer=this.getPointer(a,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(a)||null},_beforeTransform:function(a){var l=this._currentTransform;this.stateful&&l.target.saveState(),this.fire("before:transform",{e:a,transform:l})},__onMouseMove:function(a){var l,r;if(this._handleEvent(a,"move:before"),this._cacheTransformEventData(a),this.isDrawingMode)this._onMouseMoveInDrawingMode(a);else if(this._isMainEvent(a)){var h=this._groupSelector;h?(h.left=(r=this._absolutePointer).x-h.ex,h.top=r.y-h.ey,this.renderTop()):this._currentTransform?this._transformObject(a):(l=this.findTarget(a)||null,this._setCursorFromEvent(a,l),this._fireOverOutEvents(l,a)),this._handleEvent(a,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(a,l){var r=this._hoveredTarget,h=this._hoveredTargets,g=this.targets,m=Math.max(h.length,g.length);this.fireSyntheticInOutEvents(a,l,{oldTarget:r,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var v=0;v<m;v++)this.fireSyntheticInOutEvents(g[v],l,{oldTarget:h[v],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(a,l){var r=this._draggedoverTarget,h=this._hoveredTargets,g=this.targets,m=Math.max(h.length,g.length);this.fireSyntheticInOutEvents(a,l,{oldTarget:r,evtOut:"dragleave",evtIn:"dragenter"});for(var v=0;v<m;v++)this.fireSyntheticInOutEvents(g[v],l,{oldTarget:h[v],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=a},fireSyntheticInOutEvents:function(a,l,r){var h,g,b,m=r.oldTarget,C=m!==a,A=r.canvasEvtIn,F=r.canvasEvtOut;C&&(h={e:l,target:a,previousTarget:m},g={e:l,target:m,nextTarget:a}),b=a&&C,m&&C&&(F&&this.fire(F,g),m.fire(r.evtOut,g)),b&&(A&&this.fire(A,h),a.fire(r.evtIn,h))},__onMouseWheel:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"wheel"),this._resetTransformEventData()},_transformObject:function(a){var l=this.getPointer(a),r=this._currentTransform;r.reset=!1,r.shiftKey=a.shiftKey,r.altKey=a[this.centeredKey],this._performTransformAction(a,r,l),r.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(a,l,r){var m=l.action,v=!1,b=l.actionHandler;b&&(v=b(a,l,r.x,r.y)),"drag"===m&&v&&(l.target.isMoving=!0,this.setCursor(l.target.moveCursor||this.moveCursor)),l.actionPerformed=l.actionPerformed||v},_fire:_.controlsUtils.fireEvent,_setCursorFromEvent:function(a,l){if(!l)return this.setCursor(this.defaultCursor),!1;var r=l.hoverCursor||this.hoverCursor,h=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,g=(!h||!h.contains(l))&&l._findTargetCorner(this.getPointer(a,!0));g?this.setCursor(this.getCornerCursor(g,l,a)):(l.subTargetCheck&&this.targets.concat().reverse().map(function(m){r=m.hoverCursor||r}),this.setCursor(r))},getCornerCursor:function(a,l,r){var h=l.controls[a];return h.cursorStyleHandler(r,h,l)}})}(),function(){var p=Math.min,o=Math.max;_.util.object.extend(_.Canvas.prototype,{_shouldGroup:function(u,c){var n=this._activeObject;return n&&this._isSelectionKeyPressed(u)&&c&&c.selectable&&this.selection&&(n!==c||"activeSelection"===n.type)&&!c.onSelect({e:u})},_handleGrouping:function(u,c){var n=this._activeObject;n.__corner||c===n&&(!(c=this.findTarget(u,!0))||!c.selectable)||(n&&"activeSelection"===n.type?this._updateActiveSelection(c,u):this._createActiveSelection(c,u))},_updateActiveSelection:function(u,c){var n=this._activeObject,s=n._objects.slice(0);n.contains(u)?(n.removeWithUpdate(u),this._hoveredTarget=u,this._hoveredTargets=this.targets.concat(),1===n.size()&&this._setActiveObject(n.item(0),c)):(n.addWithUpdate(u),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(s,c)},_createActiveSelection:function(u,c){var n=this.getActiveObjects(),s=this._createGroup(u);this._hoveredTarget=s,this._setActiveObject(s,c),this._fireSelectionEvents(n,c)},_createGroup:function(u){var c=this._objects,s=c.indexOf(this._activeObject)<c.indexOf(u)?[this._activeObject,u]:[u,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new _.ActiveSelection(s,{canvas:this})},_groupSelectedObjects:function(u){var n,c=this._collectObjects(u);1===c.length?this.setActiveObject(c[0],u):c.length>1&&(n=new _.ActiveSelection(c.reverse(),{canvas:this}),this.setActiveObject(n,u))},_collectObjects:function(u){for(var n,c=[],s=this._groupSelector.ex,e=this._groupSelector.ey,a=s+this._groupSelector.left,l=e+this._groupSelector.top,r=new _.Point(p(s,a),p(e,l)),h=new _.Point(o(s,a),o(e,l)),g=!this.selectionFullyContained,m=s===a&&e===l,v=this._objects.length;v--&&!((n=this._objects[v])&&n.selectable&&n.visible&&(g&&n.intersectsWithRect(r,h,!0)||n.isContainedWithinRect(r,h,!0)||g&&n.containsPoint(r,null,!0)||g&&n.containsPoint(h,null,!0))&&(c.push(n),m)););return c.length>1&&(c=c.filter(function(b){return!b.onSelect({e:u})})),c},_maybeGroupObjects:function(u){this.selection&&this._groupSelector&&this._groupSelectedObjects(u),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),_.util.object.extend(_.StaticCanvas.prototype,{toDataURL:function(p){p||(p={});var o=p.format||"png",u=p.quality||1,c=(p.multiplier||1)*(p.enableRetinaScaling?this.getRetinaScaling():1),n=this.toCanvasElement(c,p);return _.util.toDataURL(n,o,u)},toCanvasElement:function(p,o){var u=((o=o||{}).width||this.width)*(p=p||1),c=(o.height||this.height)*p,n=this.getZoom(),s=this.width,e=this.height,a=n*p,l=this.viewportTransform,g=this.interactive,m=[a,0,0,a,(l[4]-(o.left||0))*p,(l[5]-(o.top||0))*p],v=this.enableRetinaScaling,b=_.util.createCanvasElement(),C=this.contextTop;return b.width=u,b.height=c,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=m,this.width=u,this.height=c,this.calcViewportBoundaries(),this.renderCanvas(b.getContext("2d"),this._objects),this.viewportTransform=l,this.width=s,this.height=e,this.calcViewportBoundaries(),this.interactive=g,this.enableRetinaScaling=v,this.contextTop=C,b}}),_.util.object.extend(_.StaticCanvas.prototype,{loadFromJSON:function(p,o,u){if(p){var c="string"==typeof p?JSON.parse(p):_.util.object.clone(p),n=this,s=c.clipPath,e=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete c.clipPath,this._enlivenObjects(c.objects,function(a){n.clear(),n._setBgOverlay(c,function(){s?n._enlivenObjects([s],function(l){n.clipPath=l[0],n.__setupCanvas.call(n,c,a,e,o)}):n.__setupCanvas.call(n,c,a,e,o)})},u),this}},__setupCanvas:function(p,o,u,c){var n=this;o.forEach(function(s,e){n.insertAt(s,e)}),this.renderOnAddRemove=u,delete p.objects,delete p.backgroundImage,delete p.overlayImage,delete p.background,delete p.overlay,this._setOptions(p),this.renderAll(),c&&c()},_setBgOverlay:function(p,o){var u={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(p.backgroundImage||p.overlayImage||p.background||p.overlay){var c=function(){u.backgroundImage&&u.overlayImage&&u.backgroundColor&&u.overlayColor&&o&&o()};this.__setBgOverlay("backgroundImage",p.backgroundImage,u,c),this.__setBgOverlay("overlayImage",p.overlayImage,u,c),this.__setBgOverlay("backgroundColor",p.background,u,c),this.__setBgOverlay("overlayColor",p.overlay,u,c)}else o&&o()},__setBgOverlay:function(p,o,u,c){var n=this;if(!o)return u[p]=!0,void(c&&c());"backgroundImage"===p||"overlayImage"===p?_.util.enlivenObjects([o],function(s){n[p]=s[0],u[p]=!0,c&&c()}):this["set"+_.util.string.capitalize(p,!0)](o,function(){u[p]=!0,c&&c()})},_enlivenObjects:function(p,o,u){p&&0!==p.length?_.util.enlivenObjects(p,function(c){o&&o(c)},null,u):o&&o([])},_toDataURL:function(p,o){this.clone(function(u){o(u.toDataURL(p))})},_toDataURLWithMultiplier:function(p,o,u){this.clone(function(c){u(c.toDataURLWithMultiplier(p,o))})},clone:function(p,o){var u=JSON.stringify(this.toJSON(o));this.cloneWithoutData(function(c){c.loadFromJSON(u,function(){p&&p(c)})})},cloneWithoutData:function(p){var o=_.util.createCanvasElement();o.width=this.width,o.height=this.height;var u=new _.Canvas(o);this.backgroundImage?(u.setBackgroundImage(this.backgroundImage.src,function(){u.renderAll(),p&&p(u)}),u.backgroundImageOpacity=this.backgroundImageOpacity,u.backgroundImageStretch=this.backgroundImageStretch):p&&p(u)}}),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.util.object.extend,c=o.util.object.clone,n=o.util.toFixed,s=o.util.string.capitalize,e=o.util.degreesToRadians;o.Object||(o.Object=o.util.createClass(o.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!o.isLikelyNode,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(r){r&&this.setOptions(r)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=o.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(r){var h=o.perfLimitSizeTotal,g=r.width,m=r.height,v=o.maxCacheSideLimit,b=o.minCacheSideLimit;if(g<=v&&m<=v&&g*m<=h)return g<b&&(r.width=b),m<b&&(r.height=b),r;var A=o.util.limitDimsByArea(g/m,h),F=o.util.capValue,G=F(b,A.x,v),ot=F(b,A.y,v);return g>G&&(r.zoomX/=g/G,r.width=G,r.capped=!0),m>ot&&(r.zoomY/=m/ot,r.height=ot,r.capped=!0),r},_getCacheCanvasDimensions:function(){var r=this.getTotalObjectScaling(),h=this._getTransformedDimensions(0,0),g=h.x*r.scaleX/this.scaleX,m=h.y*r.scaleY/this.scaleY;return{width:g+2,height:m+2,zoomX:r.scaleX,zoomY:r.scaleY,x:g,y:m}},_updateCacheCanvas:function(){var r=this.canvas;if(this.noScaleCache&&r&&r._currentTransform){var g=r._currentTransform.action;if(this===r._currentTransform.target&&g.slice&&"scale"===g.slice(0,5))return!1}var F,G,m=this._cacheCanvas,v=this._limitCacheSize(this._getCacheCanvasDimensions()),b=o.minCacheSideLimit,C=v.width,A=v.height,ot=v.zoomX,ut=v.zoomY,gt=C!==this.cacheWidth||A!==this.cacheHeight,ht=gt||this.zoomX!==ot||this.zoomY!==ut,ft=0,bt=0,wt=!1;if(gt){var vt=this._cacheCanvas.width,k=this._cacheCanvas.height,M=C>vt||A>k;wt=M||(C<.9*vt||A<.9*k)&&vt>b&&k>b,M&&!v.capped&&(C>b||A>b)&&(ft=.1*C,bt=.1*A)}return this instanceof o.Text&&this.path&&(ht=!0,wt=!0,ft+=this.getHeightOfLine(0)*this.zoomX,bt+=this.getHeightOfLine(0)*this.zoomY),!!ht&&(wt?(m.width=Math.ceil(C+ft),m.height=Math.ceil(A+bt)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,m.width,m.height)),F=v.x/2,G=v.y/2,this.cacheTranslationX=Math.round(m.width/2-F)+F,this.cacheTranslationY=Math.round(m.height/2-G)+G,this.cacheWidth=C,this.cacheHeight=A,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(ot,ut),this.zoomX=ot,this.zoomY=ut,!0)},setOptions:function(r){this._setOptions(r),this._initGradient(r.fill,"fill"),this._initGradient(r.stroke,"stroke"),this._initPattern(r.fill,"fill"),this._initPattern(r.stroke,"stroke")},transform:function(r){var g=this.calcTransformMatrix(!(this.group&&!this.group._transformDone||this.group&&this.canvas&&r===this.canvas.contextTop));r.transform(g[0],g[1],g[2],g[3],g[4],g[5])},toObject:function(r){var h=o.Object.NUM_FRACTION_DIGITS,g={type:this.type,version:o.version,originX:this.originX,originY:this.originY,left:n(this.left,h),top:n(this.top,h),width:n(this.width,h),height:n(this.height,h),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,h),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:n(this.strokeMiterLimit,h),scaleX:n(this.scaleX,h),scaleY:n(this.scaleY,h),angle:n(this.angle,h),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,h),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:n(this.skewX,h),skewY:n(this.skewY,h)};return this.clipPath&&!this.clipPath.excludeFromExport&&(g.clipPath=this.clipPath.toObject(r),g.clipPath.inverted=this.clipPath.inverted,g.clipPath.absolutePositioned=this.clipPath.absolutePositioned),o.util.populateWithProperties(this,g,r),this.includeDefaultValues||(g=this._removeDefaultValues(g)),g},toDatalessObject:function(r){return this.toObject(r)},_removeDefaultValues:function(r){var h=o.util.getKlass(r.type).prototype;return h.stateProperties.forEach(function(m){"left"===m||"top"===m||(r[m]===h[m]&&delete r[m],Array.isArray(r[m])&&Array.isArray(h[m])&&0===r[m].length&&0===h[m].length&&delete r[m])}),r},toString:function(){return"#<fabric."+s(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var r=o.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(r.scaleX),scaleY:Math.abs(r.scaleY)}},getTotalObjectScaling:function(){var r=this.getObjectScaling(),h=r.scaleX,g=r.scaleY;if(this.canvas){var m=this.canvas.getZoom(),v=this.canvas.getRetinaScaling();h*=m*v,g*=m*v}return{scaleX:h,scaleY:g}},getObjectOpacity:function(){var r=this.opacity;return this.group&&(r*=this.group.getObjectOpacity()),r},_set:function(r,h){var m=this[r]!==h,v=!1;return("scaleX"===r||"scaleY"===r)&&(h=this._constrainScale(h)),"scaleX"===r&&h<0?(this.flipX=!this.flipX,h*=-1):"scaleY"===r&&h<0?(this.flipY=!this.flipY,h*=-1):"shadow"!==r||!h||h instanceof o.Shadow?"dirty"===r&&this.group&&this.group.set("dirty",h):h=new o.Shadow(h),this[r]=h,m&&(v=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(r)>-1?(this.dirty=!0,v&&this.group.set("dirty",!0)):v&&this.stateProperties.indexOf(r)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:o.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(r){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(r.save(),this._setupCompositeOperation(r),this.drawSelectionBackground(r),this.transform(r),this._setOpacity(r),this._setShadow(r,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(r)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(r),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),r.restore())},renderCache:function(r){r=r||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,r.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!!("stroke"===this.paintFirst&&this.hasFill()&&this.hasStroke()&&"object"==typeof this.shadow||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(r,h){if(r.save(),r.globalCompositeOperation=h.inverted?"destination-out":"destination-in",h.absolutePositioned){var g=o.util.invertTransform(this.calcTransformMatrix());r.transform(g[0],g[1],g[2],g[3],g[4],g[5])}h.transform(r),r.scale(1/h.zoomX,1/h.zoomY),r.drawImage(h._cacheCanvas,-h.cacheTranslationX,-h.cacheTranslationY),r.restore()},drawObject:function(r,h){var g=this.fill,m=this.stroke;h?(this.fill="black",this.stroke="",this._setClippingProperties(r)):this._renderBackground(r),this._render(r),this._drawClipPath(r,this.clipPath),this.fill=g,this.stroke=m},_drawClipPath:function(r,h){h&&(h.canvas=this.canvas,h.shouldCache(),h._transformDone=!0,h.renderCache({forClipping:!0}),this.drawClipPathOnCache(r,h))},drawCacheOnCanvas:function(r){r.scale(1/this.zoomX,1/this.zoomY),r.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(r){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!r&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!r){var h=this.cacheWidth/this.zoomX,g=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-h/2,-g/2,h,g)}return!0}return!1},_renderBackground:function(r){if(this.backgroundColor){var h=this._getNonTransformedDimensions();r.fillStyle=this.backgroundColor,r.fillRect(-h.x/2,-h.y/2,h.x,h.y),this._removeShadow(r)}},_setOpacity:function(r){this.group&&!this.group._transformDone?r.globalAlpha=this.getObjectOpacity():r.globalAlpha*=this.opacity},_setStrokeStyles:function(r,h){var g=h.stroke;g&&(r.lineWidth=h.strokeWidth,r.lineCap=h.strokeLineCap,r.lineDashOffset=h.strokeDashOffset,r.lineJoin=h.strokeLineJoin,r.miterLimit=h.strokeMiterLimit,g.toLive?"percentage"===g.gradientUnits||g.gradientTransform||g.patternTransform?this._applyPatternForTransformedGradient(r,g):(r.strokeStyle=g.toLive(r,this),this._applyPatternGradientTransform(r,g)):r.strokeStyle=h.stroke)},_setFillStyles:function(r,h){var g=h.fill;g&&(g.toLive?(r.fillStyle=g.toLive(r,this),this._applyPatternGradientTransform(r,h.fill)):r.fillStyle=g)},_setClippingProperties:function(r){r.globalAlpha=1,r.strokeStyle="transparent",r.fillStyle="#000000"},_setLineDash:function(r,h){!h||0===h.length||(1&h.length&&h.push.apply(h,h),r.setLineDash(h))},_renderControls:function(r,h){var v,b,C,g=this.getViewportTransform(),m=this.calcTransformMatrix();b=typeof(h=h||{}).hasBorders<"u"?h.hasBorders:this.hasBorders,C=typeof h.hasControls<"u"?h.hasControls:this.hasControls,m=o.util.multiplyTransformMatrices(g,m),v=o.util.qrDecompose(m),r.save(),r.translate(v.translateX,v.translateY),r.lineWidth=1*this.borderScaleFactor,this.group||(r.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(v.angle-=180),r.rotate(e(this.group?v.angle:this.angle)),h.forActiveSelection||this.group?b&&this.drawBordersInGroup(r,v,h):b&&this.drawBorders(r,h),C&&this.drawControls(r,h),r.restore()},_setShadow:function(r){if(this.shadow){var m,h=this.shadow,g=this.canvas,v=g&&g.viewportTransform[0]||1,b=g&&g.viewportTransform[3]||1;m=h.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),g&&g._isRetinaScaling()&&(v*=o.devicePixelRatio,b*=o.devicePixelRatio),r.shadowColor=h.color,r.shadowBlur=h.blur*o.browserShadowBlurConstant*(v+b)*(m.scaleX+m.scaleY)/4,r.shadowOffsetX=h.offsetX*v*m.scaleX,r.shadowOffsetY=h.offsetY*b*m.scaleY}},_removeShadow:function(r){this.shadow&&(r.shadowColor="",r.shadowBlur=r.shadowOffsetX=r.shadowOffsetY=0)},_applyPatternGradientTransform:function(r,h){if(!h||!h.toLive)return{offsetX:0,offsetY:0};var g=h.gradientTransform||h.patternTransform,m=-this.width/2+h.offsetX||0,v=-this.height/2+h.offsetY||0;return"percentage"===h.gradientUnits?r.transform(this.width,0,0,this.height,m,v):r.transform(1,0,0,1,m,v),g&&r.transform(g[0],g[1],g[2],g[3],g[4],g[5]),{offsetX:m,offsetY:v}},_renderPaintInOrder:function(r){"stroke"===this.paintFirst?(this._renderStroke(r),this._renderFill(r)):(this._renderFill(r),this._renderStroke(r))},_render:function(){},_renderFill:function(r){this.fill&&(r.save(),this._setFillStyles(r,this),"evenodd"===this.fillRule?r.fill("evenodd"):r.fill(),r.restore())},_renderStroke:function(r){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(r),r.save(),this.strokeUniform&&this.group){var h=this.getObjectScaling();r.scale(1/h.scaleX,1/h.scaleY)}else this.strokeUniform&&r.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(r,this.strokeDashArray),this._setStrokeStyles(r,this),r.stroke(),r.restore()}},_applyPatternForTransformedGradient:function(r,h){var v,g=this._limitCacheSize(this._getCacheCanvasDimensions()),m=o.util.createCanvasElement(),b=this.canvas.getRetinaScaling(),C=g.x/this.scaleX/b,A=g.y/this.scaleY/b;m.width=C,m.height=A,(v=m.getContext("2d")).beginPath(),v.moveTo(0,0),v.lineTo(C,0),v.lineTo(C,A),v.lineTo(0,A),v.closePath(),v.translate(C/2,A/2),v.scale(g.zoomX/this.scaleX/b,g.zoomY/this.scaleY/b),this._applyPatternGradientTransform(v,h),v.fillStyle=h.toLive(r),v.fill(),r.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),r.scale(b*this.scaleX/g.zoomX,b*this.scaleY/g.zoomY),r.strokeStyle=v.createPattern(m,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var r=o.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",r.scaleX),this.set("scaleY",r.scaleY),this.angle=r.angle,this.skewX=r.skewX,this.skewY=0}},_removeTransformMatrix:function(r){var h=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),h=o.util.transformPoint(h,this.transformMatrix)),this.transformMatrix=null,r&&(this.scaleX*=r.scaleX,this.scaleY*=r.scaleY,this.cropX=r.cropX,this.cropY=r.cropY,h.x+=r.offsetLeft,h.y+=r.offsetTop,this.width=r.width,this.height=r.height),this.setPositionByOrigin(h,"center","center")},clone:function(r,h){var g=this.toObject(h);this.constructor.fromObject?this.constructor.fromObject(g,r):o.Object._fromObject("Object",g,r)},cloneAsImage:function(r,h){var g=this.toCanvasElement(h);return r&&r(new o.Image(g)),this},toCanvasElement:function(r){r||(r={});var h=o.util,g=h.saveObjectTransform(this),m=this.group,v=this.shadow,b=Math.abs,C=(r.multiplier||1)*(r.enableRetinaScaling?o.devicePixelRatio:1);delete this.group,r.withoutTransform&&h.resetObjectTransform(this),r.withoutShadow&&(this.shadow=null);var ot,gt,ht,A=o.util.createCanvasElement(),F=this.getBoundingRect(!0,!0),G=this.shadow,ut={x:0,y:0};G&&(gt=G.blur,ot=G.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),ut.x=2*Math.round(b(G.offsetX)+gt)*b(ot.scaleX),ut.y=2*Math.round(b(G.offsetY)+gt)*b(ot.scaleY)),ht=F.height+ut.y,A.width=Math.ceil(F.width+ut.x),A.height=Math.ceil(ht);var ft=new o.StaticCanvas(A,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===r.format&&(ft.backgroundColor="#fff"),this.setPositionByOrigin(new o.Point(ft.width/2,ft.height/2),"center","center");var bt=this.canvas;ft.add(this);var wt=ft.toCanvasElement(C||1,r);return this.shadow=v,this.set("canvas",bt),m&&(this.group=m),this.set(g).setCoords(),ft._objects=[],ft.dispose(),ft=null,wt},toDataURL:function(r){return r||(r={}),o.util.toDataURL(this.toCanvasElement(r),r.format||"png",r.quality||1)},isType:function(r){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===r},complexity:function(){return 1},toJSON:function(r){return this.toObject(r)},rotate:function(r){var h=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return h&&this._setOriginToCenter(),this.set("angle",r),h&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(r,h){h=h||this.canvas.getPointer(r);var g=new o.Point(h.x,h.y),m=this._getLeftTopCoords();return this.angle&&(g=o.util.rotatePoint(g,m,e(-this.angle))),{x:g.x-m.x,y:g.y-m.y}},_setupCompositeOperation:function(r){this.globalCompositeOperation&&(r.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){o.runningAnimations&&o.runningAnimations.cancelByTarget(this)}}),o.util.createAccessors&&o.util.createAccessors(o.Object),u(o.Object.prototype,o.Observable),o.Object.NUM_FRACTION_DIGITS=2,o.Object.ENLIVEN_PROPS=["clipPath"],o.Object._fromObject=function(r,h,g,m){var v=o[r];h=c(h,!0),o.util.enlivenPatterns([h.fill,h.stroke],function(b){typeof b[0]<"u"&&(h.fill=b[0]),typeof b[1]<"u"&&(h.stroke=b[1]),o.util.enlivenObjectEnlivables(h,h,function(){var C=m?new v(h[m],h):new v(h);g&&g(C)})})},o.Object.__uid=0)}(At),function(){var p=_.util.degreesToRadians,o={left:-.5,center:0,right:.5},u={top:-.5,center:0,bottom:.5};_.util.object.extend(_.Object.prototype,{translateToGivenOrigin:function(c,n,s,e,a){var h,g,m,l=c.x,r=c.y;return"string"==typeof n?n=o[n]:n-=.5,"string"==typeof e?e=o[e]:e-=.5,"string"==typeof s?s=u[s]:s-=.5,"string"==typeof a?a=u[a]:a-=.5,g=a-s,((h=e-n)||g)&&(m=this._getTransformedDimensions(),l=c.x+h*m.x,r=c.y+g*m.y),new _.Point(l,r)},translateToCenterPoint:function(c,n,s){var e=this.translateToGivenOrigin(c,n,s,"center","center");return this.angle?_.util.rotatePoint(e,c,p(this.angle)):e},translateToOriginPoint:function(c,n,s){var e=this.translateToGivenOrigin(c,"center","center",n,s);return this.angle?_.util.rotatePoint(e,c,p(this.angle)):e},getCenterPoint:function(){var c=new _.Point(this.left,this.top);return this.translateToCenterPoint(c,this.originX,this.originY)},getPointByOrigin:function(c,n){var s=this.getCenterPoint();return this.translateToOriginPoint(s,c,n)},toLocalPoint:function(c,n,s){var a,l,e=this.getCenterPoint();return a=typeof n<"u"&&typeof s<"u"?this.translateToGivenOrigin(e,"center","center",n,s):new _.Point(this.left,this.top),l=new _.Point(c.x,c.y),this.angle&&(l=_.util.rotatePoint(l,e,-p(this.angle))),l.subtractEquals(a)},setPositionByOrigin:function(c,n,s){var e=this.translateToCenterPoint(c,n,s),a=this.translateToOriginPoint(e,this.originX,this.originY);this.set("left",a.x),this.set("top",a.y)},adjustPosition:function(c){var l,r,n=p(this.angle),s=this.getScaledWidth(),e=_.util.cos(n)*s,a=_.util.sin(n)*s;this.left+=e*((r="string"==typeof c?o[c]:c-.5)-(l="string"==typeof this.originX?o[this.originX]:this.originX-.5)),this.top+=a*(r-l),this.setCoords(),this.originX=c},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var c=this.getCenterPoint();this.originX="center",this.originY="center",this.left=c.x,this.top=c.y},_resetOrigin:function(){var c=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=c.x,this.top=c.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var o=_.util,u=o.degreesToRadians,c=o.multiplyTransformMatrices,n=o.transformPoint;o.object.extend(_.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(s,e){return e?s?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),s?this.aCoords:this.lineCoords)},getCoords:function(s,e){return function p(s){return[new _.Point(s.tl.x,s.tl.y),new _.Point(s.tr.x,s.tr.y),new _.Point(s.br.x,s.br.y),new _.Point(s.bl.x,s.bl.y)]}(this._getCoords(s,e))},intersectsWithRect:function(s,e,a,l){var r=this.getCoords(a,l);return"Intersection"===_.Intersection.intersectPolygonRectangle(r,s,e).status},intersectsWithObject:function(s,e,a){return"Intersection"===_.Intersection.intersectPolygonPolygon(this.getCoords(e,a),s.getCoords(e,a)).status||s.isContainedWithinObject(this,e,a)||this.isContainedWithinObject(s,e,a)},isContainedWithinObject:function(s,e,a){for(var l=this.getCoords(e,a),h=0,g=s._getImageLines(e?s.aCoords:s.lineCoords);h<4;h++)if(!s.containsPoint(l[h],g))return!1;return!0},isContainedWithinRect:function(s,e,a,l){var r=this.getBoundingRect(a,l);return r.left>=s.x&&r.left+r.width<=e.x&&r.top>=s.y&&r.top+r.height<=e.y},containsPoint:function(s,h,a,l){var r=this._getCoords(a,l),g=(h=h||this._getImageLines(r),this._findCrossPoints(s,h));return 0!==g&&g%2==1},isOnScreen:function(s){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br;return!(!this.getCoords(!0,s).some(function(r){return r.x<=a.x&&r.x>=e.x&&r.y<=a.y&&r.y>=e.y})&&!this.intersectsWithRect(e,a,!0,s))||this._containsCenterOfCanvas(e,a,s)},_containsCenterOfCanvas:function(s,e,a){return!!this.containsPoint({x:(s.x+e.x)/2,y:(s.y+e.y)/2},null,!0,a)},isPartiallyOnScreen:function(s){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,a,!0,s)||this.getCoords(!0,s).every(function(r){return(r.x>=a.x||r.x<=e.x)&&(r.y>=a.y||r.y<=e.y)})&&this._containsCenterOfCanvas(e,a,s)},_getImageLines:function(s){return{topline:{o:s.tl,d:s.tr},rightline:{o:s.tr,d:s.br},bottomline:{o:s.br,d:s.bl},leftline:{o:s.bl,d:s.tl}}},_findCrossPoints:function(s,e){var l,r,h,g,v,m=0;for(var b in e)if(!((v=e[b]).o.y<s.y&&v.d.y<s.y||v.o.y>=s.y&&v.d.y>=s.y||(v.o.x===v.d.x&&v.o.x>=s.x?g=v.o.x:(l=(v.d.y-v.o.y)/(v.d.x-v.o.x),r=s.y-0*s.x,h=v.o.y-l*v.o.x,g=-(r-h)/(0-l)),g>=s.x&&(m+=1),2!==m)))break;return m},getBoundingRect:function(s,e){var a=this.getCoords(s,e);return o.makeBoundingBoxFromPoints(a)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(s){return Math.abs(s)<this.minScaleLimit?s<0?-this.minScaleLimit:this.minScaleLimit:0===s?1e-4:s},scale:function(s){return this._set("scaleX",s),this._set("scaleY",s),this.setCoords()},scaleToWidth:function(s,e){var a=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(s/this.width/a)},scaleToHeight:function(s,e){var a=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(s/this.height/a)},calcLineCoords:function(){var s=this.getViewportTransform(),e=this.padding,a=u(this.angle),h=o.cos(a)*e,g=o.sin(a)*e,m=h+g,v=h-g,b=this.calcACoords(),C={tl:n(b.tl,s),tr:n(b.tr,s),bl:n(b.bl,s),br:n(b.br,s)};return e&&(C.tl.x-=v,C.tl.y-=m,C.tr.x+=m,C.tr.y-=v,C.bl.x-=m,C.bl.y+=v,C.br.x+=v,C.br.y+=m),C},calcOCoords:function(){var s=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),a=this.getViewportTransform(),l=c(a,e),r=c(l,s),h=(r=c(r,[1/a[0],0,0,1/a[3],0,0]),this._calculateCurrentDimensions()),g={};return this.forEachControl(function(m,v,b){g[v]=m.positionHandler(h,r,b)}),g},calcACoords:function(){var s=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),a=c(e,s),l=this._getTransformedDimensions(),r=l.x/2,h=l.y/2;return{tl:n({x:-r,y:-h},a),tr:n({x:r,y:-h},a),bl:n({x:-r,y:h},a),br:n({x:r,y:h},a)}},setCoords:function(s){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),s||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return o.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var s=this.getCenterPoint();return[1,0,0,1,s.x,s.y]},transformMatrixKey:function(s){var e="_",a="";return!s&&this.group&&(a=this.group.transformMatrixKey(s)+e),a+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(s){var e=this.calcOwnMatrix();if(s||!this.group)return e;var a=this.transformMatrixKey(s),l=this.matrixCache||(this.matrixCache={});return l.key===a?l.value:(this.group&&(e=c(this.group.calcTransformMatrix(!1),e)),l.key=a,l.value=e,e)},calcOwnMatrix:function(){var s=this.transformMatrixKey(!0),e=this.ownMatrixCache||(this.ownMatrixCache={});if(e.key===s)return e.value;var a=this._calcTranslateMatrix(),l={angle:this.angle,translateX:a[4],translateY:a[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return e.key=s,e.value=o.composeMatrix(l),e.value},_getNonTransformedDimensions:function(){var s=this.strokeWidth;return{x:this.width+s,y:this.height+s}},_getTransformedDimensions:function(s,e){typeof s>"u"&&(s=this.skewX),typeof e>"u"&&(e=this.skewY);var a,l,r,h=0===s&&0===e;if(this.strokeUniform?(l=this.width,r=this.height):(l=(a=this._getNonTransformedDimensions()).x,r=a.y),h)return this._finalizeDimensions(l*this.scaleX,r*this.scaleY);var g=o.sizeAfterTransform(l,r,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:s,skewY:e});return this._finalizeDimensions(g.x,g.y)},_finalizeDimensions:function(s,e){return this.strokeUniform?{x:s+this.strokeWidth,y:e+this.strokeWidth}:{x:s,y:e}},_calculateCurrentDimensions:function(){var s=this.getViewportTransform(),e=this._getTransformedDimensions();return n(e,s,!0).scalarAdd(2*this.padding)}})}(),_.util.object.extend(_.Object.prototype,{sendToBack:function(){return this.group?_.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?_.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(p){return this.group?_.StaticCanvas.prototype.sendBackwards.call(this.group,this,p):this.canvas&&this.canvas.sendBackwards(this,p),this},bringForward:function(p){return this.group?_.StaticCanvas.prototype.bringForward.call(this.group,this,p):this.canvas&&this.canvas.bringForward(this,p),this},moveTo:function(p){return this.group&&"activeSelection"!==this.group.type?_.StaticCanvas.prototype.moveTo.call(this.group,this,p):this.canvas&&this.canvas.moveTo(this,p),this}}),function(){function p(u,c){if(c){if(c.toLive)return u+": url(#SVGID_"+c.id+"); ";var n=new _.Color(c),s=u+": "+n.toRgb()+"; ",e=n.getAlpha();return 1!==e&&(s+=u+"-opacity: "+e.toString()+"; "),s}return u+": none; "}var o=_.util.toFixed;_.util.object.extend(_.Object.prototype,{getSvgStyles:function(u){var c=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):"none",e=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",l=this.strokeLineJoin?this.strokeLineJoin:"miter",r=this.strokeMiterLimit?this.strokeMiterLimit:"4",h=typeof this.opacity<"u"?this.opacity:"1",g=this.visible?"":" visibility: hidden;",m=u?"":this.getSvgFilter(),v=p("fill",this.fill);return[p("stroke",this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",e,"; ","stroke-linejoin: ",l,"; ","stroke-miterlimit: ",r,"; ",v,"fill-rule: ",c,"; ","opacity: ",h,";",m,g].join("")},getSvgSpanStyles:function(u,c){var n="; ",e=u.fontFamily?"font-family: "+(-1===u.fontFamily.indexOf("'")&&-1===u.fontFamily.indexOf('"')?"'"+u.fontFamily+"'":u.fontFamily)+n:"",s=u.strokeWidth?"stroke-width: "+u.strokeWidth+n:"",a=u.fontSize?"font-size: "+u.fontSize+"px"+n:"",l=u.fontStyle?"font-style: "+u.fontStyle+n:"",r=u.fontWeight?"font-weight: "+u.fontWeight+n:"",h=u.fill?p("fill",u.fill):"",g=u.stroke?p("stroke",u.stroke):"",m=this.getSvgTextDecoration(u);return m&&(m="text-decoration: "+m+n),[g,s,e,a,l,r,m,h,u.deltaY?"baseline-shift: "+-u.deltaY+"; ":"",c?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(u){return["overline","underline","line-through"].filter(function(c){return u[c.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(u,c){var n=u?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+_.util.matrixToSVG(n)+(c||"")+'" '},_setSVGBg:function(u){if(this.backgroundColor){var c=_.Object.NUM_FRACTION_DIGITS;u.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',o(-this.width/2,c),'" y="',o(-this.height/2,c),'" width="',o(this.width,c),'" height="',o(this.height,c),'"></rect>\n')}},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(u),{reviver:u})},toClipPathSVG:function(u){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(u),{reviver:u})},_createBaseClipPathSVGMarkup:function(u,c){var n=(c=c||{}).reviver,e=[this.getSvgTransform(!0,c.additionalTransform||""),this.getSvgCommons()].join(""),a=u.indexOf("COMMON_PARTS");return u[a]=e,n?n(u.join("")):u.join("")},_createBaseSVGMarkup:function(u,c){var b,A,n=(c=c||{}).noStyle,s=c.reviver,e=n?"":'style="'+this.getSvgStyles()+'" ',a=c.withShadow?'style="'+this.getSvgFilter()+'" ':"",l=this.clipPath,r=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=l&&l.absolutePositioned,g=this.stroke,m=this.fill,v=this.shadow,C=[],F=u.indexOf("COMMON_PARTS"),G=c.additionalTransform;return l&&(l.clipPathId="CLIPPATH_"+_.Object.__uid++,A='<clipPath id="'+l.clipPathId+'" >\n'+l.toClipPathSVG(s)+"</clipPath>\n"),h&&C.push("<g ",a,this.getSvgCommons()," >\n"),C.push("<g ",this.getSvgTransform(!1),h?"":a+this.getSvgCommons()," >\n"),b=[e,r,n?"":this.addPaintOrder()," ",G?'transform="'+G+'" ':""].join(""),u[F]=b,m&&m.toLive&&C.push(m.toSVG(this)),g&&g.toLive&&C.push(g.toSVG(this)),v&&C.push(v.toSVG(this)),l&&C.push(A),C.push(u.join("")),C.push("</g>\n"),h&&C.push("</g>\n"),s?s(C.join("")):C.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var p=_.util.object.extend,o="stateProperties";function u(n,s,e){var a={};e.forEach(function(r){a[r]=n[r]}),p(n[s],a,!0)}function c(n,s,e){if(n===s)return!0;if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(var a=0,l=n.length;a<l;a++)if(!c(n[a],s[a]))return!1;return!0}if(n&&"object"==typeof n){var h,r=Object.keys(n);if(!s||"object"!=typeof s||!e&&r.length!==Object.keys(s).length)return!1;for(a=0,l=r.length;a<l;a++)if("canvas"!==(h=r[a])&&"group"!==h&&!c(n[h],s[h]))return!1;return!0}}_.util.object.extend(_.Object.prototype,{hasStateChanged:function(n){var s="_"+(n=n||o);return Object.keys(this[s]).length<this[n].length||!c(this[s],this,!0)},saveState:function(n){var s=n&&n.propertySet||o,e="_"+s;return this[e]?(u(this,e,this[s]),n&&n.stateProperties&&u(this,e,n.stateProperties),this):this.setupState(n)},setupState:function(n){var s=(n=n||{}).propertySet||o;return n.propertySet=s,this["_"+s]={},this.saveState(n),this}})}(),function(){var p=_.util.degreesToRadians;_.util.object.extend(_.Object.prototype,{_findTargetCorner:function(o,u){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var s,e,r,c=o.x,n=o.y,a=Object.keys(this.oCoords),l=a.length-1;for(this.__corner=0;l>=0;l--)if(this.isControlVisible(r=a[l])&&(e=this._getImageLines(u?this.oCoords[r].touchCorner:this.oCoords[r].corner),0!==(s=this._findCrossPoints({x:c,y:n},e))&&s%2==1))return this.__corner=r,r;return!1},forEachControl:function(o){for(var u in this.controls)o(this.controls[u],u,this)},_setCornerCoords:function(){var o=this.oCoords;for(var u in o){var c=this.controls[u];o[u].corner=c.calcCornerCoords(this.angle,this.cornerSize,o[u].x,o[u].y,!1),o[u].touchCorner=c.calcCornerCoords(this.angle,this.touchCornerSize,o[u].x,o[u].y,!0)}},drawSelectionBackground:function(o){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;o.save();var u=this.getCenterPoint(),c=this._calculateCurrentDimensions(),n=this.canvas.viewportTransform;return o.translate(u.x,u.y),o.scale(1/n[0],1/n[3]),o.rotate(p(this.angle)),o.fillStyle=this.selectionBackgroundColor,o.fillRect(-c.x/2,-c.y/2,c.x,c.y),o.restore(),this},drawBorders:function(o,u){u=u||{};var c=this._calculateCurrentDimensions(),n=this.borderScaleFactor,s=c.x+n,e=c.y+n,a=typeof u.hasControls<"u"?u.hasControls:this.hasControls,l=!1;return o.save(),o.strokeStyle=u.borderColor||this.borderColor,this._setLineDash(o,u.borderDashArray||this.borderDashArray),o.strokeRect(-s/2,-e/2,s,e),a&&(o.beginPath(),this.forEachControl(function(r,h,g){r.withConnection&&r.getVisibility(g,h)&&(l=!0,o.moveTo(r.x*s,r.y*e),o.lineTo(r.x*s+r.offsetX,r.y*e+r.offsetY))}),l&&o.stroke()),o.restore(),this},drawBordersInGroup:function(o,u,c){c=c||{};var n=_.util.sizeAfterTransform(this.width,this.height,u),s=this.strokeWidth,e=this.strokeUniform,a=this.borderScaleFactor,l=n.x+s*(e?this.canvas.getZoom():u.scaleX)+a,r=n.y+s*(e?this.canvas.getZoom():u.scaleY)+a;return o.save(),this._setLineDash(o,c.borderDashArray||this.borderDashArray),o.strokeStyle=c.borderColor||this.borderColor,o.strokeRect(-l/2,-r/2,l,r),o.restore(),this},drawControls:function(o,u){u=u||{},o.save();var n,s,c=this.canvas.getRetinaScaling();return o.setTransform(c,0,0,c,0,0),o.strokeStyle=o.fillStyle=u.cornerColor||this.cornerColor,this.transparentCorners||(o.strokeStyle=u.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(o,u.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(n=this.group.calcTransformMatrix()),this.forEachControl(function(e,a,l){s=l.oCoords[a],e.getVisibility(l,a)&&(n&&(s=_.util.transformPoint(s,n)),e.render(o,s.x,s.y,u,l))}),o.restore(),this},isControlVisible:function(o){return this.controls[o]&&this.controls[o].getVisibility(this,o)},setControlVisible:function(o,u){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[o]=u,this},setControlsVisibility:function(o){for(var u in o||(o={}),o)this.setControlVisible(u,o[u]);return this},onDeselect:function(){},onSelect:function(){}})}(),_.util.object.extend(_.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(p,o){var u=function(){},c=(o=o||{}).onComplete||u,n=o.onChange||u,s=this;return _.util.animate({target:this,startValue:p.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(e){p.set("left",e),s.requestRenderAll(),n()},onComplete:function(){p.setCoords(),c()}})},fxCenterObjectV:function(p,o){var u=function(){},c=(o=o||{}).onComplete||u,n=o.onChange||u,s=this;return _.util.animate({target:this,startValue:p.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(e){p.set("top",e),s.requestRenderAll(),n()},onComplete:function(){p.setCoords(),c()}})},fxRemove:function(p,o){var u=function(){},c=(o=o||{}).onComplete||u,n=o.onChange||u,s=this;return _.util.animate({target:this,startValue:p.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){p.set("opacity",e),s.requestRenderAll(),n()},onComplete:function(){s.remove(p),c()}})}}),_.util.object.extend(_.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var o,p=[],c=[];for(o in arguments[0])p.push(o);for(var n=0,s=p.length;n<s;n++)c.push(this._animate(o=p[n],arguments[0][o],arguments[1],n!==s-1));return c}return this._animate.apply(this,arguments)},_animate:function(p,o,u,c){var s,n=this;o=o.toString(),u=u?_.util.object.clone(u):{},~p.indexOf(".")&&(s=p.split("."));var e=n.colorProperties.indexOf(p)>-1||s&&n.colorProperties.indexOf(s[1])>-1,a=s?this.get(s[0])[s[1]]:this.get(p);"from"in u||(u.from=a),e||(o=~o.indexOf("=")?a+parseFloat(o.replace("=","")):parseFloat(o));var l={target:this,startValue:u.from,endValue:o,byValue:u.by,easing:u.easing,duration:u.duration,abort:u.abort&&function(r,h,g){return u.abort.call(n,r,h,g)},onChange:function(r,h,g){s?n[s[0]][s[1]]=r:n.set(p,r),!c&&u.onChange&&u.onChange(r,h,g)},onComplete:function(r,h,g){c||(n.setCoords(),u.onComplete&&u.onComplete(r,h,g))}};return e?_.util.animateColor(l.startValue,l.endValue,l.duration,l):_.util.animate(l)}}),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.util.object.extend,c=o.util.object.clone,n={x1:1,x2:1,y1:1,y2:1};function s(e,a){var l=e.origin,r=e.axis1,h=e.axis2,g=e.dimension,m=a.nearest,v=a.center,b=a.farthest;return function(){switch(this.get(l)){case m:return Math.min(this.get(r),this.get(h));case v:return Math.min(this.get(r),this.get(h))+.5*this.get(g);case b:return Math.max(this.get(r),this.get(h))}}}o.Line?o.warn("fabric.Line is already defined"):(o.Line=o.util.createClass(o.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:o.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(e,a){e||(e=[0,0,0,0]),this.callSuper("initialize",a),this.set("x1",e[0]),this.set("y1",e[1]),this.set("x2",e[2]),this.set("y2",e[3]),this._setWidthHeight(a)},_setWidthHeight:function(e){e||(e={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in e?e.left:this._getLeftToOriginX(),this.top="top"in e?e.top:this._getTopToOriginY()},_set:function(e,a){return this.callSuper("_set",e,a),typeof n[e]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:s({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:s({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(e){e.beginPath();var a=this.calcLinePoints();e.moveTo(a.x1,a.y1),e.lineTo(a.x2,a.y2),e.lineWidth=this.strokeWidth;var l=e.strokeStyle;e.strokeStyle=this.stroke||e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=l},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(e){return u(this.callSuper("toObject",e),this.calcLinePoints())},_getNonTransformedDimensions:function(){var e=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(e.y-=this.strokeWidth),0===this.height&&(e.x-=this.strokeWidth)),e},calcLinePoints:function(){var e=this.x1<=this.x2?-1:1,a=this.y1<=this.y2?-1:1;return{x1:e*this.width*.5,x2:e*this.width*-.5,y1:a*this.height*.5,y2:a*this.height*-.5}},_toSVG:function(){var e=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',e.x1,'" y1="',e.y1,'" x2="',e.x2,'" y2="',e.y2,'" />\n']}}),o.Line.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),o.Line.fromElement=function(e,a,l){l=l||{};var r=o.parseAttributes(e,o.Line.ATTRIBUTE_NAMES);a(new o.Line([r.x1||0,r.y1||0,r.x2||0,r.y2||0],u(r,l)))},o.Line.fromObject=function(e,a){var r=c(e,!0);r.points=[e.x1,e.y1,e.x2,e.y2],o.Object._fromObject("Line",r,function l(h){delete h.points,a&&a(h)},"points")})}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.util.degreesToRadians;o.Circle?o.warn("fabric.Circle is already defined."):(o.Circle=o.util.createClass(o.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:o.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(n,s){return this.callSuper("_set",n,s),"radius"===n&&this.setRadius(s),this},toObject:function(n){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(n))},_toSVG:function(){var n,a=(this.endAngle-this.startAngle)%360;if(0===a)n=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var l=u(this.startAngle),r=u(this.endAngle),h=this.radius;n=['<path d="M '+o.util.cos(l)*h+" "+o.util.sin(l)*h," A "+h+" "+h," 0 ",+(a>180?"1":"0")+" 1"," "+o.util.cos(r)*h+" "+o.util.sin(r)*h,'" ',"COMMON_PARTS"," />\n"]}return n},_render:function(n){n.beginPath(),n.arc(0,0,this.radius,u(this.startAngle),u(this.endAngle),!1),this._renderPaintInOrder(n)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(n){return this.radius=n,this.set("width",2*n).set("height",2*n)}}),o.Circle.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),o.Circle.fromElement=function(n,s){var e=o.parseAttributes(n,o.Circle.ATTRIBUTE_NAMES);if(!function c(n){return"radius"in n&&n.radius>=0}(e))throw new Error("value of `r` attribute is required and can not be negative");e.left=(e.left||0)-e.radius,e.top=(e.top||0)-e.radius,s(new o.Circle(e))},o.Circle.fromObject=function(n,s){o.Object._fromObject("Circle",n,s)})}(At),function(p){"use strict";var o=p.fabric||(p.fabric={});o.Triangle?o.warn("fabric.Triangle is already defined"):(o.Triangle=o.util.createClass(o.Object,{type:"triangle",width:100,height:100,_render:function(u){var c=this.width/2,n=this.height/2;u.beginPath(),u.moveTo(-c,n),u.lineTo(0,-n),u.lineTo(c,n),u.closePath(),this._renderPaintInOrder(u)},_toSVG:function(){var u=this.width/2,c=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-u+" "+c,"0 "+-c,u+" "+c].join(","),'" />']}}),o.Triangle.fromObject=function(u,c){return o.Object._fromObject("Triangle",u,c)})}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=2*Math.PI;o.Ellipse?o.warn("fabric.Ellipse is already defined."):(o.Ellipse=o.util.createClass(o.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this.set("rx",c&&c.rx||0),this.set("ry",c&&c.ry||0)},_set:function(c,n){switch(this.callSuper("_set",c,n),c){case"rx":this.rx=n,this.set("width",2*n);break;case"ry":this.ry=n,this.set("height",2*n)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(c){c.beginPath(),c.save(),c.transform(1,0,0,this.ry/this.rx,0,0),c.arc(0,0,this.rx,0,u,!1),c.restore(),this._renderPaintInOrder(c)}}),o.Ellipse.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),o.Ellipse.fromElement=function(c,n){var s=o.parseAttributes(c,o.Ellipse.ATTRIBUTE_NAMES);s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,n(new o.Ellipse(s))},o.Ellipse.fromObject=function(c,n){o.Object._fromObject("Ellipse",c,n)})}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.util.object.extend;o.Rect?o.warn("fabric.Rect is already defined"):(o.Rect=o.util.createClass(o.Object,{stateProperties:o.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(c){var n=this.rx?Math.min(this.rx,this.width/2):0,s=this.ry?Math.min(this.ry,this.height/2):0,e=this.width,a=this.height,l=-this.width/2,r=-this.height/2,h=0!==n||0!==s,g=.4477152502;c.beginPath(),c.moveTo(l+n,r),c.lineTo(l+e-n,r),h&&c.bezierCurveTo(l+e-g*n,r,l+e,r+g*s,l+e,r+s),c.lineTo(l+e,r+a-s),h&&c.bezierCurveTo(l+e,r+a-g*s,l+e-g*n,r+a,l+e-n,r+a),c.lineTo(l+n,r+a),h&&c.bezierCurveTo(l+g*n,r+a,l,r+a-g*s,l,r+a-s),c.lineTo(l,r+s),h&&c.bezierCurveTo(l,r+g*s,l+g*n,r,l+n,r),c.closePath(),this._renderPaintInOrder(c)},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),o.Rect.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),o.Rect.fromElement=function(c,n,s){if(!c)return n(null);s=s||{};var e=o.parseAttributes(c,o.Rect.ATTRIBUTE_NAMES);e.left=e.left||0,e.top=e.top||0,e.height=e.height||0,e.width=e.width||0;var a=new o.Rect(u(s?o.util.object.clone(s):{},e));a.visible=a.visible&&a.width>0&&a.height>0,n(a)},o.Rect.fromObject=function(c,n){return o.Object._fromObject("Rect",c,n)})}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.util.object.extend,c=o.util.array.min,n=o.util.array.max,s=o.util.toFixed,e=o.util.projectStrokeOnPoints;o.Polyline?o.warn("fabric.Polyline is already defined"):(o.Polyline=o.util.createClass(o.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:o.Object.prototype.cacheProperties.concat("points"),initialize:function(a,l){l=l||{},this.points=a||[],this.callSuper("initialize",l),this._setPositionDimensions(l)},_projectStrokeOnPoints:function(){return e(this.points,this,!0)},_setPositionDimensions:function(a){var r,l=this._calcDimensions(a),h=this.exactBoundingBox?this.strokeWidth:0;this.width=l.width-h,this.height=l.height-h,a.fromSVG||(r=this.translateToGivenOrigin({x:l.left-this.strokeWidth/2+h/2,y:l.top-this.strokeWidth/2+h/2},"left","top",this.originX,this.originY)),typeof a.left>"u"&&(this.left=a.fromSVG?l.left:r.x),typeof a.top>"u"&&(this.top=a.fromSVG?l.top:r.y),this.pathOffset={x:l.left+this.width/2+h/2,y:l.top+this.height/2+h/2}},_calcDimensions:function(){var a=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,l=c(a,"x")||0,r=c(a,"y")||0;return{left:l,top:r,width:(n(a,"x")||0)-l,height:(n(a,"y")||0)-r}},toObject:function(a){return u(this.callSuper("toObject",a),{points:this.points.concat()})},_toSVG:function(){for(var a=[],l=this.pathOffset.x,r=this.pathOffset.y,h=o.Object.NUM_FRACTION_DIGITS,g=0,m=this.points.length;g<m;g++)a.push(s(this.points[g].x-l,h),",",s(this.points[g].y-r,h)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',a.join(""),'" />\n']},commonRender:function(a){var l,r=this.points.length,h=this.pathOffset.x,g=this.pathOffset.y;if(!r||isNaN(this.points[r-1].y))return!1;a.beginPath(),a.moveTo(this.points[0].x-h,this.points[0].y-g);for(var m=0;m<r;m++)a.lineTo((l=this.points[m]).x-h,l.y-g);return!0},_render:function(a){this.commonRender(a)&&this._renderPaintInOrder(a)},complexity:function(){return this.get("points").length}}),o.Polyline.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polyline.fromElementGenerator=function(a){return function(l,r,h){if(!l)return r(null);h||(h={});var g=o.parsePointsAttribute(l.getAttribute("points")),m=o.parseAttributes(l,o[a].ATTRIBUTE_NAMES);m.fromSVG=!0,r(new o[a](g,u(m,h)))}},o.Polyline.fromElement=o.Polyline.fromElementGenerator("Polyline"),o.Polyline.fromObject=function(a,l){return o.Object._fromObject("Polyline",a,l,"points")})}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.util.projectStrokeOnPoints;o.Polygon?o.warn("fabric.Polygon is already defined"):(o.Polygon=o.util.createClass(o.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return u(this.points,this)},_render:function(c){this.commonRender(c)&&(c.closePath(),this._renderPaintInOrder(c))}}),o.Polygon.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polygon.fromElement=o.Polyline.fromElementGenerator("Polygon"),o.Polygon.fromObject=function(c,n){o.Object._fromObject("Polygon",c,n,"points")})}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.util.array.min,c=o.util.array.max,n=o.util.object.extend,s=o.util.object.clone,e=o.util.toFixed;o.Path?o.warn("fabric.Path is already defined"):(o.Path=o.util.createClass(o.Object,{type:"path",path:null,cacheProperties:o.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:o.Object.prototype.stateProperties.concat("path"),initialize:function(a,l){delete(l=s(l||{})).path,this.callSuper("initialize",l),this._setPath(a||[],l)},_setPath:function(a,l){this.path=o.util.makePathSimpler(Array.isArray(a)?a:o.util.parsePath(a)),o.Polyline.prototype._setPositionDimensions.call(this,l||{})},_renderPathCommands:function(a){var l,r=0,h=0,g=0,m=0,C=-this.pathOffset.x,A=-this.pathOffset.y;a.beginPath();for(var F=0,G=this.path.length;F<G;++F)switch(l=this.path[F],l[0]){case"L":a.lineTo((g=l[1])+C,(m=l[2])+A);break;case"M":r=g=l[1],h=m=l[2],a.moveTo(g+C,m+A);break;case"C":a.bezierCurveTo(l[1]+C,l[2]+A,l[3]+C,l[4]+A,(g=l[5])+C,(m=l[6])+A);break;case"Q":a.quadraticCurveTo(l[1]+C,l[2]+A,l[3]+C,l[4]+A),g=l[3],m=l[4];break;case"z":case"Z":g=r,m=h,a.closePath()}},_render:function(a){this._renderPathCommands(a),this._renderPaintInOrder(a)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(a){return n(this.callSuper("toObject",a),{path:this.path.map(function(l){return l.slice()})})},toDatalessObject:function(a){var l=this.toObject(["sourcePath"].concat(a));return l.sourcePath&&delete l.path,l},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',o.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var a=o.Object.NUM_FRACTION_DIGITS;return" translate("+e(-this.pathOffset.x,a)+", "+e(-this.pathOffset.y,a)+")"},toClipPathSVG:function(a){var l=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:a,additionalTransform:l})},toSVG:function(a){var l=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:a,additionalTransform:l})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var r,b,a=[],l=[],h=0,g=0,m=0,v=0,C=0,A=this.path.length;C<A;++C){switch((r=this.path[C])[0]){case"L":m=r[1],v=r[2],b=[];break;case"M":h=m=r[1],g=v=r[2],b=[];break;case"C":b=o.util.getBoundsOfCurve(m,v,r[1],r[2],r[3],r[4],r[5],r[6]),m=r[5],v=r[6];break;case"Q":b=o.util.getBoundsOfCurve(m,v,r[1],r[2],r[1],r[2],r[3],r[4]),m=r[3],v=r[4];break;case"z":case"Z":m=h,v=g}b.forEach(function(ht){a.push(ht.x),l.push(ht.y)}),a.push(m),l.push(v)}var F=u(a)||0,G=u(l)||0;return{left:F,top:G,width:(c(a)||0)-F,height:(c(l)||0)-G}}}),o.Path.fromObject=function(a,l){"string"==typeof a.sourcePath?o.loadSVGFromURL(a.sourcePath,function(h){var g=h[0];g.setOptions(a),a.clipPath?o.util.enlivenObjects([a.clipPath],function(m){g.clipPath=m[0],l&&l(g)}):l&&l(g)}):o.Object._fromObject("Path",a,l,"path")},o.Path.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(["d"]),o.Path.fromElement=function(a,l,r){var h=o.parseAttributes(a,o.Path.ATTRIBUTE_NAMES);h.fromSVG=!0,l(new o.Path(h.d,n(h,r)))})}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.util.array.min,c=o.util.array.max;o.Group||(o.Group=o.util.createClass(o.Object,o.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(n,s,e){s=s||{},this._objects=[],e&&this.callSuper("initialize",s),this._objects=n||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;if(e)this._updateObjectsACoords();else{var l=s&&s.centerPoint;void 0!==s.originX&&(this.originX=s.originX),void 0!==s.originY&&(this.originY=s.originY),l||this._calcBounds(),this._updateObjectsCoords(l),delete s.centerPoint,this.callSuper("initialize",s)}this.setCoords()},_updateObjectsACoords:function(){for(var s=this._objects.length;s--;)this._objects[s].setCoords(!0)},_updateObjectsCoords:function(s){s=s||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],s)},_updateObjectCoords:function(n,s){n.set({left:n.left-s.x,top:n.top-s.y}),n.group=this,n.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(n){var s=!!this.group;return this._restoreObjectsState(),o.util.resetObjectTransform(this),n&&(s&&o.util.removeTransformFromObject(n,this.group.calcTransformMatrix()),this._objects.push(n),n.group=this,n._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,s?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(n){return this._restoreObjectsState(),o.util.resetObjectTransform(this),this.remove(n),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(n){this.dirty=!0,n.group=this,n._set("canvas",this.canvas)},_onObjectRemoved:function(n){this.dirty=!0,delete n.group},_set:function(n,s){var e=this._objects.length;if(this.useSetOnGroup)for(;e--;)this._objects[e].setOnGroup(n,s);if("canvas"===n)for(;e--;)this._objects[e]._set(n,s);o.Object.prototype._set.call(this,n,s)},toObject:function(n){var s=this.includeDefaultValues,e=this._objects.filter(function(l){return!l.excludeFromExport}).map(function(l){var r=l.includeDefaultValues;l.includeDefaultValues=s;var h=l.toObject(n);return l.includeDefaultValues=r,h}),a=o.Object.prototype.toObject.call(this,n);return a.objects=e,a},toDatalessObject:function(n){var s,e=this.sourcePath;if(e)s=e;else{var a=this.includeDefaultValues;s=this._objects.map(function(r){var h=r.includeDefaultValues;r.includeDefaultValues=a;var g=r.toDatalessObject(n);return r.includeDefaultValues=h,g})}var l=o.Object.prototype.toDatalessObject.call(this,n);return l.objects=s,l},render:function(n){this._transformDone=!0,this.callSuper("render",n),this._transformDone=!1},shouldCache:function(){var n=o.Object.prototype.shouldCache.call(this);if(n)for(var s=0,e=this._objects.length;s<e;s++)if(this._objects[s].willDrawShadow())return this.ownCaching=!1,!1;return n},willDrawShadow:function(){if(o.Object.prototype.willDrawShadow.call(this))return!0;for(var n=0,s=this._objects.length;n<s;n++)if(this._objects[n].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(n){for(var s=0,e=this._objects.length;s<e;s++)this._objects[s].render(n);this._drawClipPath(n,this.clipPath)},isCacheDirty:function(n){if(this.callSuper("isCacheDirty",n))return!0;if(!this.statefullCache)return!1;for(var s=0,e=this._objects.length;s<e;s++)if(this._objects[s].isCacheDirty(!0)){if(this._cacheCanvas){var a=this.cacheWidth/this.zoomX,l=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-a/2,-l/2,a,l)}return!0}return!1},_restoreObjectsState:function(){var n=this.calcOwnMatrix();return this._objects.forEach(function(s){o.util.addTransformToObject(s,n),delete s.group,s.setCoords()}),this},destroy:function(){return this._objects.forEach(function(n){n.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(n){n.dispose&&n.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var n=this._objects,s=this.canvas;this._objects=[];var e=this.toObject();delete e.objects;var a=new o.ActiveSelection([]);return a.set(e),a.type="activeSelection",s.remove(this),n.forEach(function(l){l.group=a,l.dirty=!0,s.add(l)}),a.canvas=s,a._objects=n,s._activeObject=a,a.setCoords(),a}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(s){s.setCoords(!0)}),this},_calcBounds:function(n){for(var a,l,r,v,s=[],e=[],h=["tr","br","bl","tl"],g=0,m=this._objects.length,b=h.length;g<m;++g){for(r=(a=this._objects[g]).calcACoords(),v=0;v<b;v++)s.push(r[l=h[v]].x),e.push(r[l].y);a.aCoords=r}this._getBounds(s,e,n)},_getBounds:function(n,s,e){var a=new o.Point(u(n),u(s)),l=new o.Point(c(n),c(s)),r=a.y||0,h=a.x||0,m=l.y-a.y||0;this.width=l.x-a.x||0,this.height=m,e||this.setPositionByOrigin({x:h,y:r},"left","top")},_toSVG:function(n){for(var s=["<g ","COMMON_PARTS"," >\n"],e=0,a=this._objects.length;e<a;e++)s.push("\t\t",this._objects[e].toSVG(n));return s.push("</g>\n"),s},getSvgStyles:function(){var s=this.visible?"":" visibility: hidden;";return[typeof this.opacity<"u"&&1!==this.opacity?"opacity: "+this.opacity+";":"",this.getSvgFilter(),s].join("")},toClipPathSVG:function(n){for(var s=[],e=0,a=this._objects.length;e<a;e++)s.push("\t",this._objects[e].toClipPathSVG(n));return this._createBaseClipPathSVGMarkup(s,{reviver:n})}}),o.Group.fromObject=function(n,s){var e=n.objects,a=o.util.object.clone(n,!0);delete a.objects,"string"!=typeof e?o.util.enlivenObjects(e,function(l){o.util.enlivenObjectEnlivables(n,a,function(){s&&s(new o.Group(l,a,!0))})}):o.loadSVGFromURL(e,function(l){var r=o.util.groupSVGElements(l,n,e),h=a.clipPath;delete a.clipPath,r.set(a),h?o.util.enlivenObjects([h],function(g){r.clipPath=g[0],s&&s(r)}):s&&s(r)})})}(At),function(p){"use strict";var o=p.fabric||(p.fabric={});o.ActiveSelection||(o.ActiveSelection=o.util.createClass(o.Group,{type:"activeSelection",initialize:function(u,c){c=c||{},this._objects=u||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;c.originX&&(this.originX=c.originX),c.originY&&(this.originY=c.originY),this._calcBounds(),this._updateObjectsCoords(),o.Object.prototype.initialize.call(this,c),this.setCoords()},toGroup:function(){var u=this._objects.concat();this._objects=[];var c=o.Object.prototype.toObject.call(this),n=new o.Group([]);if(delete c.type,n.set(c),u.forEach(function(e){e.canvas.remove(e),e.group=n}),n._objects=u,!this.canvas)return n;var s=this.canvas;return s.add(n),s._activeObject=n,n.setCoords(),n},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(u,c,n){u.save(),u.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",u,c),typeof(n=n||{}).hasControls>"u"&&(n.hasControls=!1),n.forActiveSelection=!0;for(var s=0,e=this._objects.length;s<e;s++)this._objects[s]._renderControls(u,n);u.restore()}}),o.ActiveSelection.fromObject=function(u,c){o.util.enlivenObjects(u.objects,function(n){delete u.objects,c&&c(new o.ActiveSelection(n,u,!0))})})}(At),function(p){"use strict";var o=_.util.object.extend;p.fabric||(p.fabric={}),p.fabric.Image?_.warn("fabric.Image is already defined."):(_.Image=_.util.createClass(_.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:_.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:_.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(u,c){c||(c={}),this.filters=[],this.cacheKey="texture"+_.Object.__uid++,this.callSuper("initialize",c),this._initElement(u,c)},getElement:function(){return this._element||{}},setElement:function(u,c){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=u,this._originalElement=u,this._initConfig(c),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(u){var c=_.filterBackend;c&&c.evictCachesForKey&&c.evictCachesForKey(u)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(u){_.util.cleanUpJsdomNode(this[u]),this[u]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var u=this.getElement();return{width:u.naturalWidth||u.width,height:u.naturalHeight||u.height}},_stroke:function(u){if(this.stroke&&0!==this.strokeWidth){var c=this.width/2,n=this.height/2;u.beginPath(),u.moveTo(-c,-n),u.lineTo(c,-n),u.lineTo(c,n),u.lineTo(-c,n),u.lineTo(-c,-n),u.closePath()}},toObject:function(u){var c=[];this.filters.forEach(function(s){s&&c.push(s.toObject())});var n=o(this.callSuper("toObject",["cropX","cropY"].concat(u)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:c});return this.resizeFilter&&(n.resizeFilter=this.resizeFilter.toObject()),n},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var n,u=[],c=[],s=this._element,e=-this.width/2,a=-this.height/2,l="",r="";if(!s)return[];if(this.hasCrop()){var h=_.Object.__uid++;u.push('<clipPath id="imageCrop_'+h+'">\n','\t<rect x="'+e+'" y="'+a+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),l=' clip-path="url(#imageCrop_'+h+')" '}if(this.imageSmoothing||(r='" image-rendering="optimizeSpeed'),c.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',e-this.cropX,'" y="',a-this.cropY,'" width="',s.width||s.naturalWidth,'" height="',s.height||s.height,r,'"',l,"></image>\n"),this.stroke||this.strokeDashArray){var g=this.fill;this.fill=null,n=["\t<rect ",'x="',e,'" y="',a,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=g}return"fill"!==this.paintFirst?u.concat(n,c):u.concat(c,n)},getSrc:function(u){var c=u?this._element:this._originalElement;return c?c.toDataURL?c.toDataURL():this.srcFromAttribute?c.getAttribute("src"):c.src:this.src||""},setSrc:function(u,c,n){return _.util.loadImage(u,function(s,e){this.setElement(s,n),this._setWidthHeight(),c&&c(this,e)},this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var u=this.resizeFilter,c=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),s=n.scaleX,e=n.scaleY,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!u||s>c&&e>c)return this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=e);_.filterBackend||(_.filterBackend=_.initFilterBackend());var l=_.util.createCanvasElement(),r=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,h=a.width,g=a.height;l.width=h,l.height=g,this._element=l,this._lastScaleX=u.scaleX=s,this._lastScaleY=u.scaleY=e,_.filterBackend.applyFilters([u],a,h,g,this._element,r),this._filterScalingX=l.width/this._originalElement.width,this._filterScalingY=l.height/this._originalElement.height},applyFilters:function(u){if(u=(u=u||this.filters||[]).filter(function(a){return a&&!a.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===u.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var c=this._originalElement,n=c.naturalWidth||c.width,s=c.naturalHeight||c.height;if(this._element===this._originalElement){var e=_.util.createCanvasElement();e.width=n,e.height=s,this._element=e,this._filteredEl=e}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,s),this._lastScaleX=1,this._lastScaleY=1;return _.filterBackend||(_.filterBackend=_.initFilterBackend()),_.filterBackend.applyFilters(u,this._originalElement,n,s,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(u){_.util.setImageSmoothing(u,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(u),this._renderPaintInOrder(u)},drawCacheOnCanvas:function(u){_.util.setImageSmoothing(u,this.imageSmoothing),_.Object.prototype.drawCacheOnCanvas.call(this,u)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(u){var c=this._element;if(c){var n=this._filterScalingX,s=this._filterScalingY,e=this.width,a=this.height,l=Math.min,r=Math.max,h=r(this.cropX,0),g=r(this.cropY,0),m=c.naturalWidth||c.width,v=c.naturalHeight||c.height,b=h*n,C=g*s,A=l(e*n,m-b),F=l(a*s,v-C),G=-e/2,ot=-a/2,ut=l(e,m/n-h),gt=l(a,v/s-g);c&&u.drawImage(c,b,C,A,F,G,ot,ut,gt)}},_needsResize:function(){var u=this.getTotalObjectScaling();return u.scaleX!==this._lastScaleX||u.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(u,c){this.setElement(_.util.getById(u),c),_.util.addClass(this.getElement(),_.Image.CSS_CANVAS)},_initConfig:function(u){u||(u={}),this.setOptions(u),this._setWidthHeight(u)},_initFilters:function(u,c){u&&u.length?_.util.enlivenObjects(u,function(n){c&&c(n)},"fabric.Image.filters"):c&&c()},_setWidthHeight:function(u){u||(u={});var c=this.getElement();this.width=u.width||c.naturalWidth||c.width||0,this.height=u.height||c.naturalHeight||c.height||0},parsePreserveAspectRatioAttribute:function(){var g,u=_.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),c=this._element.width,n=this._element.height,s=1,e=1,a=0,l=0,r=0,h=0,m=this.width,v=this.height,b={width:m,height:v};return!u||"none"===u.alignX&&"none"===u.alignY?(s=m/c,e=v/n):("meet"===u.meetOrSlice&&(g=(m-c*(s=e=_.util.findScaleToFit(this._element,b)))/2,"Min"===u.alignX&&(a=-g),"Max"===u.alignX&&(a=g),g=(v-n*e)/2,"Min"===u.alignY&&(l=-g),"Max"===u.alignY&&(l=g)),"slice"===u.meetOrSlice&&(g=c-m/(s=e=_.util.findScaleToCover(this._element,b)),"Mid"===u.alignX&&(r=g/2),"Max"===u.alignX&&(r=g),g=n-v/e,"Mid"===u.alignY&&(h=g/2),"Max"===u.alignY&&(h=g),c=m/s,n=v/e)),{width:c,height:n,scaleX:s,scaleY:e,offsetLeft:a,offsetTop:l,cropX:r,cropY:h}}}),_.Image.CSS_CANVAS="canvas-img",_.Image.prototype.getSvgSrc=_.Image.prototype.getSrc,_.Image.fromObject=function(u,c){var n=_.util.object.clone(u);_.util.loadImage(n.src,function(s,e){e?c&&c(null,!0):_.Image.prototype._initFilters.call(n,n.filters,function(a){n.filters=a||[],_.Image.prototype._initFilters.call(n,[n.resizeFilter],function(l){n.resizeFilter=l[0],_.util.enlivenObjectEnlivables(n,n,function(){var r=new _.Image(s,n);c(r,!1)})})})},null,n.crossOrigin)},_.Image.fromURL=function(u,c,n){_.util.loadImage(u,function(s,e){c&&c(new _.Image(s,n),e)},null,n&&n.crossOrigin)},_.Image.ATTRIBUTE_NAMES=_.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),_.Image.fromElement=function(u,c,n){var s=_.parseAttributes(u,_.Image.ATTRIBUTE_NAMES);_.Image.fromURL(s["xlink:href"],c,o(n?_.util.object.clone(n):{},s))})}(At),_.util.object.extend(_.Object.prototype,{_getAngleValueForStraighten:function(){var p=this.angle%360;return p>0?90*Math.round((p-1)/90):90*Math.round(p/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(p){var o=function(){},u=(p=p||{}).onComplete||o,c=p.onChange||o,n=this;return _.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(s){n.rotate(s),c()},onComplete:function(){n.setCoords(),u()}})}}),_.util.object.extend(_.StaticCanvas.prototype,{straightenObject:function(p){return p.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(p){return p.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";function p(u,c){var n="precision "+c+" float;\nvoid main(){}",s=u.createShader(u.FRAGMENT_SHADER);return u.shaderSource(s,n),u.compileShader(s),!!u.getShaderParameter(s,u.COMPILE_STATUS)}function o(u){u&&u.tileSize&&(this.tileSize=u.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}_.isWebglSupported=function(u){if(_.isLikelyNode)return!1;u=u||_.WebglFilterBackend.prototype.tileSize;var c=document.createElement("canvas"),n=c.getContext("webgl")||c.getContext("experimental-webgl"),s=!1;if(n){_.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),s=_.maxTextureSize>=u;for(var e=["highp","mediump","lowp"],a=0;a<3;a++)if(p(n,e[a])){_.webGlPrecision=e[a];break}}return this.isSupported=s,s},_.WebglFilterBackend=o,o.prototype={tileSize:2048,resources:{},setupGLContext:function(u,c){this.dispose(),this.createWebGLCanvas(u,c),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(u,c)},chooseFastestCopyGLTo2DMethod:function(u,c){var s,n=typeof window.performance<"u";try{new ImageData(1,1),s=!0}catch{s=!1}var e=typeof ArrayBuffer<"u",a=typeof Uint8ClampedArray<"u";if(n&&s&&e&&a){var l=_.util.createCanvasElement(),r=new ArrayBuffer(u*c*4);if(_.forceGLPutImageData)return this.imageBuffer=r,void(this.copyGLTo2D=de);var g,m,h={imageBuffer:r,destinationWidth:u,destinationHeight:c,targetCanvas:l};l.width=u,l.height=c,g=window.performance.now(),yi.call(h,this.gl,h),m=window.performance.now()-g,g=window.performance.now(),de.call(h,this.gl,h),m>window.performance.now()-g?(this.imageBuffer=r,this.copyGLTo2D=de):this.copyGLTo2D=yi}},createWebGLCanvas:function(u,c){var n=_.util.createCanvasElement();n.width=u,n.height=c;var s={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},e=n.getContext("webgl",s);e||(e=n.getContext("experimental-webgl",s)),e&&(e.clearColor(0,0,0,0),this.canvas=n,this.gl=e)},applyFilters:function(u,c,n,s,e,a){var r,l=this.gl;a&&(r=this.getCachedTexture(a,c));var h={originalWidth:c.width||c.originalWidth,originalHeight:c.height||c.originalHeight,sourceWidth:n,sourceHeight:s,destinationWidth:n,destinationHeight:s,context:l,sourceTexture:this.createTexture(l,n,s,!r&&c),targetTexture:this.createTexture(l,n,s),originalTexture:r||this.createTexture(l,n,s,!r&&c),passes:u.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:e},g=l.createFramebuffer();return l.bindFramebuffer(l.FRAMEBUFFER,g),u.forEach(function(m){m&&m.applyTo(h)}),function Ve(p){var o=p.targetCanvas,n=p.destinationWidth,s=p.destinationHeight;(o.width!==n||o.height!==s)&&(o.width=n,o.height=s)}(h),this.copyGLTo2D(l,h),l.bindTexture(l.TEXTURE_2D,null),l.deleteTexture(h.sourceTexture),l.deleteTexture(h.targetTexture),l.deleteFramebuffer(g),e.getContext("2d").setTransform(1,0,0,1,0,0),h},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(u,c,n,s,e){var a=u.createTexture();return u.bindTexture(u.TEXTURE_2D,a),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e||u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,e||u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),s?u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,s):u.texImage2D(u.TEXTURE_2D,0,u.RGBA,c,n,0,u.RGBA,u.UNSIGNED_BYTE,null),a},getCachedTexture:function(u,c){if(this.textureCache[u])return this.textureCache[u];var n=this.createTexture(this.gl,c.width,c.height,c);return this.textureCache[u]=n,n},evictCachesForKey:function(u){this.textureCache[u]&&(this.gl.deleteTexture(this.textureCache[u]),delete this.textureCache[u])},copyGLTo2D:yi,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var u=this.gl,c={renderer:"",vendor:""};if(!u)return c;var n=u.getExtension("WEBGL_debug_renderer_info");if(n){var s=u.getParameter(n.UNMASKED_RENDERER_WEBGL),e=u.getParameter(n.UNMASKED_VENDOR_WEBGL);s&&(c.renderer=s.toLowerCase()),e&&(c.vendor=e.toLowerCase())}return this.gpuInfo=c,c}}}(),function(){"use strict";var p=function(){};function o(){}_.Canvas2dFilterBackend=o,o.prototype={evictCachesForKey:p,dispose:p,clearWebGLCaches:p,resources:{},applyFilters:function(u,c,n,s,e){var a=e.getContext("2d");a.drawImage(c,0,0,n,s);var h={sourceWidth:n,sourceHeight:s,imageData:a.getImageData(0,0,n,s),originalEl:c,originalImageData:a.getImageData(0,0,n,s),canvasEl:e,ctx:a,filterBackend:this};return u.forEach(function(g){g.applyTo(h)}),(h.imageData.width!==n||h.imageData.height!==s)&&(e.width=h.imageData.width,e.height=h.imageData.height),a.putImageData(h.imageData,0,0),h}}}(),_.Image=_.Image||{},_.Image.filters=_.Image.filters||{},_.Image.filters.BaseFilter=_.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(p){p&&this.setOptions(p)},setOptions:function(p){for(var o in p)this[o]=p[o]},createProgram:function(p,o,u){o=o||this.fragmentSource,u=u||this.vertexSource,"highp"!==_.webGlPrecision&&(o=o.replace(/precision highp float/g,"precision "+_.webGlPrecision+" float"));var c=p.createShader(p.VERTEX_SHADER);if(p.shaderSource(c,u),p.compileShader(c),!p.getShaderParameter(c,p.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+p.getShaderInfoLog(c));var n=p.createShader(p.FRAGMENT_SHADER);if(p.shaderSource(n,o),p.compileShader(n),!p.getShaderParameter(n,p.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+p.getShaderInfoLog(n));var s=p.createProgram();if(p.attachShader(s,c),p.attachShader(s,n),p.linkProgram(s),!p.getProgramParameter(s,p.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+p.getProgramInfoLog(s));var e=this.getAttributeLocations(p,s),a=this.getUniformLocations(p,s)||{};return a.uStepW=p.getUniformLocation(s,"uStepW"),a.uStepH=p.getUniformLocation(s,"uStepH"),{program:s,attributeLocations:e,uniformLocations:a}},getAttributeLocations:function(p,o){return{aPosition:p.getAttribLocation(o,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(p,o,u){var c=o.aPosition,n=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,n),p.enableVertexAttribArray(c),p.vertexAttribPointer(c,2,p.FLOAT,!1,0,0),p.bufferData(p.ARRAY_BUFFER,u,p.STATIC_DRAW)},_setupFrameBuffer:function(p){var u,c,o=p.context;p.passes>1?(c=p.destinationHeight,(p.sourceWidth!==(u=p.destinationWidth)||p.sourceHeight!==c)&&(o.deleteTexture(p.targetTexture),p.targetTexture=p.filterBackend.createTexture(o,u,c)),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,p.targetTexture,0)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.finish())},_swapTextures:function(p){p.passes--,p.pass++;var o=p.targetTexture;p.targetTexture=p.sourceTexture,p.sourceTexture=o},isNeutralState:function(){var p=this.mainParameter,o=_.Image.filters[this.type].prototype;if(p){if(Array.isArray(o[p])){for(var u=o[p].length;u--;)if(this[p][u]!==o[p][u])return!1;return!0}return o[p]===this[p]}return!1},applyTo:function(p){p.webgl?(this._setupFrameBuffer(p),this.applyToWebGL(p),this._swapTextures(p)):this.applyTo2d(p)},retrieveShader:function(p){return p.programCache.hasOwnProperty(this.type)||(p.programCache[this.type]=this.createProgram(p.context)),p.programCache[this.type]},applyToWebGL:function(p){var o=p.context,u=this.retrieveShader(p);o.bindTexture(o.TEXTURE_2D,0===p.pass&&p.originalTexture?p.originalTexture:p.sourceTexture),o.useProgram(u.program),this.sendAttributeData(o,u.attributeLocations,p.aPosition),o.uniform1f(u.uniformLocations.uStepW,1/p.sourceWidth),o.uniform1f(u.uniformLocations.uStepH,1/p.sourceHeight),this.sendUniformData(o,u.uniformLocations),o.viewport(0,0,p.destinationWidth,p.destinationHeight),o.drawArrays(o.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(p,o,u){p.activeTexture(u),p.bindTexture(p.TEXTURE_2D,o),p.activeTexture(p.TEXTURE0)},unbindAdditionalTexture:function(p,o){p.activeTexture(o),p.bindTexture(p.TEXTURE_2D,null),p.activeTexture(p.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(p){this[this.mainParameter]=p},sendUniformData:function(){},createHelpLayer:function(p){if(!p.helpLayer){var o=document.createElement("canvas");o.width=p.sourceWidth,o.height=p.sourceHeight,p.helpLayer=o}},toObject:function(){var p={type:this.type},o=this.mainParameter;return o&&(p[o]=this[o]),p},toJSON:function(){return this.toObject()}}),_.Image.filters.BaseFilter.fromObject=function(p,o){var u=new _.Image.filters[p.type](p);return o&&o(u),u},function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.Image.filters;u.ColorMatrix=(0,o.util.createClass)(u.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(n){this.callSuper("initialize",n),this.matrix=this.matrix.slice(0)},applyTo2d:function(n){var r,h,g,m,v,e=n.imageData.data,a=e.length,l=this.matrix,b=this.colorsOnly;for(v=0;v<a;v+=4)r=e[v],h=e[v+1],g=e[v+2],b?(e[v]=r*l[0]+h*l[1]+g*l[2]+255*l[4],e[v+1]=r*l[5]+h*l[6]+g*l[7]+255*l[9],e[v+2]=r*l[10]+h*l[11]+g*l[12]+255*l[14]):(e[v]=r*l[0]+h*l[1]+g*l[2]+(m=e[v+3])*l[3]+255*l[4],e[v+1]=r*l[5]+h*l[6]+g*l[7]+m*l[8]+255*l[9],e[v+2]=r*l[10]+h*l[11]+g*l[12]+m*l[13]+255*l[14],e[v+3]=r*l[15]+h*l[16]+g*l[17]+m*l[18]+255*l[19])},getUniformLocations:function(n,s){return{uColorMatrix:n.getUniformLocation(s,"uColorMatrix"),uConstants:n.getUniformLocation(s,"uConstants")}},sendUniformData:function(n,s){var e=this.matrix,l=[e[4],e[9],e[14],e[19]];n.uniformMatrix4fv(s.uColorMatrix,!1,[e[0],e[1],e[2],e[3],e[5],e[6],e[7],e[8],e[10],e[11],e[12],e[13],e[15],e[16],e[17],e[18]]),n.uniform4fv(s.uConstants,l)}}),o.Image.filters.ColorMatrix.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.Image.filters;u.Brightness=(0,o.util.createClass)(u.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(n){if(0!==this.brightness){var a,e=n.imageData.data,l=e.length,r=Math.round(255*this.brightness);for(a=0;a<l;a+=4)e[a]=e[a]+r,e[a+1]=e[a+1]+r,e[a+2]=e[a+2]+r}},getUniformLocations:function(n,s){return{uBrightness:n.getUniformLocation(s,"uBrightness")}},sendUniformData:function(n,s){n.uniform1f(s.uBrightness,this.brightness)}}),o.Image.filters.Brightness.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.util.object.extend,c=o.Image.filters;c.Convolute=(0,o.util.createClass)(c.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(s){var e=Math.sqrt(this.matrix.length),a=this.type+"_"+e+"_"+(this.opaque?1:0),l=this.fragmentSource[a];return s.programCache.hasOwnProperty(a)||(s.programCache[a]=this.createProgram(s.context,l)),s.programCache[a]},applyTo2d:function(s){var A,F,G,ot,ut,gt,_t,ht,ft,bt,wt,vt,k,e=s.imageData,a=e.data,l=this.matrix,r=Math.round(Math.sqrt(l.length)),h=Math.floor(r/2),g=e.width,m=e.height,v=s.ctx.createImageData(g,m),b=v.data,C=this.opaque?1:0;for(wt=0;wt<m;wt++)for(bt=0;bt<g;bt++){for(ut=4*(wt*g+bt),A=0,F=0,G=0,ot=0,k=0;k<r;k++)for(vt=0;vt<r;vt++)gt=bt+vt-h,!((_t=wt+k-h)<0||_t>=m||gt<0||gt>=g)&&(A+=a[ht=4*(_t*g+gt)]*(ft=l[k*r+vt]),F+=a[ht+1]*ft,G+=a[ht+2]*ft,C||(ot+=a[ht+3]*ft));b[ut]=A,b[ut+1]=F,b[ut+2]=G,b[ut+3]=C?a[ut+3]:ot}s.imageData=v},getUniformLocations:function(s,e){return{uMatrix:s.getUniformLocation(e,"uMatrix"),uOpaque:s.getUniformLocation(e,"uOpaque"),uHalfSize:s.getUniformLocation(e,"uHalfSize"),uSize:s.getUniformLocation(e,"uSize")}},sendUniformData:function(s,e){s.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return u(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),o.Image.filters.Convolute.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.Image.filters;u.Grayscale=(0,o.util.createClass)(u.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(n){var a,r,e=n.imageData.data,l=e.length,h=this.mode;for(a=0;a<l;a+=4)"average"===h?r=(e[a]+e[a+1]+e[a+2])/3:"lightness"===h?r=(Math.min(e[a],e[a+1],e[a+2])+Math.max(e[a],e[a+1],e[a+2]))/2:"luminosity"===h&&(r=.21*e[a]+.72*e[a+1]+.07*e[a+2]),e[a]=r,e[a+1]=r,e[a+2]=r},retrieveShader:function(n){var s=this.type+"_"+this.mode;return n.programCache.hasOwnProperty(s)||(n.programCache[s]=this.createProgram(n.context,this.fragmentSource[this.mode])),n.programCache[s]},getUniformLocations:function(n,s){return{uMode:n.getUniformLocation(s,"uMode")}},sendUniformData:function(n,s){n.uniform1i(s.uMode,1)},isNeutralState:function(){return!1}}),o.Image.filters.Grayscale.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.Image.filters;u.Invert=(0,o.util.createClass)(u.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(n){var a,e=n.imageData.data,l=e.length;for(a=0;a<l;a+=4)e[a]=255-e[a],e[a+1]=255-e[a+1],e[a+2]=255-e[a+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(n,s){return{uInvert:n.getUniformLocation(s,"uInvert")}},sendUniformData:function(n,s){n.uniform1i(s.uInvert,this.invert)}}),o.Image.filters.Invert.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.util.object.extend,c=o.Image.filters;c.Noise=(0,o.util.createClass)(c.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(s){if(0!==this.noise){var l,r,g,a=s.imageData.data,h=this.noise;for(l=0,r=a.length;l<r;l+=4)g=(.5-Math.random())*h,a[l]+=g,a[l+1]+=g,a[l+2]+=g}},getUniformLocations:function(s,e){return{uNoise:s.getUniformLocation(e,"uNoise"),uSeed:s.getUniformLocation(e,"uSeed")}},sendUniformData:function(s,e){s.uniform1f(e.uNoise,this.noise/255),s.uniform1f(e.uSeed,Math.random())},toObject:function(){return u(this.callSuper("toObject"),{noise:this.noise})}}),o.Image.filters.Noise.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.Image.filters;u.Pixelate=(0,o.util.createClass)(u.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(n){var r,h,g,m,v,b,C,A,F,G,ot,s=n.imageData,e=s.data,a=s.height,l=s.width;for(h=0;h<a;h+=this.blocksize)for(g=0;g<l;g+=this.blocksize)for(m=e[r=4*h*l+4*g],v=e[r+1],b=e[r+2],C=e[r+3],G=Math.min(h+this.blocksize,a),ot=Math.min(g+this.blocksize,l),A=h;A<G;A++)for(F=g;F<ot;F++)e[r=4*A*l+4*F]=m,e[r+1]=v,e[r+2]=b,e[r+3]=C},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(n,s){return{uBlocksize:n.getUniformLocation(s,"uBlocksize"),uStepW:n.getUniformLocation(s,"uStepW"),uStepH:n.getUniformLocation(s,"uStepH")}},sendUniformData:function(n,s){n.uniform1f(s.uBlocksize,this.blocksize)}}),o.Image.filters.Pixelate.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.util.object.extend,c=o.Image.filters;c.RemoveColor=(0,o.util.createClass)(c.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(s){var l,h,g,m,a=s.imageData.data,r=255*this.distance,v=new o.Color(this.color).getSource(),b=[v[0]-r,v[1]-r,v[2]-r],C=[v[0]+r,v[1]+r,v[2]+r];for(l=0;l<a.length;l+=4)g=a[l+1],m=a[l+2],(h=a[l])>b[0]&&g>b[1]&&m>b[2]&&h<C[0]&&g<C[1]&&m<C[2]&&(a[l+3]=0)},getUniformLocations:function(s,e){return{uLow:s.getUniformLocation(e,"uLow"),uHigh:s.getUniformLocation(e,"uHigh")}},sendUniformData:function(s,e){var a=new o.Color(this.color).getSource(),l=parseFloat(this.distance),h=[a[0]/255+l,a[1]/255+l,a[2]/255+l,1];s.uniform4fv(e.uLow,[0+a[0]/255-l,0+a[1]/255-l,0+a[2]/255-l,1]),s.uniform4fv(e.uHigh,h)},toObject:function(){return u(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),o.Image.filters.RemoveColor.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.Image.filters,c=o.util.createClass,n={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var s in n)u[s]=c(u.ColorMatrix,{type:s,matrix:n[s],mainParameter:!1,colorsOnly:!0}),o.Image.filters[s].fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric,u=o.Image.filters;u.BlendColor=(0,o.util.createClass)(u.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(n){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[n]+"}\n}"},retrieveShader:function(n){var e,s=this.type+"_"+this.mode;return n.programCache.hasOwnProperty(s)||(e=this.buildSource(this.mode),n.programCache[s]=this.createProgram(n.context,e)),n.programCache[s]},applyTo2d:function(n){var l,r,h,g,m,v,b,e=n.imageData.data,a=e.length,C=1-this.alpha;l=(b=new o.Color(this.color).getSource())[0]*this.alpha,r=b[1]*this.alpha,h=b[2]*this.alpha;for(var A=0;A<a;A+=4)switch(g=e[A],m=e[A+1],v=e[A+2],this.mode){case"multiply":e[A]=g*l/255,e[A+1]=m*r/255,e[A+2]=v*h/255;break;case"screen":e[A]=255-(255-g)*(255-l)/255,e[A+1]=255-(255-m)*(255-r)/255,e[A+2]=255-(255-v)*(255-h)/255;break;case"add":e[A]=g+l,e[A+1]=m+r,e[A+2]=v+h;break;case"diff":case"difference":e[A]=Math.abs(g-l),e[A+1]=Math.abs(m-r),e[A+2]=Math.abs(v-h);break;case"subtract":e[A]=g-l,e[A+1]=m-r,e[A+2]=v-h;break;case"darken":e[A]=Math.min(g,l),e[A+1]=Math.min(m,r),e[A+2]=Math.min(v,h);break;case"lighten":e[A]=Math.max(g,l),e[A+1]=Math.max(m,r),e[A+2]=Math.max(v,h);break;case"overlay":e[A]=l<128?2*g*l/255:255-2*(255-g)*(255-l)/255,e[A+1]=r<128?2*m*r/255:255-2*(255-m)*(255-r)/255,e[A+2]=h<128?2*v*h/255:255-2*(255-v)*(255-h)/255;break;case"exclusion":e[A]=l+g-2*l*g/255,e[A+1]=r+m-2*r*m/255,e[A+2]=h+v-2*h*v/255;break;case"tint":e[A]=l+g*C,e[A+1]=r+m*C,e[A+2]=h+v*C}},getUniformLocations:function(n,s){return{uColor:n.getUniformLocation(s,"uColor")}},sendUniformData:function(n,s){var e=new o.Color(this.color).getSource();e[0]=this.alpha*e[0]/255,e[1]=this.alpha*e[1]/255,e[2]=this.alpha*e[2]/255,e[3]=this.alpha,n.uniform4fv(s.uColor,e)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),o.Image.filters.BlendColor.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric,u=o.Image.filters;u.BlendImage=(0,o.util.createClass)(u.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(n){var s=this.type+"_"+this.mode,e=this.fragmentSource[this.mode];return n.programCache.hasOwnProperty(s)||(n.programCache[s]=this.createProgram(n.context,e)),n.programCache[s]},applyToWebGL:function(n){var s=n.context,e=this.createTexture(n.filterBackend,this.image);this.bindAdditionalTexture(s,e,s.TEXTURE1),this.callSuper("applyToWebGL",n),this.unbindAdditionalTexture(s,s.TEXTURE1)},createTexture:function(n,s){return n.getCachedTexture(s.cacheKey,s._element)},calculateMatrix:function(){var n=this.image;return[1/n.scaleX,0,0,0,1/n.scaleY,0,-n.left/n._element.width,-n.top/n._element.height,1]},applyTo2d:function(n){var g,m,v,b,C,A,F,G,ot,ut,_t,s=n.imageData,e=n.filterBackend.resources,a=s.data,l=a.length,r=s.width,h=s.height,gt=this.image;e.blendImage||(e.blendImage=o.util.createCanvasElement()),ut=(ot=e.blendImage).getContext("2d"),ot.width!==r||ot.height!==h?(ot.width=r,ot.height=h):ut.clearRect(0,0,r,h),ut.setTransform(gt.scaleX,0,0,gt.scaleY,gt.left,gt.top),ut.drawImage(gt._element,0,0,r,h),_t=ut.getImageData(0,0,r,h).data;for(var ht=0;ht<l;ht+=4)switch(C=a[ht],A=a[ht+1],F=a[ht+2],G=a[ht+3],g=_t[ht],m=_t[ht+1],v=_t[ht+2],b=_t[ht+3],this.mode){case"multiply":a[ht]=C*g/255,a[ht+1]=A*m/255,a[ht+2]=F*v/255,a[ht+3]=G*b/255;break;case"mask":a[ht+3]=b}},getUniformLocations:function(n,s){return{uTransformMatrix:n.getUniformLocation(s,"uTransformMatrix"),uImage:n.getUniformLocation(s,"uImage")}},sendUniformData:function(n,s){var e=this.calculateMatrix();n.uniform1i(s.uImage,1),n.uniformMatrix3fv(s.uTransformMatrix,!1,e)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),o.Image.filters.BlendImage.fromObject=function(n,s){o.Image.fromObject(n.image,function(e){var a=o.util.object.clone(n);a.image=e,s(new o.Image.filters.BlendImage(a))})}}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=Math.pow,c=Math.floor,n=Math.sqrt,s=Math.abs,e=Math.round,a=Math.sin,l=Math.ceil,r=o.Image.filters;r.Resize=(0,o.util.createClass)(r.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(g,m){return{uDelta:g.getUniformLocation(m,"uDelta"),uTaps:g.getUniformLocation(m,"uTaps")}},sendUniformData:function(g,m){g.uniform2fv(m.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),g.uniform1fv(m.uTaps,this.taps)},retrieveShader:function(g){var m=this.getFilterWindow(),v=this.type+"_"+m;if(!g.programCache.hasOwnProperty(v)){var b=this.generateShader(m);g.programCache[v]=this.createProgram(g.context,b)}return g.programCache[v]},getFilterWindow:function(){return Math.ceil(this.lanczosLobes/this.tempScale)},getTaps:function(){for(var g=this.lanczosCreate(this.lanczosLobes),m=this.tempScale,v=this.getFilterWindow(),b=new Array(v),C=1;C<=v;C++)b[C-1]=g(C*m);return b},generateShader:function(b){for(var m=new Array(b),v=this.fragmentSourceTOP,C=1;C<=b;C++)m[C-1]=C+".0 * uDelta";return v+="uniform float uTaps["+b+"];\n",v+="void main() {\n",v+="  vec4 color = texture2D(uTexture, vTexCoord);\n",v+="  float sum = 1.0;\n",m.forEach(function(A,F){v+="  color += texture2D(uTexture, vTexCoord + "+A+") * uTaps["+F+"];\n",v+="  color += texture2D(uTexture, vTexCoord - "+A+") * uTaps["+F+"];\n",v+="  sum += 2.0 * uTaps["+F+"];\n"}),v+="  gl_FragColor = color / sum;\n",v+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(g){g.webgl?(g.passes++,this.width=g.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=g.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),g.destinationWidth=this.dW,this._setupFrameBuffer(g),this.applyToWebGL(g),this._swapTextures(g),g.sourceWidth=g.destinationWidth,this.height=g.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),g.destinationHeight=this.dH,this._setupFrameBuffer(g),this.applyToWebGL(g),this._swapTextures(g),g.sourceHeight=g.destinationHeight):this.applyTo2d(g)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(g){return function(m){if(m>=g||m<=-g)return 0;if(m<1.1920929e-7&&m>-1.1920929e-7)return 1;var v=(m*=Math.PI)/g;return a(m)/m*a(v)/v}},applyTo2d:function(g){var m=g.imageData,v=this.scaleX,b=this.scaleY;this.rcpScaleX=1/v,this.rcpScaleY=1/b;var ot,C=m.width,A=m.height,F=e(C*v),G=e(A*b);"sliceHack"===this.resizeType?ot=this.sliceByTwo(g,C,A,F,G):"hermite"===this.resizeType?ot=this.hermiteFastResize(g,C,A,F,G):"bilinear"===this.resizeType?ot=this.bilinearFiltering(g,C,A,F,G):"lanczos"===this.resizeType&&(ot=this.lanczosResize(g,C,A,F,G)),g.imageData=ot},sliceByTwo:function(g,m,v,b,C){var ht,ft,A=g.imageData,F=.5,G=!1,ot=!1,ut=m*F,gt=v*F,_t=o.filterBackend.resources,bt=0,wt=0,vt=m,k=0;for(_t.sliceByTwo||(_t.sliceByTwo=document.createElement("canvas")),((ht=_t.sliceByTwo).width<1.5*m||ht.height<v)&&(ht.width=1.5*m,ht.height=v),(ft=ht.getContext("2d")).clearRect(0,0,1.5*m,v),ft.putImageData(A,0,0),b=c(b),C=c(C);!G||!ot;)m=ut,v=gt,b<c(ut*F)?ut=c(ut*F):(ut=b,G=!0),C<c(gt*F)?gt=c(gt*F):(gt=C,ot=!0),ft.drawImage(ht,bt,wt,m,v,vt,k,ut,gt),bt=vt,wt=k,k+=gt;return ft.getImageData(bt,wt,b,C)},lanczosResize:function(g,m,v,b,C){var F=g.imageData.data,G=g.ctx.createImageData(b,C),ot=G.data,ut=this.lanczosCreate(this.lanczosLobes),gt=this.rcpScaleX,_t=this.rcpScaleY,ht=2/this.rcpScaleX,ft=2/this.rcpScaleY,bt=l(gt*this.lanczosLobes/2),wt=l(_t*this.lanczosLobes/2),vt={},k={},M={};return function A(D){var R,Z,P,O,z,N,J,X,rt,lt,dt;for(k.x=(D+.5)*gt,M.x=c(k.x),R=0;R<C;R++){for(k.y=(R+.5)*_t,M.y=c(k.y),z=0,N=0,J=0,X=0,rt=0,Z=M.x-bt;Z<=M.x+bt;Z++)if(!(Z<0||Z>=m)){lt=c(1e3*s(Z-k.x)),vt[lt]||(vt[lt]={});for(var K=M.y-wt;K<=M.y+wt;K++)K<0||K>=v||(dt=c(1e3*s(K-k.y)),vt[lt][dt]||(vt[lt][dt]=ut(n(u(lt*ht,2)+u(dt*ft,2))/1e3)),(P=vt[lt][dt])>0&&(z+=P,N+=P*F[O=4*(K*m+Z)],J+=P*F[O+1],X+=P*F[O+2],rt+=P*F[O+3]))}ot[O=4*(R*b+D)]=N/z,ot[O+1]=J/z,ot[O+2]=X/z,ot[O+3]=rt/z}return++D<b?A(D):G}(0)},bilinearFiltering:function(g,m,v,b,C){var ut,gt,_t,ht,ft,bt,wt,M,k=0,D=this.rcpScaleX,R=this.rcpScaleY,Z=4*(m-1),O=g.imageData.data,z=g.ctx.createImageData(b,C),N=z.data;for(_t=0;_t<C;_t++)for(ht=0;ht<b;ht++)for(ft=D*ht-(ut=c(D*ht)),bt=R*_t-(gt=c(R*_t)),M=4*(gt*m+ut),wt=0;wt<4;wt++)N[k++]=O[M+wt]*(1-ft)*(1-bt)+O[M+4+wt]*ft*(1-bt)+O[M+Z+wt]*bt*(1-ft)+O[M+Z+4+wt]*ft*bt;return z},hermiteFastResize:function(g,m,v,b,C){for(var A=this.rcpScaleX,F=this.rcpScaleY,G=l(A/2),ot=l(F/2),gt=g.imageData.data,_t=g.ctx.createImageData(b,C),ht=_t.data,ft=0;ft<C;ft++)for(var bt=0;bt<b;bt++){for(var wt=4*(bt+ft*b),vt=0,k=0,M=0,D=0,R=0,Z=0,P=0,O=(ft+.5)*F,z=c(ft*F);z<(ft+1)*F;z++)for(var N=s(O-(z+.5))/ot,J=(bt+.5)*A,X=N*N,rt=c(bt*A);rt<(bt+1)*A;rt++){var lt=s(J-(rt+.5))/G,dt=n(X+lt*lt);dt>1&&dt<-1||(vt=2*dt*dt*dt-3*dt*dt+1)>0&&(P+=vt*gt[3+(lt=4*(rt+z*m))],M+=vt,gt[lt+3]<255&&(vt=vt*gt[lt+3]/250),D+=vt*gt[lt],R+=vt*gt[lt+1],Z+=vt*gt[lt+2],k+=vt)}ht[wt]=D/k,ht[wt+1]=R/k,ht[wt+2]=Z/k,ht[wt+3]=P/M}return _t},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),o.Image.filters.Resize.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.Image.filters;u.Contrast=(0,o.util.createClass)(u.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(n){if(0!==this.contrast){var e,a=n.imageData.data,l=a.length,r=Math.floor(255*this.contrast),h=259*(r+255)/(255*(259-r));for(e=0;e<l;e+=4)a[e]=h*(a[e]-128)+128,a[e+1]=h*(a[e+1]-128)+128,a[e+2]=h*(a[e+2]-128)+128}},getUniformLocations:function(n,s){return{uContrast:n.getUniformLocation(s,"uContrast")}},sendUniformData:function(n,s){n.uniform1f(s.uContrast,this.contrast)}}),o.Image.filters.Contrast.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.Image.filters;u.Saturation=(0,o.util.createClass)(u.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(n){if(0!==this.saturation){var r,h,e=n.imageData.data,a=e.length,l=-this.saturation;for(r=0;r<a;r+=4)h=Math.max(e[r],e[r+1],e[r+2]),e[r]+=h!==e[r]?(h-e[r])*l:0,e[r+1]+=h!==e[r+1]?(h-e[r+1])*l:0,e[r+2]+=h!==e[r+2]?(h-e[r+2])*l:0}},getUniformLocations:function(n,s){return{uSaturation:n.getUniformLocation(s,"uSaturation")}},sendUniformData:function(n,s){n.uniform1f(s.uSaturation,-this.saturation)}}),o.Image.filters.Saturation.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.Image.filters;u.Vibrance=(0,o.util.createClass)(u.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(n){if(0!==this.vibrance){var r,h,m,e=n.imageData.data,a=e.length,l=-this.vibrance;for(r=0;r<a;r+=4)h=Math.max(e[r],e[r+1],e[r+2]),m=2*Math.abs(h-(e[r]+e[r+1]+e[r+2])/3)/255*l,e[r]+=h!==e[r]?(h-e[r])*m:0,e[r+1]+=h!==e[r+1]?(h-e[r+1])*m:0,e[r+2]+=h!==e[r+2]?(h-e[r+2])*m:0}},getUniformLocations:function(n,s){return{uVibrance:n.getUniformLocation(s,"uVibrance")}},sendUniformData:function(n,s){n.uniform1f(s.uVibrance,-this.vibrance)}}),o.Image.filters.Vibrance.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.Image.filters;u.Blur=(0,o.util.createClass)(u.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(n){n.webgl?(this.aspectRatio=n.sourceWidth/n.sourceHeight,n.passes++,this._setupFrameBuffer(n),this.horizontal=!0,this.applyToWebGL(n),this._swapTextures(n),this._setupFrameBuffer(n),this.horizontal=!1,this.applyToWebGL(n),this._swapTextures(n)):this.applyTo2d(n)},applyTo2d:function(n){n.imageData=this.simpleBlur(n)},simpleBlur:function(n){var e,a,s=n.filterBackend.resources,l=n.imageData.width,r=n.imageData.height;s.blurLayer1||(s.blurLayer1=o.util.createCanvasElement(),s.blurLayer2=o.util.createCanvasElement()),a=s.blurLayer2,((e=s.blurLayer1).width!==l||e.height!==r)&&(a.width=e.width=l,a.height=e.height=r);var v,b,C,A,h=e.getContext("2d"),g=a.getContext("2d"),m=15,F=.06*this.blur*.5;for(h.putImageData(n.imageData,0,0),g.clearRect(0,0,l,r),A=-m;A<=m;A++)C=F*(b=A/m)*l+(v=(Math.random()-.5)/4),g.globalAlpha=1-Math.abs(b),g.drawImage(e,C,v),h.drawImage(a,0,0),g.globalAlpha=1,g.clearRect(0,0,a.width,a.height);for(A=-m;A<=m;A++)C=F*(b=A/m)*r+(v=(Math.random()-.5)/4),g.globalAlpha=1-Math.abs(b),g.drawImage(e,v,C),h.drawImage(a,0,0),g.globalAlpha=1,g.clearRect(0,0,a.width,a.height);n.ctx.drawImage(e,0,0);var G=n.ctx.getImageData(0,0,e.width,e.height);return h.globalAlpha=1,h.clearRect(0,0,e.width,e.height),G},getUniformLocations:function(n,s){return{delta:n.getUniformLocation(s,"uDelta")}},sendUniformData:function(n,s){var e=this.chooseRightDelta();n.uniform2fv(s.delta,e)},chooseRightDelta:function(){var e,n=1,s=[0,0];return this.horizontal?this.aspectRatio>1&&(n=1/this.aspectRatio):this.aspectRatio<1&&(n=this.aspectRatio),e=n*this.blur*.12,this.horizontal?s[0]=e:s[1]=e,s}}),u.Blur.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.Image.filters;u.Gamma=(0,o.util.createClass)(u.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(n){this.gamma=[1,1,1],u.BaseFilter.prototype.initialize.call(this,n)},applyTo2d:function(n){var m,e=n.imageData.data,a=this.gamma,l=e.length,r=1/a[0],h=1/a[1],g=1/a[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),m=0,l=256;m<l;m++)this.rVals[m]=255*Math.pow(m/255,r),this.gVals[m]=255*Math.pow(m/255,h),this.bVals[m]=255*Math.pow(m/255,g);for(m=0,l=e.length;m<l;m+=4)e[m]=this.rVals[e[m]],e[m+1]=this.gVals[e[m+1]],e[m+2]=this.bVals[e[m+2]]},getUniformLocations:function(n,s){return{uGamma:n.getUniformLocation(s,"uGamma")}},sendUniformData:function(n,s){n.uniform3fv(s.uGamma,this.gamma)}}),o.Image.filters.Gamma.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.Image.filters;u.Composed=(0,o.util.createClass)(u.BaseFilter,{type:"Composed",subFilters:[],initialize:function(n){this.callSuper("initialize",n),this.subFilters=this.subFilters.slice(0)},applyTo:function(n){n.passes+=this.subFilters.length-1,this.subFilters.forEach(function(s){s.applyTo(n)})},toObject:function(){return o.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(n){return n.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(n){return!n.isNeutralState()})}}),o.Image.filters.Composed.fromObject=function(n,s){var a=(n.subFilters||[]).map(function(r){return new o.Image.filters[r.type](r)}),l=new o.Image.filters.Composed({subFilters:a});return s&&s(l),l}}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.Image.filters;u.HueRotation=(0,o.util.createClass)(u.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var n=this.rotation*Math.PI,s=o.util.cos(n),e=o.util.sin(n),a=1/3,l=Math.sqrt(a)*e,r=1-s;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=s+r/3,this.matrix[1]=a*r-l,this.matrix[2]=a*r+l,this.matrix[5]=a*r+l,this.matrix[6]=s+a*r,this.matrix[7]=a*r-l,this.matrix[10]=a*r-l,this.matrix[11]=a*r+l,this.matrix[12]=s+a*r},isNeutralState:function(n){return this.calculateMatrix(),u.BaseFilter.prototype.isNeutralState.call(this,n)},applyTo:function(n){this.calculateMatrix(),u.BaseFilter.prototype.applyTo.call(this,n)}}),o.Image.filters.HueRotation.fromObject=o.Image.filters.BaseFilter.fromObject}(At),function(p){"use strict";var o=p.fabric||(p.fabric={}),u=o.util.object.clone;if(o.Text)o.warn("fabric.Text is already defined");else{var c="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");o.Text=o.util.createClass(o.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:o.Object.prototype.stateProperties.concat(c),cacheProperties:o.Object.prototype.cacheProperties.concat(c),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(n,s){this.styles=s&&s.styles||{},this.text=n,this.__skipDimension=!0,this.callSuper("initialize",s),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var n=this.path;n&&(n.segmentsInfo=o.util.getPathSegmentsInfo(n.path))},getMeasuringContext:function(){return o._measuringContext||(o._measuringContext=this.canvas&&this.canvas.contextCache||o.util.createCanvasElement().getContext("2d")),o._measuringContext},_splitText:function(){var n=this._splitTextIntoLines(this.text);return this.textLines=n.lines,this._textLines=n.graphemeLines,this._unwrappedTextLines=n._unwrappedLines,this._text=n.graphemeText,n},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var n,s,a,l,r,h,g=0,m=this._textLines.length;g<m;g++)if(("justify"===this.textAlign||g!==m-1&&!this.isEndOfWrapping(g))&&(a=0,l=this._textLines[g],(s=this.getLineWidth(g))<this.width&&(h=this.textLines[g].match(this._reSpacesAndTabs)))){n=(this.width-s)/h.length;for(var v=0,b=l.length;v<=b;v++)r=this.__charBounds[g][v],this._reSpaceAndTab.test(l[v])?(r.width+=n,r.kernedWidth+=n,r.left+=a,a+=n):r.left+=a}},isEndOfWrapping:function(n){return n===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var n=this.callSuper("_getCacheCanvasDimensions"),s=this.fontSize;return n.width+=s*n.zoomX,n.height+=s*n.zoomY,n},_render:function(n){var s=this.path;s&&!s.isNotVisible()&&s._render(n),this._setTextStyles(n),this._renderTextLinesBackground(n),this._renderTextDecoration(n,"underline"),this._renderText(n),this._renderTextDecoration(n,"overline"),this._renderTextDecoration(n,"linethrough")},_renderText:function(n){"stroke"===this.paintFirst?(this._renderTextStroke(n),this._renderTextFill(n)):(this._renderTextFill(n),this._renderTextStroke(n))},_setTextStyles:function(n,s,e){if(n.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":n.textBaseline="middle";break;case"ascender":n.textBaseline="top";break;case"descender":n.textBaseline="bottom"}n.font=this._getFontDeclaration(s,e)},calcTextWidth:function(){for(var n=this.getLineWidth(0),s=1,e=this._textLines.length;s<e;s++){var a=this.getLineWidth(s);a>n&&(n=a)}return n},_renderTextLine:function(n,s,e,a,l,r){this._renderChars(n,s,e,a,l,r)},_renderTextLinesBackground:function(n){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var s,e,l,r,b,C,F,a=n.fillStyle,h=this._getLeftOffset(),g=this._getTopOffset(),m=0,v=0,A=this.path,G=0,ot=this._textLines.length;G<ot;G++)if(s=this.getHeightOfLine(G),this.textBackgroundColor||this.styleHas("textBackgroundColor",G)){l=this._textLines[G],e=this._getLineLeftOffset(G),v=0,m=0,r=this.getValueOfPropertyAt(G,0,"textBackgroundColor");for(var ut=0,gt=l.length;ut<gt;ut++)b=this.__charBounds[G][ut],C=this.getValueOfPropertyAt(G,ut,"textBackgroundColor"),A?(n.save(),n.translate(b.renderLeft,b.renderTop),n.rotate(b.angle),n.fillStyle=C,C&&n.fillRect(-b.width/2,-s/this.lineHeight*(1-this._fontSizeFraction),b.width,s/this.lineHeight),n.restore()):C!==r?(F=h+e+m,"rtl"===this.direction&&(F=this.width-F-v),n.fillStyle=r,r&&n.fillRect(F,g,v,s/this.lineHeight),m=b.left,v=b.width,r=C):v+=b.kernedWidth;C&&!A&&(F=h+e+m,"rtl"===this.direction&&(F=this.width-F-v),n.fillStyle=C,n.fillRect(F,g,v,s/this.lineHeight)),g+=s}else g+=s;n.fillStyle=a,this._removeShadow(n)}},getFontCache:function(n){var s=n.fontFamily.toLowerCase();o.charWidthsCache[s]||(o.charWidthsCache[s]={});var e=o.charWidthsCache[s],a=n.fontStyle.toLowerCase()+"_"+(n.fontWeight+"").toLowerCase();return e[a]||(e[a]={}),e[a]},_measureChar:function(n,s,e,a){var v,b,C,F,l=this.getFontCache(s),g=e+n,m=this._getFontDeclaration(s)===this._getFontDeclaration(a),A=s.fontSize/this.CACHE_FONT_SIZE;if(e&&void 0!==l[e]&&(C=l[e]),void 0!==l[n]&&(F=v=l[n]),m&&void 0!==l[g]&&(F=(b=l[g])-C),void 0===v||void 0===C||void 0===b){var G=this.getMeasuringContext();this._setTextStyles(G,s,!0)}return void 0===v&&(F=v=G.measureText(n).width,l[n]=v),void 0===C&&m&&e&&(C=G.measureText(e).width,l[e]=C),m&&void 0===b&&(b=G.measureText(g).width,l[g]=b,F=b-C),{width:v*A,kernedWidth:F*A}},getHeightOfChar:function(n,s){return this.getValueOfPropertyAt(n,s,"fontSize")},measureLine:function(n){var s=this._measureLine(n);return 0!==this.charSpacing&&(s.width-=this._getWidthOfCharSpacing()),s.width<0&&(s.width=0),s},_measureLine:function(n){var e,a,r,h,b,C,s=0,l=this._textLines[n],m=new Array(l.length),v=0,A=this.path,F="right"===this.pathSide;for(this.__charBounds[n]=m,e=0;e<l.length;e++)h=this._getGraphemeBox(a=l[e],n,e,r),m[e]=h,s+=h.kernedWidth,r=a;if(m[e]={left:h?h.left+h.width:0,width:0,kernedWidth:0,height:this.fontSize},A){switch(C=A.segmentsInfo[A.segmentsInfo.length-1].length,(b=o.util.getPointOnPath(A.path,0,A.segmentsInfo)).x+=A.pathOffset.x,b.y+=A.pathOffset.y,this.textAlign){case"left":v=F?C-s:0;break;case"center":v=(C-s)/2;break;case"right":v=F?0:C-s}for(v+=this.pathStartOffset*(F?-1:1),e=F?l.length-1:0;F?e>=0:e<l.length;F?e--:e++)v>C?v%=C:v<0&&(v+=C),this._setGraphemeOnPath(v,h=m[e],b),v+=h.kernedWidth}return{width:s,numOfSpaces:0}},_setGraphemeOnPath:function(n,s,e){var l=this.path,r=o.util.getPointOnPath(l.path,n+s.kernedWidth/2,l.segmentsInfo);s.renderLeft=r.x-e.x,s.renderTop=r.y-e.y,s.angle=r.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(n,s,e,a,l){var b,r=this.getCompleteStyleDeclaration(s,e),h=a?this.getCompleteStyleDeclaration(s,e-1):{},g=this._measureChar(n,r,a,h),m=g.kernedWidth,v=g.width;0!==this.charSpacing&&(v+=b=this._getWidthOfCharSpacing(),m+=b);var C={width:v,left:0,height:r.fontSize,kernedWidth:m,deltaY:r.deltaY};if(e>0&&!l){var A=this.__charBounds[s][e-1];C.left=A.left+A.width+g.kernedWidth-g.width}return C},getHeightOfLine:function(n){if(this.__lineHeights[n])return this.__lineHeights[n];for(var s=this._textLines[n],e=this.getHeightOfChar(n,0),a=1,l=s.length;a<l;a++)e=Math.max(this.getHeightOfChar(n,a),e);return this.__lineHeights[n]=e*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var n,s=0,e=0,a=this._textLines.length;e<a;e++)n=this.getHeightOfLine(e),s+=e===a-1?n/this.lineHeight:n;return s},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(n,s){n.save();for(var e=0,a=this._getLeftOffset(),l=this._getTopOffset(),r=0,h=this._textLines.length;r<h;r++){var g=this.getHeightOfLine(r),m=g/this.lineHeight,v=this._getLineLeftOffset(r);this._renderTextLine(s,n,this._textLines[r],a+v,l+e+m,r),e+=g}n.restore()},_renderTextFill:function(n){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(n,"fillText")},_renderTextStroke:function(n){(!this.stroke||0===this.strokeWidth)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(n),n.save(),this._setLineDash(n,this.strokeDashArray),n.beginPath(),this._renderTextCommon(n,"strokeText"),n.closePath(),n.restore())},_renderChars:function(n,s,e,a,l,r){var m,v,C,F,h=this.getHeightOfLine(r),g=-1!==this.textAlign.indexOf("justify"),b="",A=0,G=this.path,ot=!g&&0===this.charSpacing&&this.isEmptyStyles(r)&&!G,ut="ltr"===this.direction,gt="ltr"===this.direction?1:-1,ht=s.canvas.getAttribute("dir");if(s.save(),ht!==this.direction&&(s.canvas.setAttribute("dir",ut?"ltr":"rtl"),s.direction=ut?"ltr":"rtl",s.textAlign=ut?"left":"right"),l-=h*this._fontSizeFraction/this.lineHeight,ot)return this._renderChar(n,s,r,0,e.join(""),a,l,h),void s.restore();for(var ft=0,bt=e.length-1;ft<=bt;ft++)F=ft===bt||this.charSpacing||G,b+=e[ft],C=this.__charBounds[r][ft],0===A?(a+=gt*(C.kernedWidth-C.width),A+=C.width):A+=C.kernedWidth,g&&!F&&this._reSpaceAndTab.test(e[ft])&&(F=!0),F||(m=m||this.getCompleteStyleDeclaration(r,ft),v=this.getCompleteStyleDeclaration(r,ft+1),F=o.util.hasStyleChanged(m,v,!1)),F&&(G?(s.save(),s.translate(C.renderLeft,C.renderTop),s.rotate(C.angle),this._renderChar(n,s,r,ft,b,-A/2,0,h),s.restore()):this._renderChar(n,s,r,ft,b,a,l,h),b="",m=v,a+=gt*A,A=0);s.restore()},_applyPatternGradientTransformText:function(n){var e,s=o.util.createCanvasElement(),a=this.width+this.strokeWidth,l=this.height+this.strokeWidth;return s.width=a,s.height=l,(e=s.getContext("2d")).beginPath(),e.moveTo(0,0),e.lineTo(a,0),e.lineTo(a,l),e.lineTo(0,l),e.closePath(),e.translate(a/2,l/2),e.fillStyle=n.toLive(e),this._applyPatternGradientTransform(e,n),e.fill(),e.createPattern(s,"no-repeat")},handleFiller:function(n,s,e){var a,l;return e.toLive?"percentage"===e.gradientUnits||e.gradientTransform||e.patternTransform?(n.translate(a=-this.width/2,l=-this.height/2),n[s]=this._applyPatternGradientTransformText(e),{offsetX:a,offsetY:l}):(n[s]=e.toLive(n,this),this._applyPatternGradientTransform(n,e)):(n[s]=e,{offsetX:0,offsetY:0})},_setStrokeStyles:function(n,s){return n.lineWidth=s.strokeWidth,n.lineCap=this.strokeLineCap,n.lineDashOffset=this.strokeDashOffset,n.lineJoin=this.strokeLineJoin,n.miterLimit=this.strokeMiterLimit,this.handleFiller(n,"strokeStyle",s.stroke)},_setFillStyles:function(n,s){return this.handleFiller(n,"fillStyle",s.fill)},_renderChar:function(n,s,e,a,l,r,h){var C,A,g=this._getStyleDeclaration(e,a),m=this.getCompleteStyleDeclaration(e,a),v="fillText"===n&&m.fill,b="strokeText"===n&&m.stroke&&m.strokeWidth;!b&&!v||(s.save(),v&&(C=this._setFillStyles(s,m)),b&&(A=this._setStrokeStyles(s,m)),s.font=this._getFontDeclaration(m),g&&g.textBackgroundColor&&this._removeShadow(s),g&&g.deltaY&&(h+=g.deltaY),v&&s.fillText(l,r-C.offsetX,h-C.offsetY),b&&s.strokeText(l,r-A.offsetX,h-A.offsetY),s.restore())},setSuperscript:function(n,s){return this._setScript(n,s,this.superscript)},setSubscript:function(n,s){return this._setScript(n,s,this.subscript)},_setScript:function(n,s,e){var a=this.get2DCursorLocation(n,!0),l=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"fontSize"),r=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"deltaY");return this.setSelectionStyles({fontSize:l*e.size,deltaY:r+l*e.baseline},n,s),this},_getLineLeftOffset:function(n){var s=this.getLineWidth(n),e=this.width-s,a=this.textAlign,l=this.direction,r=0,h=this.isEndOfWrapping(n);return"justify"===a||"justify-center"===a&&!h||"justify-right"===a&&!h||"justify-left"===a&&!h?0:("center"===a&&(r=e/2),"right"===a&&(r=e),"justify-center"===a&&(r=e/2),"justify-right"===a&&(r=e),"rtl"===l&&(r-=e),r)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var n=this._forceClearCache;return n||(n=this.hasStateChanged("_dimensionAffectingProps")),n&&(this.dirty=!0,this._forceClearCache=!1),n},getLineWidth:function(n){if(void 0!==this.__lineWidths[n])return this.__lineWidths[n];var e=this.measureLine(n).width;return this.__lineWidths[n]=e,e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(n,s,e){var a=this._getStyleDeclaration(n,s);return a&&typeof a[e]<"u"?a[e]:this[e]},_renderTextDecoration:function(n,s){if(this[s]||this.styleHas(s)){for(var e,a,l,r,h,g,m,v,A,F,G,ot,ut,gt,_t,ht,b=this._getLeftOffset(),C=this._getTopOffset(),ft=this.path,bt=this._getWidthOfCharSpacing(),wt=this.offsets[s],vt=0,k=this._textLines.length;vt<k;vt++)if(e=this.getHeightOfLine(vt),this[s]||this.styleHas(s,vt)){m=this._textLines[vt],gt=e/this.lineHeight,r=this._getLineLeftOffset(vt),F=0,G=0,v=this.getValueOfPropertyAt(vt,0,s),ht=this.getValueOfPropertyAt(vt,0,"fill"),A=C+gt*(1-this._fontSizeFraction),a=this.getHeightOfChar(vt,0),h=this.getValueOfPropertyAt(vt,0,"deltaY");for(var M=0,D=m.length;M<D;M++)if(ot=this.__charBounds[vt][M],ut=this.getValueOfPropertyAt(vt,M,s),_t=this.getValueOfPropertyAt(vt,M,"fill"),l=this.getHeightOfChar(vt,M),g=this.getValueOfPropertyAt(vt,M,"deltaY"),ft&&ut&&_t)n.save(),n.fillStyle=ht,n.translate(ot.renderLeft,ot.renderTop),n.rotate(ot.angle),n.fillRect(-ot.kernedWidth/2,wt*l+g,ot.kernedWidth,this.fontSize/15),n.restore();else if((ut!==v||_t!==ht||l!==a||g!==h)&&G>0){var R=b+r+F;"rtl"===this.direction&&(R=this.width-R-G),v&&ht&&(n.fillStyle=ht,n.fillRect(R,A+wt*a+h,G,this.fontSize/15)),F=ot.left,G=ot.width,v=ut,ht=_t,a=l,h=g}else G+=ot.kernedWidth;R=b+r+F,"rtl"===this.direction&&(R=this.width-R-G),n.fillStyle=_t,ut&&_t&&n.fillRect(R,A+wt*a+h,G-bt,this.fontSize/15),C+=e}else C+=e;this._removeShadow(n)}},_getFontDeclaration:function(n,s){var e=n||this,a=this.fontFamily,l=o.Text.genericFonts.indexOf(a.toLowerCase())>-1,r=void 0===a||a.indexOf("'")>-1||a.indexOf(",")>-1||a.indexOf('"')>-1||l?e.fontFamily:'"'+e.fontFamily+'"';return[o.isLikelyNode?e.fontWeight:e.fontStyle,o.isLikelyNode?e.fontStyle:e.fontWeight,s?this.CACHE_FONT_SIZE+"px":e.fontSize+"px",r].join(" ")},render:function(n){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",n)))},_splitTextIntoLines:function(n){for(var s=n.split(this._reNewline),e=new Array(s.length),a=["\n"],l=[],r=0;r<s.length;r++)e[r]=o.util.string.graphemeSplit(s[r]),l=l.concat(e[r],a);return l.pop(),{_unwrappedLines:e,lines:s,graphemeText:l,graphemeLines:e}},toObject:function(n){var s=c.concat(n),e=this.callSuper("toObject",s);return e.styles=o.util.stylesToArray(this.styles,this.text),e.path&&(e.path=this.path.toObject()),e},set:function(n,s){this.callSuper("set",n,s);var e=!1,a=!1;if("object"==typeof n)for(var l in n)"path"===l&&this.setPathInfo(),e=e||-1!==this._dimensionAffectingProps.indexOf(l),a=a||"path"===l;else e=-1!==this._dimensionAffectingProps.indexOf(n),a="path"===n;return a&&this.setPathInfo(),e&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),o.Text.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),o.Text.DEFAULT_SVG_FONT_SIZE=16,o.Text.fromElement=function(n,s,e){if(!n)return s(null);var a=o.parseAttributes(n,o.Text.ATTRIBUTE_NAMES),l=a.textAnchor||"left";if((e=o.util.object.extend(e?u(e):{},a)).top=e.top||0,e.left=e.left||0,a.textDecoration){var r=a.textDecoration;-1!==r.indexOf("underline")&&(e.underline=!0),-1!==r.indexOf("overline")&&(e.overline=!0),-1!==r.indexOf("line-through")&&(e.linethrough=!0),delete e.textDecoration}"dx"in a&&(e.left+=a.dx),"dy"in a&&(e.top+=a.dy),"fontSize"in e||(e.fontSize=o.Text.DEFAULT_SVG_FONT_SIZE);var h="";"textContent"in n?h=n.textContent:"firstChild"in n&&null!==n.firstChild&&"data"in n.firstChild&&null!==n.firstChild.data&&(h=n.firstChild.data),h=h.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var g=e.strokeWidth;e.strokeWidth=0;var m=new o.Text(h,e),v=m.getScaledHeight()/m.height,C=((m.height+m.strokeWidth)*m.lineHeight-m.height)*v,A=m.getScaledHeight()+C,F=0;"center"===l&&(F=m.getScaledWidth()/2),"right"===l&&(F=m.getScaledWidth()),m.set({left:m.left-F,top:m.top-(A-m.fontSize*(.07+m._fontSizeFraction))/m.lineHeight,strokeWidth:typeof g<"u"?g:1}),s(m)},o.Text.fromObject=function(n,s){var e=u(n),a=n.path;return delete e.path,o.Object._fromObject("Text",e,function(l){l.styles=o.util.stylesFromArray(n.styles,n.text),a?o.Object._fromObject("Path",a,function(r){l.set("path",r),s(l)},"path"):s(l)},"text")},o.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],o.util.createAccessors&&o.util.createAccessors(o.Text)}}(At),_.util.object.extend(_.Text.prototype,{isEmptyStyles:function(p){if(!this.styles||typeof p<"u"&&!this.styles[p])return!0;var o=typeof p>"u"?this.styles:{line:this.styles[p]};for(var u in o)for(var c in o[u])for(var n in o[u][c])return!1;return!0},styleHas:function(p,o){if(!this.styles||!p||""===p||typeof o<"u"&&!this.styles[o])return!1;var u=typeof o>"u"?this.styles:{0:this.styles[o]};for(var c in u)for(var n in u[c])if(typeof u[c][n][p]<"u")return!0;return!1},cleanStyle:function(p){if(!this.styles||!p||""===p)return!1;var c,n,o=this.styles,u=0,s=!0,e=0;for(var l in o){for(var r in c=0,o[l]){var a;u++,(a=o[l][r]).hasOwnProperty(p)?(n?a[p]!==n&&(s=!1):n=a[p],a[p]===this[p]&&delete a[p]):s=!1,0!==Object.keys(a).length?c++:delete o[l][r]}0===c&&delete o[l]}for(var g=0;g<this._textLines.length;g++)e+=this._textLines[g].length;s&&u===e&&(this[p]=n,this.removeStyle(p))},removeStyle:function(p){if(this.styles&&p&&""!==p){var u,c,n,o=this.styles;for(c in o){for(n in u=o[c])delete u[n][p],0===Object.keys(u[n]).length&&delete u[n];0===Object.keys(u).length&&delete o[c]}}},_extendStyles:function(p,o){var u=this.get2DCursorLocation(p);this._getLineStyle(u.lineIndex)||this._setLineStyle(u.lineIndex),this._getStyleDeclaration(u.lineIndex,u.charIndex)||this._setStyleDeclaration(u.lineIndex,u.charIndex,{}),_.util.object.extend(this._getStyleDeclaration(u.lineIndex,u.charIndex),o)},get2DCursorLocation:function(p,o){typeof p>"u"&&(p=this.selectionStart);for(var u=o?this._unwrappedTextLines:this._textLines,c=u.length,n=0;n<c;n++){if(p<=u[n].length)return{lineIndex:n,charIndex:p};p-=u[n].length+this.missingNewlineOffset(n)}return{lineIndex:n-1,charIndex:u[n-1].length<p?u[n-1].length:p}},getSelectionStyles:function(p,o,u){typeof p>"u"&&(p=this.selectionStart||0),typeof o>"u"&&(o=this.selectionEnd||p);for(var c=[],n=p;n<o;n++)c.push(this.getStyleAtPosition(n,u));return c},getStyleAtPosition:function(p,o){var u=this.get2DCursorLocation(p);return(o?this.getCompleteStyleDeclaration(u.lineIndex,u.charIndex):this._getStyleDeclaration(u.lineIndex,u.charIndex))||{}},setSelectionStyles:function(p,o,u){typeof o>"u"&&(o=this.selectionStart||0),typeof u>"u"&&(u=this.selectionEnd||o);for(var c=o;c<u;c++)this._extendStyles(c,p);return this._forceClearCache=!0,this},_getStyleDeclaration:function(p,o){var u=this.styles&&this.styles[p];return u?u[o]:null},getCompleteStyleDeclaration:function(p,o){for(var n,u=this._getStyleDeclaration(p,o)||{},c={},s=0;s<this._styleProperties.length;s++)c[n=this._styleProperties[s]]=typeof u[n]>"u"?this[n]:u[n];return c},_setStyleDeclaration:function(p,o,u){this.styles[p][o]=u},_deleteStyleDeclaration:function(p,o){delete this.styles[p][o]},_getLineStyle:function(p){return!!this.styles[p]},_setLineStyle:function(p){this.styles[p]={}},_deleteLineStyle:function(p){delete this.styles[p]}}),function(){function p(o){o.textDecoration&&(o.textDecoration.indexOf("underline")>-1&&(o.underline=!0),o.textDecoration.indexOf("line-through")>-1&&(o.linethrough=!0),o.textDecoration.indexOf("overline")>-1&&(o.overline=!0),delete o.textDecoration)}_.IText=_.util.createClass(_.Text,_.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(o,u){this.callSuper("initialize",o,u),this.initBehavior()},setSelectionStart:function(o){o=Math.max(o,0),this._updateAndFire("selectionStart",o)},setSelectionEnd:function(o){o=Math.min(o,this.text.length),this._updateAndFire("selectionEnd",o)},_updateAndFire:function(o,u){this[o]!==u&&(this._fireSelectionChanged(),this[o]=u),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(o){this.clearContextTop(),this.callSuper("render",o),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(o){this.callSuper("_render",o)},clearContextTop:function(o){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var u=this.canvas.contextTop,c=this.canvas.viewportTransform;u.save(),u.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this.transform(u),this._clearTextArea(u),o||u.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var o=this._getCursorBoundaries(),u=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(o,u):this.renderSelection(o,u),u.restore()}},_clearTextArea:function(o){var u=this.width+4,c=this.height+4;o.clearRect(-u/2,-c/2,u,c)},_getCursorBoundaries:function(o){typeof o>"u"&&(o=this.selectionStart);var u=this._getLeftOffset(),c=this._getTopOffset(),n=this._getCursorBoundariesOffsets(o);return{left:u,top:c,leftOffset:n.left,topOffset:n.top}},_getCursorBoundariesOffsets:function(o){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var u,c,n,a,s=0,e=0,l=this.get2DCursorLocation(o);n=l.charIndex,c=l.lineIndex;for(var r=0;r<c;r++)s+=this.getHeightOfLine(r);u=this._getLineLeftOffset(c);var h=this.__charBounds[c][n];return h&&(e=h.left),0!==this.charSpacing&&n===this._textLines[c].length&&(e-=this._getWidthOfCharSpacing()),a={top:s,left:u+(e>0?e:0)},"rtl"===this.direction&&(a.left*=-1),this.cursorOffsetCache=a,this.cursorOffsetCache},renderCursor:function(o,u){var c=this.get2DCursorLocation(),n=c.lineIndex,s=c.charIndex>0?c.charIndex-1:0,e=this.getValueOfPropertyAt(n,s,"fontSize"),a=this.scaleX*this.canvas.getZoom(),l=this.cursorWidth/a,r=o.topOffset,h=this.getValueOfPropertyAt(n,s,"deltaY");r+=(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-e*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(o,u),u.fillStyle=this.cursorColor||this.getValueOfPropertyAt(n,s,"fill"),u.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,u.fillRect(o.left+o.leftOffset-l/2,r+o.top+h,l,e)},renderSelection:function(o,u){for(var c=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,n=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,s=-1!==this.textAlign.indexOf("justify"),e=this.get2DCursorLocation(c),a=this.get2DCursorLocation(n),l=e.lineIndex,r=a.lineIndex,h=e.charIndex<0?0:e.charIndex,g=a.charIndex<0?0:a.charIndex,m=l;m<=r;m++){var C,v=this._getLineLeftOffset(m)||0,b=this.getHeightOfLine(m),A=0,F=0;if(m===l&&(A=this.__charBounds[l][h].left),m>=l&&m<r)F=s&&!this.isEndOfWrapping(m)?this.width:this.getLineWidth(m)||5;else if(m===r)if(0===g)F=this.__charBounds[r][g].left;else{var G=this._getWidthOfCharSpacing();F=this.__charBounds[r][g-1].left+this.__charBounds[r][g-1].width-G}C=b,(this.lineHeight<1||m===r&&this.lineHeight>1)&&(b/=this.lineHeight);var ot=o.left+v+A,ut=F-A,gt=b,_t=0;this.inCompositionMode?(u.fillStyle=this.compositionColor||"black",gt=1,_t=b):u.fillStyle=this.selectionColor,"rtl"===this.direction&&(ot=this.width-ot-ut),u.fillRect(ot,o.top+o.topOffset+_t,ut,gt),o.topOffset+=C}},getCurrentCharFontSize:function(){var o=this._getCurrentCharIndex();return this.getValueOfPropertyAt(o.l,o.c,"fontSize")},getCurrentCharColor:function(){var o=this._getCurrentCharIndex();return this.getValueOfPropertyAt(o.l,o.c,"fill")},_getCurrentCharIndex:function(){var o=this.get2DCursorLocation(this.selectionStart,!0);return{l:o.lineIndex,c:o.charIndex>0?o.charIndex-1:0}}}),_.IText.fromObject=function(o,u){var c=_.util.stylesFromArray(o.styles,o.text),n=Object.assign({},o,{styles:c});if(p(n),n.styles)for(var s in n.styles)for(var e in n.styles[s])p(n.styles[s][e]);_.Object._fromObject("IText",n,u,"text")}}(),function(){var p=_.util.object.clone;_.util.object.extend(_.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var o=this;this.on("added",function(){var u=o.canvas;u&&(u._hasITextHandlers||(u._hasITextHandlers=!0,o._initCanvasHandlers(u)),u._iTextInstances=u._iTextInstances||[],u._iTextInstances.push(o))})},initRemovedHandler:function(){var o=this;this.on("removed",function(){var u=o.canvas;u&&(u._iTextInstances=u._iTextInstances||[],_.util.removeFromArray(u._iTextInstances,o),0===u._iTextInstances.length&&(u._hasITextHandlers=!1,o._removeCanvasHandlers(u)))})},_initCanvasHandlers:function(o){o._mouseUpITextHandler=function(){o._iTextInstances&&o._iTextInstances.forEach(function(u){u.__isMousedown=!1})},o.on("mouse:up",o._mouseUpITextHandler)},_removeCanvasHandlers:function(o){o.off("mouse:up",o._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(o,u,c,n){var s;return s={isAborted:!1,abort:function(){this.isAborted=!0}},o.animate("_currentCursorOpacity",u,{duration:c,onComplete:function(){s.isAborted||o[n]()},onChange:function(){o.canvas&&o.selectionStart===o.selectionEnd&&o.renderCursorOrSelection()},abort:function(){return s.isAborted}}),s},_onTickComplete:function(){var o=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){o._currentTickCompleteState=o._animateCursor(o,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(o){var u=this,c=o?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){u._tick()},c)},abortCursorAnimation:function(){var o=this._currentTickState||this._currentTickCompleteState,u=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,o&&u&&u.clearContext(u.contextTop||u.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(o){var u=0,c=o-1;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)u++,c--;for(;/\S/.test(this._text[c])&&c>-1;)u++,c--;return o-u},findWordBoundaryRight:function(o){var u=0,c=o;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)u++,c++;for(;/\S/.test(this._text[c])&&c<this._text.length;)u++,c++;return o+u},findLineBoundaryLeft:function(o){for(var u=0,c=o-1;!/\n/.test(this._text[c])&&c>-1;)u++,c--;return o-u},findLineBoundaryRight:function(o){for(var u=0,c=o;!/\n/.test(this._text[c])&&c<this._text.length;)u++,c++;return o+u},searchWordBoundary:function(o,u){for(var c=this._text,n=this._reSpace.test(c[o])?o-1:o,s=c[n],e=_.reNonWord;!e.test(s)&&n>0&&n<c.length;)s=c[n+=u];return e.test(s)&&(n+=1===u?0:1),n},selectWord:function(o){var u=this.searchWordBoundary(o=o||this.selectionStart,-1),c=this.searchWordBoundary(o,1);this.selectionStart=u,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(o){var u=this.findLineBoundaryLeft(o=o||this.selectionStart),c=this.findLineBoundaryRight(o);return this.selectionStart=u,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(o){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(o),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(o){o._iTextInstances&&o._iTextInstances.forEach(function(u){u.selected=!1,u.isEditing&&u.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(o){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var u=this.getSelectionStartFromPointer(o.e),c=this.selectionStart,n=this.selectionEnd;(u!==this.__selectionStartOnMouseDown||c===n)&&(c===u||n===u)||(u>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=u):(this.selectionStart=u,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==c||this.selectionEnd!==n)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(o,u,c){var n=c.slice(0,o),s=_.util.string.graphemeSplit(n).length;if(o===u)return{selectionStart:s,selectionEnd:s};var e=c.slice(o,u);return{selectionStart:s,selectionEnd:s+_.util.string.graphemeSplit(e).length}},fromGraphemeToStringSelection:function(o,u,c){var s=c.slice(0,o).join("").length;return o===u?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+c.slice(o,u).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var o=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=o.selectionStart,this.hiddenTextarea.selectionEnd=o.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var o=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=o.selectionEnd,this.inCompositionMode||(this.selectionStart=o.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var o=this._calcTextareaPosition();this.hiddenTextarea.style.left=o.left,this.hiddenTextarea.style.top=o.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var o=this.inCompositionMode?this.compositionStart:this.selectionStart,u=this._getCursorBoundaries(o),c=this.get2DCursorLocation(o),e=this.getValueOfPropertyAt(c.lineIndex,c.charIndex,"fontSize")*this.lineHeight,a=u.leftOffset,l=this.calcTransformMatrix(),r={x:u.left+a,y:u.top+u.topOffset+e},h=this.canvas.getRetinaScaling(),g=this.canvas.upperCanvasEl,m=g.width/h,v=g.height/h,b=m-e,C=v-e,A=g.clientWidth/m,F=g.clientHeight/v;return r=_.util.transformPoint(r,l),(r=_.util.transformPoint(r,this.canvas.viewportTransform)).x*=A,r.y*=F,r.x<0&&(r.x=0),r.x>b&&(r.x=b),r.y<0&&(r.y=0),r.y>C&&(r.y=C),r.x+=this.canvas._offset.left,r.y+=this.canvas._offset.top,{left:r.x+"px",top:r.y+"px",fontSize:e+"px",charHeight:e}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var o=this._textBeforeEdit!==this.text,u=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,u&&(u.blur&&u.blur(),u.parentNode&&u.parentNode.removeChild(u)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),o&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),o&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var o in this.styles)this._textLines[o]||delete this.styles[o]},removeStyleFromTo:function(o,u){var r,h,c=this.get2DCursorLocation(o,!0),n=this.get2DCursorLocation(u,!0),s=c.lineIndex,e=c.charIndex,a=n.lineIndex,l=n.charIndex;if(s!==a){if(this.styles[s])for(r=e;r<this._unwrappedTextLines[s].length;r++)delete this.styles[s][r];if(this.styles[a])for(r=l;r<this._unwrappedTextLines[a].length;r++)(h=this.styles[a][r])&&(this.styles[s]||(this.styles[s]={}),this.styles[s][e+r-l]=h);for(r=s+1;r<=a;r++)delete this.styles[r];this.shiftLineStyles(a,s-a)}else if(this.styles[s]){h=this.styles[s];var m,v,g=l-e;for(r=e;r<l;r++)delete h[r];for(v in this.styles[s])(m=parseInt(v,10))>=l&&(h[m-g]=h[v],delete h[v])}},shiftLineStyles:function(o,u){var c=p(this.styles);for(var n in this.styles){var s=parseInt(n,10);s>o&&(this.styles[s+u]=c[s],c[s-u]||delete this.styles[s])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(o,u,c,n){var s,e={},a=!1,l=this._unwrappedTextLines[o].length===u;for(var r in c||(c=1),this.shiftLineStyles(o,c),this.styles[o]&&(s=this.styles[o][0===u?u:u-1]),this.styles[o]){var h=parseInt(r,10);h>=u&&(a=!0,e[h-u]=this.styles[o][r],l&&0===u||delete this.styles[o][r])}var g=!1;for(a&&!l&&(this.styles[o+c]=e,g=!0),g&&c--;c>0;)n&&n[c-1]?this.styles[o+c]={0:p(n[c-1])}:s?this.styles[o+c]={0:p(s)}:delete this.styles[o+c],c--;this._forceClearCache=!0},insertCharStyleObject:function(o,u,c,n){this.styles||(this.styles={});var s=this.styles[o],e=s?p(s):{};for(var a in c||(c=1),e){var l=parseInt(a,10);l>=u&&(s[l+c]=e[l],e[l-c]||delete s[l])}if(this._forceClearCache=!0,n)for(;c--;)Object.keys(n[c]).length&&(this.styles[o]||(this.styles[o]={}),this.styles[o][u+c]=p(n[c]));else if(s)for(var r=s[u?u-1:1];r&&c--;)this.styles[o][u+c]=p(r)},insertNewStyleBlock:function(o,u,c){for(var n=this.get2DCursorLocation(u,!0),s=[0],e=0,a=0;a<o.length;a++)"\n"===o[a]?s[++e]=0:s[e]++;for(s[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,s[0],c),c=c&&c.slice(s[0]+1)),e&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+s[0],e),a=1;a<e;a++)s[a]>0?this.insertCharStyleObject(n.lineIndex+a,0,s[a],c):c&&this.styles[n.lineIndex+a]&&c[0]&&(this.styles[n.lineIndex+a][0]=c[0]),c=c&&c.slice(s[a]+1);s[a]>0&&this.insertCharStyleObject(n.lineIndex+a,0,s[a],c)},setSelectionStartEndWithShift:function(o,u,c){c<=o?(u===o?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=o),this.selectionStart=c):c>o&&c<u?"right"===this._selectionDirection?this.selectionEnd=c:this.selectionStart=c:(u===o?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=u),this.selectionEnd=c)},setSelectionInBoundaries:function(){var o=this.text.length;this.selectionStart>o?this.selectionStart=o:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>o?this.selectionEnd=o:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),_.util.object.extend(_.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(p){if(this.canvas){this.__newClickTime=+new Date;var o=p.pointer;this.isTripleClick(o)&&(this.fire("tripleclick",p),this._stopEvent(p.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=o,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(p){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===p.x&&this.__lastPointer.y===p.y},_stopEvent:function(p){p.preventDefault&&p.preventDefault(),p.stopPropagation&&p.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(p){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(p.e))},tripleClickHandler:function(p){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(p.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(p){!this.canvas||!this.editable||p.e.button&&1!==p.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(p.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(p){!this.canvas||!this.editable||p.e.button&&1!==p.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(p){if(this.__isMousedown=!1,!(!this.editable||this.group||p.transform&&p.transform.actionPerformed||p.e.button&&1!==p.e.button)){if(this.canvas){var o=this.canvas._activeObject;if(o&&o!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(p.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(p){var o=this.getSelectionStartFromPointer(p);p.shiftKey?this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,o):(this.selectionStart=o,this.selectionEnd=o),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(p){for(var l,o=this.getLocalPointer(p),u=0,c=0,n=0,s=0,e=0,r=0,h=this._textLines.length;r<h&&n<=o.y;r++)n+=this.getHeightOfLine(r)*this.scaleY,e=r,r>0&&(s+=this._textLines[r-1].length+this.missingNewlineOffset(r-1));c=this._getLineLeftOffset(e)*this.scaleX,l=this._textLines[e],"rtl"===this.direction&&(o.x=this.width*this.scaleX-o.x+c);for(var g=0,m=l.length;g<m&&(u=c,(c+=this.__charBounds[e][g].kernedWidth*this.scaleX)<=o.x);g++)s++;return this._getNewSelectionStartFromOffset(o,u,c,s,m)},_getNewSelectionStartFromOffset:function(p,o,u,c,n){var e=u-p.x,l=c+(e>p.x-o||e<0?0:1);return this.flipX&&(l=n-l),l>this._text.length&&(l=this._text.length),l}}),_.util.object.extend(_.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=_.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var p=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+p.top+"; left: "+p.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+p.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):_.document.body.appendChild(this.hiddenTextarea),_.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),_.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),_.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),_.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),_.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),_.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),_.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),_.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),_.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(_.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(p){if(this.isEditing){var o="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(p.keyCode in o)this[o[p.keyCode]](p);else{if(!(p.keyCode in this.ctrlKeysMapDown)||!p.ctrlKey&&!p.metaKey)return;this[this.ctrlKeysMapDown[p.keyCode]](p)}p.stopImmediatePropagation(),p.preventDefault(),p.keyCode>=33&&p.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(p){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:p.keyCode in this.ctrlKeysMapUp&&(p.ctrlKey||p.metaKey)&&(this[this.ctrlKeysMapUp[p.keyCode]](p),p.stopImmediatePropagation(),p.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(p){var o=this.fromPaste;if(this.fromPaste=!1,p&&p.stopPropagation(),this.isEditing){var s,e,g,m,v,u=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,c=this._text.length,n=u.length,a=n-c,l=this.selectionStart,r=this.selectionEnd,h=l!==r;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var b=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),C=l>b.selectionStart;h?(s=this._text.slice(l,r),a+=r-l):n<c&&(s=C?this._text.slice(r+a,r):this._text.slice(l,l-a)),e=u.slice(b.selectionEnd-a,b.selectionEnd),s&&s.length&&(e.length&&(g=this.getSelectionStyles(l,l+1,!1),g=e.map(function(){return g[0]})),h?(m=l,v=r):C?(m=r-s.length,v=r):(m=r,v=r+s.length),this.removeStyleFromTo(m,v)),e.length&&(o&&e.join("")===_.copiedText&&!_.disableStyleCopyPaste&&(g=_.copiedTextStyle),this.insertNewStyleBlock(e,l,g)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(p){this.compositionStart=p.target.selectionStart,this.compositionEnd=p.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(_.copiedText=this.getSelectedText(),_.copiedTextStyle=_.disableStyleCopyPaste?null:this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(p){return p&&p.clipboardData||_.window.clipboardData},_getWidthBeforeCursor:function(p,o){var c,u=this._getLineLeftOffset(p);return o>0&&(u+=(c=this.__charBounds[p][o-1]).left+c.width),u},getDownCursorOffset:function(p,o){var u=this._getSelectionForOffset(p,o),c=this.get2DCursorLocation(u),n=c.lineIndex;if(n===this._textLines.length-1||p.metaKey||34===p.keyCode)return this._text.length-u;var s=c.charIndex,e=this._getWidthBeforeCursor(n,s),a=this._getIndexOnLine(n+1,e);return this._textLines[n].slice(s).length+a+1+this.missingNewlineOffset(n)},_getSelectionForOffset:function(p,o){return p.shiftKey&&this.selectionStart!==this.selectionEnd&&o?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(p,o){var u=this._getSelectionForOffset(p,o),c=this.get2DCursorLocation(u),n=c.lineIndex;if(0===n||p.metaKey||33===p.keyCode)return-u;var s=c.charIndex,e=this._getWidthBeforeCursor(n,s),a=this._getIndexOnLine(n-1,e),l=this._textLines[n].slice(0,s),r=this.missingNewlineOffset(n-1);return-this._textLines[n-1].length+a-l.length+(1-r)},_getIndexOnLine:function(p,o){for(var e,a,u=this._textLines[p],n=this._getLineLeftOffset(p),s=0,l=0,r=u.length;l<r;l++)if((n+=e=this.__charBounds[p][l].width)>o){a=!0;var g=n,m=Math.abs(n-e-o);s=Math.abs(g-o)<m?l:l-1;break}return a||(s=u.length-1),s},moveCursorDown:function(p){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",p)},moveCursorUp:function(p){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",p)},_moveCursorUpOrDown:function(p,o){var c=this["get"+p+"CursorOffset"](o,"right"===this._selectionDirection);o.shiftKey?this.moveCursorWithShift(c):this.moveCursorWithoutShift(c),0!==c&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(p){return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,"left"===this._selectionDirection?this.selectionStart+p:this.selectionEnd+p),0!==p},moveCursorWithoutShift:function(p){return p<0?(this.selectionStart+=p,this.selectionEnd=this.selectionStart):(this.selectionEnd+=p,this.selectionStart=this.selectionEnd),0!==p},moveCursorLeft:function(p){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",p)},_move:function(p,o,u){var c;if(p.altKey)c=this["findWordBoundary"+u](this[o]);else{if(!p.metaKey&&35!==p.keyCode&&36!==p.keyCode)return this[o]+="Left"===u?-1:1,!0;c=this["findLineBoundary"+u](this[o])}if(typeof c<"u"&&this[o]!==c)return this[o]=c,!0},_moveLeft:function(p,o){return this._move(p,o,"Left")},_moveRight:function(p,o){return this._move(p,o,"Right")},moveCursorLeftWithoutShift:function(p){var o=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(o=this._moveLeft(p,"selectionStart")),this.selectionEnd=this.selectionStart,o},moveCursorLeftWithShift:function(p){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(p,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(p,"selectionStart")):void 0},moveCursorRight:function(p){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",p)},_moveCursorLeftOrRight:function(p,o){var u="moveCursor"+p+"With";this._currentCursorOpacity=1,this[u+=o.shiftKey?"Shift":"outShift"](o)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(p){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(p,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(p,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(p){var o=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(o=this._moveRight(p,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,o},removeChars:function(p,o){typeof o>"u"&&(o=p+1),this.removeStyleFromTo(p,o),this._text.splice(p,o-p),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(p,o,u,c){typeof c>"u"&&(c=u),c>u&&this.removeStyleFromTo(u,c);var n=_.util.string.graphemeSplit(p);this.insertNewStyleBlock(n,u,o),this._text=[].concat(this._text.slice(0,u),n,this._text.slice(c)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var p=_.util.toFixed,o=/  +/g;_.util.object.extend(_.Text.prototype,{_toSVG:function(){var u=this._getSVGLeftTopOffsets(),c=this._getSVGTextAndBg(u.textTop,u.textLeft);return this._wrapSVGTextAndBg(c)},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(),{reviver:u,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(u){var n=this.getSvgTextDecoration(this);return[u.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",n?'text-decoration="'+n+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",u.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(u,c){var a,n=[],s=[],e=u;this._setSVGBg(s);for(var l=0,r=this._textLines.length;l<r;l++)a=this._getLineLeftOffset(l),(this.textBackgroundColor||this.styleHas("textBackgroundColor",l))&&this._setSVGTextLineBg(s,l,c+a,e),this._setSVGTextLineText(n,l,c+a,e),e+=this.getHeightOfLine(l);return{textSpans:n,textBgRects:s}},_createTextCharSpan:function(u,c,n,s){var e=u!==u.trim()||u.match(o),a=this.getSvgSpanStyles(c,e),l=a?'style="'+a+'"':"",r=c.deltaY,h="",g=_.Object.NUM_FRACTION_DIGITS;return r&&(h=' dy="'+p(r,g)+'" '),['<tspan x="',p(n,g),'" y="',p(s,g),'" ',h,l,">",_.util.string.escapeXml(u),"</tspan>"].join("")},_setSVGTextLineText:function(u,c,n,s){var l,r,g,m,C,e=this.getHeightOfLine(c),a=-1!==this.textAlign.indexOf("justify"),h="",v=0,b=this._textLines[c];s+=e*(1-this._fontSizeFraction)/this.lineHeight;for(var A=0,F=b.length-1;A<=F;A++)C=A===F||this.charSpacing,h+=b[A],g=this.__charBounds[c][A],0===v?(n+=g.kernedWidth-g.width,v+=g.width):v+=g.kernedWidth,a&&!C&&this._reSpaceAndTab.test(b[A])&&(C=!0),C||(l=l||this.getCompleteStyleDeclaration(c,A),r=this.getCompleteStyleDeclaration(c,A+1),C=_.util.hasStyleChanged(l,r,!0)),C&&(m=this._getStyleDeclaration(c,A)||{},u.push(this._createTextCharSpan(h,m,n,s)),h="",l=r,n+=v,v=0)},_pushTextBgRect:function(u,c,n,s,e,a){var l=_.Object.NUM_FRACTION_DIGITS;u.push("\t\t<rect ",this._getFillAttributes(c),' x="',p(n,l),'" y="',p(s,l),'" width="',p(e,l),'" height="',p(a,l),'"></rect>\n')},_setSVGTextLineBg:function(u,c,n,s){for(var h,g,e=this._textLines[c],a=this.getHeightOfLine(c)/this.lineHeight,l=0,r=0,m=this.getValueOfPropertyAt(c,0,"textBackgroundColor"),v=0,b=e.length;v<b;v++)h=this.__charBounds[c][v],(g=this.getValueOfPropertyAt(c,v,"textBackgroundColor"))!==m?(m&&this._pushTextBgRect(u,m,n+r,s,l,a),r=h.left,l=h.width,m=g):l+=h.kernedWidth;g&&this._pushTextBgRect(u,g,n+r,s,l,a)},_getFillAttributes:function(u){var c=u&&"string"==typeof u?new _.Color(u):"";return c&&c.getSource()&&1!==c.getAlpha()?'opacity="'+c.getAlpha()+'" fill="'+c.setAlpha(1).toRgb()+'"':'fill="'+u+'"'},_getSVGLineTopOffset:function(u){for(var n,c=0,s=0;s<u;s++)c+=this.getHeightOfLine(s);return n=this.getHeightOfLine(s),{lineTop:c,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(u){return _.Object.prototype.getSvgStyles.call(this,u)+" white-space: pre;"}})}(),function(p){"use strict";var o=p.fabric||(p.fabric={});o.Textbox=o.util.createClass(o.IText,o.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:o.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(u){for(var c=0,n=0,s=0,e={},a=0;a<u.graphemeLines.length;a++)"\n"===u.graphemeText[s]&&a>0?(n=0,s++,c++):!this.splitByGrapheme&&this._reSpaceAndTab.test(u.graphemeText[s])&&a>0&&(n++,s++),e[a]={line:c,offset:n},s+=u.graphemeLines[a].length,n+=u.graphemeLines[a].length;return e},styleHas:function(u,c){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[c];n&&(c=n.line)}return o.Text.prototype.styleHas.call(this,u,c)},isEmptyStyles:function(u){if(!this.styles)return!0;var s,e,c=0,a=!1,l=this._styleMap[u],r=this._styleMap[u+1];for(var h in l&&(u=l.line,c=l.offset),r&&(a=r.line===u,s=r.offset),e=typeof u>"u"?this.styles:{line:this.styles[u]})for(var g in e[h])if(g>=c&&(!a||g<s))for(var m in e[h][g])return!1;return!0},_getStyleDeclaration:function(u,c){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[u];if(!n)return null;u=n.line,c=n.offset+c}return this.callSuper("_getStyleDeclaration",u,c)},_setStyleDeclaration:function(u,c,n){var s=this._styleMap[u];this.styles[u=s.line][c=s.offset+c]=n},_deleteStyleDeclaration:function(u,c){var n=this._styleMap[u];delete this.styles[u=n.line][c=n.offset+c]},_getLineStyle:function(u){return!!this.styles[this._styleMap[u].line]},_setLineStyle:function(u){this.styles[this._styleMap[u].line]={}},_wrapText:function(u,c){var s,n=[];for(this.isWrapping=!0,s=0;s<u.length;s++)n=n.concat(this._wrapLine(u[s],s,c));return this.isWrapping=!1,n},_measureWord:function(u,c,n){var e,s=0;n=n||0;for(var l=0,r=u.length;l<r;l++)s+=this._getGraphemeBox(u[l],c,l+n,e,!0).kernedWidth,e=u[l];return s},_wrapLine:function(u,c,n,ot){var e=0,a=this.splitByGrapheme,l=[],r=[],h=a?o.util.string.graphemeSplit(u):u.split(this._wordJoiners),g="",m=0,v=a?"":" ",b=0,C=0,A=0,F=!0,G=this._getWidthOfCharSpacing();ot=ot||0,0===h.length&&h.push([]),n-=ot;for(var ut=0;ut<h.length;ut++)g=a?h[ut]:o.util.string.graphemeSplit(h[ut]),b=this._measureWord(g,c,m),m+=g.length,(e+=C+b-G)>n&&!F?(l.push(r),r=[],e=b,F=!0):e+=G,!F&&!a&&r.push(v),r=r.concat(g),C=a?0:this._measureWord([v],c,m),m++,F=!1,b>A&&(A=b);return ut&&l.push(r),A+ot>this.dynamicMinWidth&&(this.dynamicMinWidth=A-G+ot),l},isEndOfWrapping:function(u){return!this._styleMap[u+1]||this._styleMap[u+1].line!==this._styleMap[u].line},missingNewlineOffset:function(u){return this.splitByGrapheme?this.isEndOfWrapping(u)?1:0:1},_splitTextIntoLines:function(u){for(var c=o.Text.prototype._splitTextIntoLines.call(this,u),n=this._wrapText(c.lines,this.width),s=new Array(n.length),e=0;e<n.length;e++)s[e]=n[e].join("");return c.lines=s,c.graphemeLines=n,c},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var u={};for(var c in this._styleMap)this._textLines[c]&&(u[this._styleMap[c].line]=1);for(var c in this.styles)u[c]||delete this.styles[c]},toObject:function(u){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(u))}}),o.Textbox.fromObject=function(u,c){var n=o.util.stylesFromArray(u.styles,u.text),s=Object.assign({},u,{styles:n});return o.Object._fromObject("Textbox",s,c,"text")}}(At),function(){var p=_.controlsUtils,o=p.scaleSkewCursorStyleHandler,u=p.scaleCursorStyleHandler,c=p.scalingEqually,n=p.scalingYOrSkewingX,s=p.scalingXOrSkewingY,e=p.scaleOrSkewActionName,a=_.Object.prototype.controls;if(a.ml=new _.Control({x:-.5,y:0,cursorStyleHandler:o,actionHandler:s,getActionName:e}),a.mr=new _.Control({x:.5,y:0,cursorStyleHandler:o,actionHandler:s,getActionName:e}),a.mb=new _.Control({x:0,y:.5,cursorStyleHandler:o,actionHandler:n,getActionName:e}),a.mt=new _.Control({x:0,y:-.5,cursorStyleHandler:o,actionHandler:n,getActionName:e}),a.tl=new _.Control({x:-.5,y:-.5,cursorStyleHandler:u,actionHandler:c}),a.tr=new _.Control({x:.5,y:-.5,cursorStyleHandler:u,actionHandler:c}),a.bl=new _.Control({x:-.5,y:.5,cursorStyleHandler:u,actionHandler:c}),a.br=new _.Control({x:.5,y:.5,cursorStyleHandler:u,actionHandler:c}),a.mtr=new _.Control({x:0,y:-.5,actionHandler:p.rotationWithSnapping,cursorStyleHandler:p.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),_.Textbox){var l=_.Textbox.prototype.controls={};l.mtr=a.mtr,l.tr=a.tr,l.br=a.br,l.tl=a.tl,l.bl=a.bl,l.mt=a.mt,l.mb=a.mb,l.mr=new _.Control({x:.5,y:0,actionHandler:p.changeWidth,cursorStyleHandler:o,actionName:"resizing"}),l.ml=new _.Control({x:-.5,y:0,actionHandler:p.changeWidth,cursorStyleHandler:o,actionName:"resizing"})}}()},7489:function(ti,At,se){var _;ti=se.nmd(ti),function(){var E,Ve=200,de="Expected a function",o="__lodash_hash_undefined__",c="__lodash_placeholder__",n=1,s=2,e=4,a=1,l=2,r=1,h=2,g=4,m=8,v=16,b=32,C=64,A=128,F=256,G=512,gt=800,_t=16,wt=1/0,vt=9007199254740991,k=17976931348623157e292,M=NaN,D=4294967295,R=D-1,Z=D>>>1,P=[["ary",A],["bind",r],["bindKey",h],["curry",m],["curryRight",v],["flip",G],["partial",b],["partialRight",C],["rearg",F]],O="[object Arguments]",z="[object Array]",N="[object AsyncFunction]",J="[object Boolean]",X="[object Date]",rt="[object DOMException]",lt="[object Error]",dt="[object Function]",K="[object GeneratorFunction]",U="[object Map]",$="[object Number]",it="[object Null]",q="[object Object]",st="[object Promise]",et="[object Proxy]",Pt="[object RegExp]",yt="[object Set]",Q="[object String]",St="[object Symbol]",Ft="[object Undefined]",Bt="[object WeakMap]",Ut="[object ArrayBuffer]",ee="[object DataView]",Jt="[object Float32Array]",xe="[object Float64Array]",Ne="[object Int8Array]",_e="[object Int16Array]",Y="[object Int32Array]",pt="[object Uint8Array]",S="[object Uint8ClampedArray]",I="[object Uint16Array]",j="[object Uint32Array]",xt=/\b__p \+= '';/g,Ot=/\b(__p \+=) '' \+/g,Gt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ne=/&(?:amp|lt|gt|quot|#39);/g,oe=/[&<>"']/g,ye=RegExp(ne.source),Re=RegExp(oe.source),Mt=/<%-([\s\S]+?)%>/g,kt=/<%([\s\S]+?)%>/g,Xt=/<%=([\s\S]+?)%>/g,Ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bi=/^\w*$/,rs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Se=/[\\^$.*+?()[\]{}|]/g,Fo=RegExp(Se.source),Zn=/^\s+/,Mo=/\s/,Ro=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Io=/\{\n\/\* \[wrapped with (.+)\] \*/,Bo=/,? & /,jo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zo=/[()=,{}\[\]\/\s]/,Ho=/\\(\\)?/g,Uo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ss=/\w*$/,Wo=/^[-+]0x[0-9a-f]+$/i,Yo=/^0b[01]+$/i,No=/^\[object .+?Constructor\]$/,Xo=/^0o[0-7]+$/i,Go=/^(?:0|[1-9]\d*)$/,qo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,sn=/($^)/,Zo=/['\n\r\u2028\u2029\\]/g,an="\\ud800-\\udfff",as="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",os="\\u2700-\\u27bf",ls="a-z\\xdf-\\xf6\\xf8-\\xff",cs="A-Z\\xc0-\\xd6\\xd8-\\xde",us="\\ufe0e\\ufe0f",hs="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",il="["+an+"]",ds="["+hs+"]",on="["+as+"]",fs="\\d+",nl="["+os+"]",ps="["+ls+"]",gs="[^"+an+hs+fs+os+ls+cs+"]",Kn="\\ud83c[\\udffb-\\udfff]",_s="[^"+an+"]",Jn="(?:\\ud83c[\\udde6-\\uddff]){2}",Qn="[\\ud800-\\udbff][\\udc00-\\udfff]",Pi="["+cs+"]",vs="(?:"+ps+"|"+gs+")",sl="(?:"+Pi+"|"+gs+")",ys="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",bs="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",ws="(?:"+on+"|"+Kn+")?",Cs="["+us+"]?",xs=Cs+ws+"(?:\\u200d(?:"+[_s,Jn,Qn].join("|")+")"+Cs+ws+")*",cl="(?:"+[nl,Jn,Qn].join("|")+")"+xs,ul="(?:"+[_s+on+"?",on,Jn,Qn,il].join("|")+")",hl=RegExp("['\u2019]","g"),dl=RegExp(on,"g"),$n=RegExp(Kn+"(?="+Kn+")|"+ul+xs,"g"),fl=RegExp([Pi+"?"+ps+"+"+ys+"(?="+[ds,Pi,"$"].join("|")+")",sl+"+"+bs+"(?="+[ds,Pi+vs,"$"].join("|")+")",Pi+"?"+vs+"+"+ys,Pi+"+"+bs,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fs,cl].join("|"),"g"),pl=RegExp("[\\u200d"+an+as+us+"]"),gl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_l=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ml=-1,te={};te[Jt]=te[xe]=te[Ne]=te[_e]=te[Y]=te[pt]=te[S]=te[I]=te[j]=!0,te[O]=te[z]=te[Ut]=te[J]=te[ee]=te[X]=te[lt]=te[dt]=te[U]=te[$]=te[q]=te[Pt]=te[yt]=te[Q]=te[Bt]=!1;var $t={};$t[O]=$t[z]=$t[Ut]=$t[ee]=$t[J]=$t[X]=$t[Jt]=$t[xe]=$t[Ne]=$t[_e]=$t[Y]=$t[U]=$t[$]=$t[q]=$t[Pt]=$t[yt]=$t[Q]=$t[St]=$t[pt]=$t[S]=$t[I]=$t[j]=!0,$t[lt]=$t[dt]=$t[Bt]=!1;var wl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Cl=parseFloat,xl=parseInt,Ss="object"==typeof global&&global&&global.Object===Object&&global,Sl="object"==typeof self&&self&&self.Object===Object&&self,pe=Ss||Sl||Function("return this")(),Ts=At&&!At.nodeType&&At,Wi=Ts&&ti&&!ti.nodeType&&ti,ks=Wi&&Wi.exports===Ts,tr=ks&&Ss.process,Ie=function(){try{return Wi&&Wi.require&&Wi.require("util").types||tr&&tr.binding&&tr.binding("util")}catch{}}(),Os=Ie&&Ie.isArrayBuffer,As=Ie&&Ie.isDate,Ps=Ie&&Ie.isMap,Ls=Ie&&Ie.isRegExp,Es=Ie&&Ie.isSet,Ds=Ie&&Ie.isTypedArray;function Pe(H,tt,V){switch(V.length){case 0:return H.call(tt);case 1:return H.call(tt,V[0]);case 2:return H.call(tt,V[0],V[1]);case 3:return H.call(tt,V[0],V[1],V[2])}return H.apply(tt,V)}function Tl(H,tt,V,Ct){for(var Rt=-1,qt=null==H?0:H.length;++Rt<qt;){var ue=H[Rt];tt(Ct,ue,V(ue),H)}return Ct}function Be(H,tt){for(var V=-1,Ct=null==H?0:H.length;++V<Ct&&!1!==tt(H[V],V,H););return H}function kl(H,tt){for(var V=null==H?0:H.length;V--&&!1!==tt(H[V],V,H););return H}function Fs(H,tt){for(var V=-1,Ct=null==H?0:H.length;++V<Ct;)if(!tt(H[V],V,H))return!1;return!0}function ui(H,tt){for(var V=-1,Ct=null==H?0:H.length,Rt=0,qt=[];++V<Ct;){var ue=H[V];tt(ue,V,H)&&(qt[Rt++]=ue)}return qt}function ln(H,tt){return!(null==H||!H.length)&&Li(H,tt,0)>-1}function er(H,tt,V){for(var Ct=-1,Rt=null==H?0:H.length;++Ct<Rt;)if(V(tt,H[Ct]))return!0;return!1}function ie(H,tt){for(var V=-1,Ct=null==H?0:H.length,Rt=Array(Ct);++V<Ct;)Rt[V]=tt(H[V],V,H);return Rt}function hi(H,tt){for(var V=-1,Ct=tt.length,Rt=H.length;++V<Ct;)H[Rt+V]=tt[V];return H}function ir(H,tt,V,Ct){var Rt=-1,qt=null==H?0:H.length;for(Ct&&qt&&(V=H[++Rt]);++Rt<qt;)V=tt(V,H[Rt],Rt,H);return V}function Ol(H,tt,V,Ct){var Rt=null==H?0:H.length;for(Ct&&Rt&&(V=H[--Rt]);Rt--;)V=tt(V,H[Rt],Rt,H);return V}function nr(H,tt){for(var V=-1,Ct=null==H?0:H.length;++V<Ct;)if(tt(H[V],V,H))return!0;return!1}var Al=rr("length");function Ms(H,tt,V){var Ct;return V(H,function(Rt,qt,ue){if(tt(Rt,qt,ue))return Ct=qt,!1}),Ct}function cn(H,tt,V,Ct){for(var Rt=H.length,qt=V+(Ct?1:-1);Ct?qt--:++qt<Rt;)if(tt(H[qt],qt,H))return qt;return-1}function Li(H,tt,V){return tt==tt?function Wl(H,tt,V){for(var Ct=V-1,Rt=H.length;++Ct<Rt;)if(H[Ct]===tt)return Ct;return-1}(H,tt,V):cn(H,Rs,V)}function El(H,tt,V,Ct){for(var Rt=V-1,qt=H.length;++Rt<qt;)if(Ct(H[Rt],tt))return Rt;return-1}function Rs(H){return H!=H}function Is(H,tt){var V=null==H?0:H.length;return V?ar(H,tt)/V:M}function rr(H){return function(tt){return null==tt?E:tt[H]}}function sr(H){return function(tt){return null==H?E:H[tt]}}function Bs(H,tt,V,Ct,Rt){return Rt(H,function(qt,ue,Qt){V=Ct?(Ct=!1,qt):tt(V,qt,ue,Qt)}),V}function ar(H,tt){for(var V,Ct=-1,Rt=H.length;++Ct<Rt;){var qt=tt(H[Ct]);qt!==E&&(V=V===E?qt:V+qt)}return V}function or(H,tt){for(var V=-1,Ct=Array(H);++V<H;)Ct[V]=tt(V);return Ct}function js(H){return H&&H.slice(0,Ws(H)+1).replace(Zn,"")}function Le(H){return function(tt){return H(tt)}}function lr(H,tt){return ie(tt,function(V){return H[V]})}function Yi(H,tt){return H.has(tt)}function zs(H,tt){for(var V=-1,Ct=H.length;++V<Ct&&Li(tt,H[V],0)>-1;);return V}function Hs(H,tt){for(var V=H.length;V--&&Li(tt,H[V],0)>-1;);return V}var Rl=sr({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Il=sr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Bl(H){return"\\"+wl[H]}function Ei(H){return pl.test(H)}function cr(H){var tt=-1,V=Array(H.size);return H.forEach(function(Ct,Rt){V[++tt]=[Rt,Ct]}),V}function Us(H,tt){return function(V){return H(tt(V))}}function di(H,tt){for(var V=-1,Ct=H.length,Rt=0,qt=[];++V<Ct;){var ue=H[V];(ue===tt||ue===c)&&(H[V]=c,qt[Rt++]=V)}return qt}function un(H){var tt=-1,V=Array(H.size);return H.forEach(function(Ct){V[++tt]=Ct}),V}function Di(H){return Ei(H)?function Xl(H){for(var tt=$n.lastIndex=0;$n.test(H);)++tt;return tt}(H):Al(H)}function Xe(H){return Ei(H)?function Gl(H){return H.match($n)||[]}(H):function Pl(H){return H.split("")}(H)}function Ws(H){for(var tt=H.length;tt--&&Mo.test(H.charAt(tt)););return tt}var Nl=sr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hn=function H(tt){var t,V=(tt=null==tt?pe:hn.defaults(pe.Object(),tt,hn.pick(pe,_l))).Array,Ct=tt.Date,Rt=tt.Error,qt=tt.Function,ue=tt.Math,Qt=tt.Object,ur=tt.RegExp,Vl=tt.String,je=tt.TypeError,dn=V.prototype,Fi=Qt.prototype,fn=tt["__core-js_shared__"],pn=qt.prototype.toString,Vt=Fi.hasOwnProperty,Jl=0,Ys=(t=/[^.]+$/.exec(fn&&fn.keys&&fn.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",gn=Fi.toString,Ql=pn.call(Qt),$l=pe._,tc=ur("^"+pn.call(Vt).replace(Se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_n=ks?tt.Buffer:E,fi=tt.Symbol,mn=tt.Uint8Array,Ns=_n?_n.allocUnsafe:E,vn=Us(Qt.getPrototypeOf,Qt),Xs=Qt.create,Gs=Fi.propertyIsEnumerable,yn=dn.splice,qs=fi?fi.isConcatSpreadable:E,Ni=fi?fi.iterator:E,wi=fi?fi.toStringTag:E,bn=function(){try{var t=ki(Qt,"defineProperty");return t({},"",{}),t}catch{}}(),ec=tt.clearTimeout!==pe.clearTimeout&&tt.clearTimeout,ic=Ct&&Ct.now!==pe.Date.now&&Ct.now,nc=tt.setTimeout!==pe.setTimeout&&tt.setTimeout,wn=ue.ceil,Cn=ue.floor,hr=Qt.getOwnPropertySymbols,rc=_n?_n.isBuffer:E,Zs=tt.isFinite,sc=dn.join,ac=Us(Qt.keys,Qt),he=ue.max,me=ue.min,oc=Ct.now,lc=tt.parseInt,Vs=ue.random,cc=dn.reverse,dr=ki(tt,"DataView"),Xi=ki(tt,"Map"),fr=ki(tt,"Promise"),Mi=ki(tt,"Set"),Gi=ki(tt,"WeakMap"),qi=ki(Qt,"create"),xn=Gi&&new Gi,Ri={},uc=Oi(dr),hc=Oi(Xi),dc=Oi(fr),fc=Oi(Mi),pc=Oi(Gi),Sn=fi?fi.prototype:E,Zi=Sn?Sn.valueOf:E,Ks=Sn?Sn.toString:E;function x(t){if(ae(t)&&!It(t)&&!(t instanceof Yt)){if(t instanceof ze)return t;if(Vt.call(t,"__wrapped__"))return Ja(t)}return new ze(t)}var Ii=function(){function t(){}return function(i){if(!re(i))return{};if(Xs)return Xs(i);t.prototype=i;var d=new t;return t.prototype=E,d}}();function Tn(){}function ze(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=E}function Yt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=D,this.__views__=[]}function Ci(t){var i=-1,d=null==t?0:t.length;for(this.clear();++i<d;){var y=t[i];this.set(y[0],y[1])}}function ei(t){var i=-1,d=null==t?0:t.length;for(this.clear();++i<d;){var y=t[i];this.set(y[0],y[1])}}function ii(t){var i=-1,d=null==t?0:t.length;for(this.clear();++i<d;){var y=t[i];this.set(y[0],y[1])}}function xi(t){var i=-1,d=null==t?0:t.length;for(this.__data__=new ii;++i<d;)this.add(t[i])}function Ge(t){var i=this.__data__=new ei(t);this.size=i.size}function Js(t,i){var d=It(t),y=!d&&Ai(t),w=!d&&!y&&vi(t),T=!d&&!y&&!w&&Hi(t),L=d||y||w||T,B=L?or(t.length,Vl):[],W=B.length;for(var nt in t)(i||Vt.call(t,nt))&&(!L||!("length"==nt||w&&("offset"==nt||"parent"==nt)||T&&("buffer"==nt||"byteLength"==nt||"byteOffset"==nt)||ai(nt,W)))&&B.push(nt);return B}function Qs(t){var i=t.length;return i?t[Sr(0,i-1)]:E}function Hc(t,i){return zn(Te(t),Si(i,0,t.length))}function Uc(t){return zn(Te(t))}function pr(t,i,d){(d!==E&&!qe(t[i],d)||d===E&&!(i in t))&&ni(t,i,d)}function Vi(t,i,d){var y=t[i];(!Vt.call(t,i)||!qe(y,d)||d===E&&!(i in t))&&ni(t,i,d)}function kn(t,i){for(var d=t.length;d--;)if(qe(t[d][0],i))return d;return-1}function Wc(t,i,d,y){return pi(t,function(w,T,L){i(y,w,d(w),L)}),y}function $s(t,i){return t&&Qe(i,fe(i),t)}function ni(t,i,d){"__proto__"==i&&bn?bn(t,i,{configurable:!0,enumerable:!0,value:d,writable:!0}):t[i]=d}function gr(t,i){for(var d=-1,y=i.length,w=V(y),T=null==t;++d<y;)w[d]=T?E:Vr(t,i[d]);return w}function Si(t,i,d){return t==t&&(d!==E&&(t=t<=d?t:d),i!==E&&(t=t>=i?t:i)),t}function He(t,i,d,y,w,T){var L,B=i&n,W=i&s,nt=i&e;if(d&&(L=w?d(t,y,w,T):d(t)),L!==E)return L;if(!re(t))return t;var at=It(t);if(at){if(L=function Eu(t){var i=t.length,d=new t.constructor(i);return i&&"string"==typeof t[0]&&Vt.call(t,"index")&&(d.index=t.index,d.input=t.input),d}(t),!B)return Te(t,L)}else{var ct=ve(t),mt=ct==dt||ct==K;if(vi(t))return xa(t,B);if(ct==q||ct==O||mt&&!w){if(L=W||mt?{}:Wa(t),!B)return W?function bu(t,i){return Qe(t,Ha(t),i)}(t,function Yc(t,i){return t&&Qe(i,Oe(i),t)}(L,t)):function yu(t,i){return Qe(t,jr(t),i)}(t,$s(L,t))}else{if(!$t[ct])return w?t:{};L=function Du(t,i,d){var y=t.constructor;switch(i){case Ut:return Er(t);case J:case X:return new y(+t);case ee:return function gu(t,i){var d=i?Er(t.buffer):t.buffer;return new t.constructor(d,t.byteOffset,t.byteLength)}(t,d);case Jt:case xe:case Ne:case _e:case Y:case pt:case S:case I:case j:return Sa(t,d);case U:return new y;case $:case Q:return new y(t);case Pt:return function _u(t){var i=new t.constructor(t.source,ss.exec(t));return i.lastIndex=t.lastIndex,i}(t);case yt:return new y;case St:return function mu(t){return Zi?Qt(Zi.call(t)):{}}(t)}}(t,ct,B)}}T||(T=new Ge);var Tt=T.get(t);if(Tt)return Tt;T.set(t,L),vo(t)?t.forEach(function(Dt){L.add(He(Dt,i,d,Dt,t,T))}):_o(t)&&t.forEach(function(Dt,Wt){L.set(Wt,He(Dt,i,d,Wt,t,T))});var zt=at?E:(nt?W?Rr:Mr:W?Oe:fe)(t);return Be(zt||t,function(Dt,Wt){zt&&(Dt=t[Wt=Dt]),Vi(L,Wt,He(Dt,i,d,Wt,t,T))}),L}function ta(t,i,d){var y=d.length;if(null==t)return!y;for(t=Qt(t);y--;){var w=d[y],L=t[w];if(L===E&&!(w in t)||!(0,i[w])(L))return!1}return!0}function ea(t,i,d){if("function"!=typeof t)throw new je(de);return nn(function(){t.apply(E,d)},i)}function Ki(t,i,d,y){var w=-1,T=ln,L=!0,B=t.length,W=[],nt=i.length;if(!B)return W;d&&(i=ie(i,Le(d))),y?(T=er,L=!1):i.length>=Ve&&(T=Yi,L=!1,i=new xi(i));t:for(;++w<B;){var at=t[w],ct=null==d?at:d(at);if(at=y||0!==at?at:0,L&&ct==ct){for(var mt=nt;mt--;)if(i[mt]===ct)continue t;W.push(at)}else T(i,ct,y)||W.push(at)}return W}x.templateSettings={escape:Mt,evaluate:kt,interpolate:Xt,variable:"",imports:{_:x}},(x.prototype=Tn.prototype).constructor=x,(ze.prototype=Ii(Tn.prototype)).constructor=ze,(Yt.prototype=Ii(Tn.prototype)).constructor=Yt,Ci.prototype.clear=function vc(){this.__data__=qi?qi(null):{},this.size=0},Ci.prototype.delete=function yc(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i},Ci.prototype.get=function bc(t){var i=this.__data__;if(qi){var d=i[t];return d===o?E:d}return Vt.call(i,t)?i[t]:E},Ci.prototype.has=function wc(t){var i=this.__data__;return qi?i[t]!==E:Vt.call(i,t)},Ci.prototype.set=function Cc(t,i){var d=this.__data__;return this.size+=this.has(t)?0:1,d[t]=qi&&i===E?o:i,this},ei.prototype.clear=function xc(){this.__data__=[],this.size=0},ei.prototype.delete=function Sc(t){var i=this.__data__,d=kn(i,t);return!(d<0||(d==i.length-1?i.pop():yn.call(i,d,1),--this.size,0))},ei.prototype.get=function Tc(t){var i=this.__data__,d=kn(i,t);return d<0?E:i[d][1]},ei.prototype.has=function kc(t){return kn(this.__data__,t)>-1},ei.prototype.set=function Oc(t,i){var d=this.__data__,y=kn(d,t);return y<0?(++this.size,d.push([t,i])):d[y][1]=i,this},ii.prototype.clear=function Ac(){this.size=0,this.__data__={hash:new Ci,map:new(Xi||ei),string:new Ci}},ii.prototype.delete=function Pc(t){var i=jn(this,t).delete(t);return this.size-=i?1:0,i},ii.prototype.get=function Lc(t){return jn(this,t).get(t)},ii.prototype.has=function Ec(t){return jn(this,t).has(t)},ii.prototype.set=function Dc(t,i){var d=jn(this,t),y=d.size;return d.set(t,i),this.size+=d.size==y?0:1,this},xi.prototype.add=xi.prototype.push=function Fc(t){return this.__data__.set(t,o),this},xi.prototype.has=function Mc(t){return this.__data__.has(t)},Ge.prototype.clear=function Rc(){this.__data__=new ei,this.size=0},Ge.prototype.delete=function Ic(t){var i=this.__data__,d=i.delete(t);return this.size=i.size,d},Ge.prototype.get=function Bc(t){return this.__data__.get(t)},Ge.prototype.has=function jc(t){return this.__data__.has(t)},Ge.prototype.set=function zc(t,i){var d=this.__data__;if(d instanceof ei){var y=d.__data__;if(!Xi||y.length<Ve-1)return y.push([t,i]),this.size=++d.size,this;d=this.__data__=new ii(y)}return d.set(t,i),this.size=d.size,this};var pi=Aa(Je),ia=Aa(mr,!0);function Xc(t,i){var d=!0;return pi(t,function(y,w,T){return d=!!i(y,w,T)}),d}function On(t,i,d){for(var y=-1,w=t.length;++y<w;){var T=t[y],L=i(T);if(null!=L&&(B===E?L==L&&!De(L):d(L,B)))var B=L,W=T}return W}function na(t,i){var d=[];return pi(t,function(y,w,T){i(y,w,T)&&d.push(y)}),d}function ge(t,i,d,y,w){var T=-1,L=t.length;for(d||(d=Mu),w||(w=[]);++T<L;){var B=t[T];i>0&&d(B)?i>1?ge(B,i-1,d,y,w):hi(w,B):y||(w[w.length]=B)}return w}var _r=Pa(),ra=Pa(!0);function Je(t,i){return t&&_r(t,i,fe)}function mr(t,i){return t&&ra(t,i,fe)}function An(t,i){return ui(i,function(d){return oi(t[d])})}function Ti(t,i){for(var d=0,y=(i=_i(i,t)).length;null!=t&&d<y;)t=t[$e(i[d++])];return d&&d==y?t:E}function sa(t,i,d){var y=i(t);return It(t)?y:hi(y,d(t))}function be(t){return null==t?t===E?Ft:it:wi&&wi in Qt(t)?function Au(t){var i=Vt.call(t,wi),d=t[wi];try{t[wi]=E;var y=!0}catch{}var w=gn.call(t);return y&&(i?t[wi]=d:delete t[wi]),w}(t):function Uu(t){return gn.call(t)}(t)}function vr(t,i){return t>i}function qc(t,i){return null!=t&&Vt.call(t,i)}function Zc(t,i){return null!=t&&i in Qt(t)}function yr(t,i,d){for(var y=d?er:ln,w=t[0].length,T=t.length,L=T,B=V(T),W=1/0,nt=[];L--;){var at=t[L];L&&i&&(at=ie(at,Le(i))),W=me(at.length,W),B[L]=!d&&(i||w>=120&&at.length>=120)?new xi(L&&at):E}at=t[0];var ct=-1,mt=B[0];t:for(;++ct<w&&nt.length<W;){var Tt=at[ct],Et=i?i(Tt):Tt;if(Tt=d||0!==Tt?Tt:0,!(mt?Yi(mt,Et):y(nt,Et,d))){for(L=T;--L;){var zt=B[L];if(!(zt?Yi(zt,Et):y(t[L],Et,d)))continue t}mt&&mt.push(Et),nt.push(Tt)}}return nt}function Ji(t,i,d){var y=null==(t=Ga(t,i=_i(i,t)))?t:t[$e(We(i))];return null==y?E:Pe(y,t,d)}function aa(t){return ae(t)&&be(t)==O}function Qi(t,i,d,y,w){return t===i||(null==t||null==i||!ae(t)&&!ae(i)?t!=t&&i!=i:function $c(t,i,d,y,w,T){var L=It(t),B=It(i),W=L?z:ve(t),nt=B?z:ve(i),at=(W=W==O?q:W)==q,ct=(nt=nt==O?q:nt)==q,mt=W==nt;if(mt&&vi(t)){if(!vi(i))return!1;L=!0,at=!1}if(mt&&!at)return T||(T=new Ge),L||Hi(t)?za(t,i,d,y,w,T):function ku(t,i,d,y,w,T,L){switch(d){case ee:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case Ut:return!(t.byteLength!=i.byteLength||!T(new mn(t),new mn(i)));case J:case X:case $:return qe(+t,+i);case lt:return t.name==i.name&&t.message==i.message;case Pt:case Q:return t==i+"";case U:var B=cr;case yt:if(B||(B=un),t.size!=i.size&&!(y&a))return!1;var nt=L.get(t);if(nt)return nt==i;y|=l,L.set(t,i);var at=za(B(t),B(i),y,w,T,L);return L.delete(t),at;case St:if(Zi)return Zi.call(t)==Zi.call(i)}return!1}(t,i,W,d,y,w,T);if(!(d&a)){var Tt=at&&Vt.call(t,"__wrapped__"),Et=ct&&Vt.call(i,"__wrapped__");if(Tt||Et){var zt=Tt?t.value():t,Dt=Et?i.value():i;return T||(T=new Ge),w(zt,Dt,d,y,T)}}return!!mt&&(T||(T=new Ge),function Ou(t,i,d,y,w,T){var L=d&a,B=Mr(t),W=B.length;if(W!=Mr(i).length&&!L)return!1;for(var ct=W;ct--;){var mt=B[ct];if(!(L?mt in i:Vt.call(i,mt)))return!1}var Tt=T.get(t),Et=T.get(i);if(Tt&&Et)return Tt==i&&Et==t;var zt=!0;T.set(t,i),T.set(i,t);for(var Dt=L;++ct<W;){var Wt=t[mt=B[ct]],Nt=i[mt];if(y)var Fe=L?y(Nt,Wt,mt,i,t,T):y(Wt,Nt,mt,t,i,T);if(!(Fe===E?Wt===Nt||w(Wt,Nt,d,y,T):Fe)){zt=!1;break}Dt||(Dt="constructor"==mt)}if(zt&&!Dt){var Ce=t.constructor,Me=i.constructor;Ce!=Me&&"constructor"in t&&"constructor"in i&&!("function"==typeof Ce&&Ce instanceof Ce&&"function"==typeof Me&&Me instanceof Me)&&(zt=!1)}return T.delete(t),T.delete(i),zt}(t,i,d,y,w,T))}(t,i,d,y,Qi,w))}function br(t,i,d,y){var w=d.length,T=w,L=!y;if(null==t)return!T;for(t=Qt(t);w--;){var B=d[w];if(L&&B[2]?B[1]!==t[B[0]]:!(B[0]in t))return!1}for(;++w<T;){var W=(B=d[w])[0],nt=t[W],at=B[1];if(L&&B[2]){if(nt===E&&!(W in t))return!1}else{var ct=new Ge;if(y)var mt=y(nt,at,W,t,i,ct);if(!(mt===E?Qi(at,nt,a|l,y,ct):mt))return!1}}return!0}function oa(t){return!(!re(t)||function Iu(t){return!!Ys&&Ys in t}(t))&&(oi(t)?tc:No).test(Oi(t))}function la(t){return"function"==typeof t?t:null==t?Ae:"object"==typeof t?It(t)?ha(t[0],t[1]):ua(t):Eo(t)}function wr(t){if(!en(t))return ac(t);var i=[];for(var d in Qt(t))Vt.call(t,d)&&"constructor"!=d&&i.push(d);return i}function Cr(t,i){return t<i}function ca(t,i){var d=-1,y=ke(t)?V(t.length):[];return pi(t,function(w,T,L){y[++d]=i(w,T,L)}),y}function ua(t){var i=Br(t);return 1==i.length&&i[0][2]?Na(i[0][0],i[0][1]):function(d){return d===t||br(d,t,i)}}function ha(t,i){return zr(t)&&Ya(i)?Na($e(t),i):function(d){var y=Vr(d,t);return y===E&&y===i?Kr(d,t):Qi(i,y,a|l)}}function Pn(t,i,d,y,w){t!==i&&_r(i,function(T,L){if(w||(w=new Ge),re(T))!function su(t,i,d,y,w,T,L){var B=Ur(t,d),W=Ur(i,d),nt=L.get(W);if(nt)pr(t,d,nt);else{var at=T?T(B,W,d+"",t,i,L):E,ct=at===E;if(ct){var mt=It(W),Tt=!mt&&vi(W),Et=!mt&&!Tt&&Hi(W);at=W,mt||Tt||Et?It(B)?at=B:le(B)?at=Te(B):Tt?(ct=!1,at=xa(W,!0)):Et?(ct=!1,at=Sa(W,!0)):at=[]:rn(W)||Ai(W)?(at=B,Ai(B)?at=wo(B):(!re(B)||oi(B))&&(at=Wa(W))):ct=!1}ct&&(L.set(W,at),w(at,W,y,T,L),L.delete(W)),pr(t,d,at)}}(t,i,L,d,Pn,y,w);else{var B=y?y(Ur(t,L),T,L+"",t,i,w):E;B===E&&(B=T),pr(t,L,B)}},Oe)}function da(t,i){var d=t.length;if(d)return ai(i+=i<0?d:0,d)?t[i]:E}function fa(t,i,d){i=i.length?ie(i,function(T){return It(T)?function(L){return Ti(L,1===T.length?T[0]:T)}:T}):[Ae];var y=-1;return i=ie(i,Le(Lt())),function Dl(H,tt){var V=H.length;for(H.sort(tt);V--;)H[V]=H[V].value;return H}(ca(t,function(T,L,B){return{criteria:ie(i,function(nt){return nt(T)}),index:++y,value:T}}),function(T,L){return function vu(t,i,d){for(var y=-1,w=t.criteria,T=i.criteria,L=w.length,B=d.length;++y<L;){var W=Ta(w[y],T[y]);if(W)return y>=B?W:W*("desc"==d[y]?-1:1)}return t.index-i.index}(T,L,d)})}function pa(t,i,d){for(var y=-1,w=i.length,T={};++y<w;){var L=i[y],B=Ti(t,L);d(B,L)&&$i(T,_i(L,t),B)}return T}function xr(t,i,d,y){var w=y?El:Li,T=-1,L=i.length,B=t;for(t===i&&(i=Te(i)),d&&(B=ie(t,Le(d)));++T<L;)for(var W=0,nt=i[T],at=d?d(nt):nt;(W=w(B,at,W,y))>-1;)B!==t&&yn.call(B,W,1),yn.call(t,W,1);return t}function ga(t,i){for(var d=t?i.length:0,y=d-1;d--;){var w=i[d];if(d==y||w!==T){var T=w;ai(w)?yn.call(t,w,1):Or(t,w)}}return t}function Sr(t,i){return t+Cn(Vs()*(i-t+1))}function Tr(t,i){var d="";if(!t||i<1||i>vt)return d;do{i%2&&(d+=t),(i=Cn(i/2))&&(t+=t)}while(i);return d}function Ht(t,i){return Wr(Xa(t,i,Ae),t+"")}function cu(t){return Qs(Ui(t))}function uu(t,i){var d=Ui(t);return zn(d,Si(i,0,d.length))}function $i(t,i,d,y){if(!re(t))return t;for(var w=-1,T=(i=_i(i,t)).length,L=T-1,B=t;null!=B&&++w<T;){var W=$e(i[w]),nt=d;if("__proto__"===W||"constructor"===W||"prototype"===W)return t;if(w!=L){var at=B[W];(nt=y?y(at,W,B):E)===E&&(nt=re(at)?at:ai(i[w+1])?[]:{})}Vi(B,W,nt),B=B[W]}return t}var _a=xn?function(t,i){return xn.set(t,i),t}:Ae,hu=bn?function(t,i){return bn(t,"toString",{configurable:!0,enumerable:!1,value:Qr(i),writable:!0})}:Ae;function du(t){return zn(Ui(t))}function Ue(t,i,d){var y=-1,w=t.length;i<0&&(i=-i>w?0:w+i),(d=d>w?w:d)<0&&(d+=w),w=i>d?0:d-i>>>0,i>>>=0;for(var T=V(w);++y<w;)T[y]=t[y+i];return T}function fu(t,i){var d;return pi(t,function(y,w,T){return!(d=i(y,w,T))}),!!d}function Ln(t,i,d){var y=0,w=null==t?y:t.length;if("number"==typeof i&&i==i&&w<=Z){for(;y<w;){var T=y+w>>>1,L=t[T];null!==L&&!De(L)&&(d?L<=i:L<i)?y=T+1:w=T}return w}return kr(t,i,Ae,d)}function kr(t,i,d,y){var w=0,T=null==t?0:t.length;if(0===T)return 0;for(var L=(i=d(i))!=i,B=null===i,W=De(i),nt=i===E;w<T;){var at=Cn((w+T)/2),ct=d(t[at]),mt=ct!==E,Tt=null===ct,Et=ct==ct,zt=De(ct);if(L)var Dt=y||Et;else Dt=nt?Et&&(y||mt):B?Et&&mt&&(y||!Tt):W?Et&&mt&&!Tt&&(y||!zt):!Tt&&!zt&&(y?ct<=i:ct<i);Dt?w=at+1:T=at}return me(T,R)}function ma(t,i){for(var d=-1,y=t.length,w=0,T=[];++d<y;){var L=t[d],B=i?i(L):L;if(!d||!qe(B,W)){var W=B;T[w++]=0===L?0:L}}return T}function va(t){return"number"==typeof t?t:De(t)?M:+t}function Ee(t){if("string"==typeof t)return t;if(It(t))return ie(t,Ee)+"";if(De(t))return Ks?Ks.call(t):"";var i=t+"";return"0"==i&&1/t==-wt?"-0":i}function gi(t,i,d){var y=-1,w=ln,T=t.length,L=!0,B=[],W=B;if(d)L=!1,w=er;else if(T>=Ve){var nt=i?null:Su(t);if(nt)return un(nt);L=!1,w=Yi,W=new xi}else W=i?[]:B;t:for(;++y<T;){var at=t[y],ct=i?i(at):at;if(at=d||0!==at?at:0,L&&ct==ct){for(var mt=W.length;mt--;)if(W[mt]===ct)continue t;i&&W.push(ct),B.push(at)}else w(W,ct,d)||(W!==B&&W.push(ct),B.push(at))}return B}function Or(t,i){return null==(t=Ga(t,i=_i(i,t)))||delete t[$e(We(i))]}function ya(t,i,d,y){return $i(t,i,d(Ti(t,i)),y)}function En(t,i,d,y){for(var w=t.length,T=y?w:-1;(y?T--:++T<w)&&i(t[T],T,t););return d?Ue(t,y?0:T,y?T+1:w):Ue(t,y?T+1:0,y?w:T)}function ba(t,i){var d=t;return d instanceof Yt&&(d=d.value()),ir(i,function(y,w){return w.func.apply(w.thisArg,hi([y],w.args))},d)}function Ar(t,i,d){var y=t.length;if(y<2)return y?gi(t[0]):[];for(var w=-1,T=V(y);++w<y;)for(var L=t[w],B=-1;++B<y;)B!=w&&(T[w]=Ki(T[w]||L,t[B],i,d));return gi(ge(T,1),i,d)}function wa(t,i,d){for(var y=-1,w=t.length,T=i.length,L={};++y<w;)d(L,t[y],y<T?i[y]:E);return L}function Pr(t){return le(t)?t:[]}function Lr(t){return"function"==typeof t?t:Ae}function _i(t,i){return It(t)?t:zr(t,i)?[t]:Ka(Zt(t))}var pu=Ht;function mi(t,i,d){var y=t.length;return d=d===E?y:d,!i&&d>=y?t:Ue(t,i,d)}var Ca=ec||function(t){return pe.clearTimeout(t)};function xa(t,i){if(i)return t.slice();var d=t.length,y=Ns?Ns(d):new t.constructor(d);return t.copy(y),y}function Er(t){var i=new t.constructor(t.byteLength);return new mn(i).set(new mn(t)),i}function Sa(t,i){var d=i?Er(t.buffer):t.buffer;return new t.constructor(d,t.byteOffset,t.length)}function Ta(t,i){if(t!==i){var d=t!==E,y=null===t,w=t==t,T=De(t),L=i!==E,B=null===i,W=i==i,nt=De(i);if(!B&&!nt&&!T&&t>i||T&&L&&W&&!B&&!nt||y&&L&&W||!d&&W||!w)return 1;if(!y&&!T&&!nt&&t<i||nt&&d&&w&&!y&&!T||B&&d&&w||!L&&w||!W)return-1}return 0}function ka(t,i,d,y){for(var w=-1,T=t.length,L=d.length,B=-1,W=i.length,nt=he(T-L,0),at=V(W+nt),ct=!y;++B<W;)at[B]=i[B];for(;++w<L;)(ct||w<T)&&(at[d[w]]=t[w]);for(;nt--;)at[B++]=t[w++];return at}function Oa(t,i,d,y){for(var w=-1,T=t.length,L=-1,B=d.length,W=-1,nt=i.length,at=he(T-B,0),ct=V(at+nt),mt=!y;++w<at;)ct[w]=t[w];for(var Tt=w;++W<nt;)ct[Tt+W]=i[W];for(;++L<B;)(mt||w<T)&&(ct[Tt+d[L]]=t[w++]);return ct}function Te(t,i){var d=-1,y=t.length;for(i||(i=V(y));++d<y;)i[d]=t[d];return i}function Qe(t,i,d,y){var w=!d;d||(d={});for(var T=-1,L=i.length;++T<L;){var B=i[T],W=y?y(d[B],t[B],B,d,t):E;W===E&&(W=t[B]),w?ni(d,B,W):Vi(d,B,W)}return d}function Dn(t,i){return function(d,y){var w=It(d)?Tl:Wc,T=i?i():{};return w(d,t,Lt(y,2),T)}}function Bi(t){return Ht(function(i,d){var y=-1,w=d.length,T=w>1?d[w-1]:E,L=w>2?d[2]:E;for(T=t.length>3&&"function"==typeof T?(w--,T):E,L&&we(d[0],d[1],L)&&(T=w<3?E:T,w=1),i=Qt(i);++y<w;){var B=d[y];B&&t(i,B,y,T)}return i})}function Aa(t,i){return function(d,y){if(null==d)return d;if(!ke(d))return t(d,y);for(var w=d.length,T=i?w:-1,L=Qt(d);(i?T--:++T<w)&&!1!==y(L[T],T,L););return d}}function Pa(t){return function(i,d,y){for(var w=-1,T=Qt(i),L=y(i),B=L.length;B--;){var W=L[t?B:++w];if(!1===d(T[W],W,T))break}return i}}function La(t){return function(i){var d=Ei(i=Zt(i))?Xe(i):E,y=d?d[0]:i.charAt(0),w=d?mi(d,1).join(""):i.slice(1);return y[t]()+w}}function ji(t){return function(i){return ir(Po(Ao(i).replace(hl,"")),t,"")}}function tn(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var d=Ii(t.prototype),y=t.apply(d,i);return re(y)?y:d}}function Ea(t){return function(i,d,y){var w=Qt(i);if(!ke(i)){var T=Lt(d,3);i=fe(i),d=function(B){return T(w[B],B,w)}}var L=t(i,d,y);return L>-1?w[T?i[L]:L]:E}}function Da(t){return si(function(i){var d=i.length,y=d,w=ze.prototype.thru;for(t&&i.reverse();y--;){var T=i[y];if("function"!=typeof T)throw new je(de);if(w&&!L&&"wrapper"==Bn(T))var L=new ze([],!0)}for(y=L?y:d;++y<d;){var B=Bn(T=i[y]),W="wrapper"==B?Ir(T):E;L=W&&Hr(W[0])&&W[1]==(A|m|b|F)&&!W[4].length&&1==W[9]?L[Bn(W[0])].apply(L,W[3]):1==T.length&&Hr(T)?L[B]():L.thru(T)}return function(){var nt=arguments,at=nt[0];if(L&&1==nt.length&&It(at))return L.plant(at).value();for(var ct=0,mt=d?i[ct].apply(this,nt):at;++ct<d;)mt=i[ct].call(this,mt);return mt}})}function Fn(t,i,d,y,w,T,L,B,W,nt){var at=i&A,ct=i&r,mt=i&h,Tt=i&(m|v),Et=i&G,zt=mt?E:tn(t);return function Dt(){for(var Wt=arguments.length,Nt=V(Wt),Fe=Wt;Fe--;)Nt[Fe]=arguments[Fe];if(Tt)var Ce=zi(Dt),Me=function Ml(H,tt){for(var V=H.length,Ct=0;V--;)H[V]===tt&&++Ct;return Ct}(Nt,Ce);if(y&&(Nt=ka(Nt,y,w,Tt)),T&&(Nt=Oa(Nt,T,L,Tt)),Wt-=Me,Tt&&Wt<nt){var ce=di(Nt,Ce);return Ra(t,i,Fn,Dt.placeholder,d,Nt,ce,B,W,nt-Wt)}var Ze=ct?d:this,ci=mt?Ze[t]:t;return Wt=Nt.length,B?Nt=function Wu(t,i){for(var d=t.length,y=me(i.length,d),w=Te(t);y--;){var T=i[y];t[y]=ai(T,d)?w[T]:E}return t}(Nt,B):Et&&Wt>1&&Nt.reverse(),at&&W<Wt&&(Nt.length=W),this&&this!==pe&&this instanceof Dt&&(ci=zt||tn(ci)),ci.apply(Ze,Nt)}}function Fa(t,i){return function(d,y){return function Kc(t,i,d,y){return Je(t,function(w,T,L){i(y,d(w),T,L)}),y}(d,t,i(y),{})}}function Mn(t,i){return function(d,y){var w;if(d===E&&y===E)return i;if(d!==E&&(w=d),y!==E){if(w===E)return y;"string"==typeof d||"string"==typeof y?(d=Ee(d),y=Ee(y)):(d=va(d),y=va(y)),w=t(d,y)}return w}}function Dr(t){return si(function(i){return i=ie(i,Le(Lt())),Ht(function(d){var y=this;return t(i,function(w){return Pe(w,y,d)})})})}function Rn(t,i){var d=(i=i===E?" ":Ee(i)).length;if(d<2)return d?Tr(i,t):i;var y=Tr(i,wn(t/Di(i)));return Ei(i)?mi(Xe(y),0,t).join(""):y.slice(0,t)}function Ma(t){return function(i,d,y){return y&&"number"!=typeof y&&we(i,d,y)&&(d=y=E),i=li(i),d===E?(d=i,i=0):d=li(d),function lu(t,i,d,y){for(var w=-1,T=he(wn((i-t)/(d||1)),0),L=V(T);T--;)L[y?T:++w]=t,t+=d;return L}(i,d,y=y===E?i<d?1:-1:li(y),t)}}function In(t){return function(i,d){return"string"==typeof i&&"string"==typeof d||(i=Ye(i),d=Ye(d)),t(i,d)}}function Ra(t,i,d,y,w,T,L,B,W,nt){var at=i&m;i|=at?b:C,(i&=~(at?C:b))&g||(i&=~(r|h));var zt=[t,i,w,at?T:E,at?L:E,at?E:T,at?E:L,B,W,nt],Dt=d.apply(E,zt);return Hr(t)&&qa(Dt,zt),Dt.placeholder=y,Za(Dt,t,i)}function Fr(t){var i=ue[t];return function(d,y){if(d=Ye(d),(y=null==y?0:me(jt(y),292))&&Zs(d)){var w=(Zt(d)+"e").split("e");return+((w=(Zt(i(w[0]+"e"+(+w[1]+y)))+"e").split("e"))[0]+"e"+(+w[1]-y))}return i(d)}}var Su=Mi&&1/un(new Mi([,-0]))[1]==wt?function(t){return new Mi(t)}:es;function Ia(t){return function(i){var d=ve(i);return d==U?cr(i):d==yt?function Ul(H){var tt=-1,V=Array(H.size);return H.forEach(function(Ct){V[++tt]=[Ct,Ct]}),V}(i):function Fl(H,tt){return ie(tt,function(V){return[V,H[V]]})}(i,t(i))}}function ri(t,i,d,y,w,T,L,B){var W=i&h;if(!W&&"function"!=typeof t)throw new je(de);var nt=y?y.length:0;if(nt||(i&=~(b|C),y=w=E),L=L===E?L:he(jt(L),0),B=B===E?B:jt(B),nt-=w?w.length:0,i&C){var at=y,ct=w;y=w=E}var mt=W?E:Ir(t),Tt=[t,i,d,y,w,at,ct,T,L,B];if(mt&&function zu(t,i){var d=t[1],y=i[1],w=d|y;if(!(w<(r|h|A))&&!(y==A&&d==m||y==A&&d==F&&t[7].length<=i[8]||y==(A|F)&&i[7].length<=i[8]&&d==m))return t;y&r&&(t[2]=i[2],w|=d&r?0:g);var B=i[3];if(B){var W=t[3];t[3]=W?ka(W,B,i[4]):B,t[4]=W?di(t[3],c):i[4]}(B=i[5])&&(t[5]=(W=t[5])?Oa(W,B,i[6]):B,t[6]=W?di(t[5],c):i[6]),(B=i[7])&&(t[7]=B),y&A&&(t[8]=null==t[8]?i[8]:me(t[8],i[8])),null==t[9]&&(t[9]=i[9]),t[0]=i[0],t[1]=w}(Tt,mt),t=Tt[0],i=Tt[1],d=Tt[2],y=Tt[3],w=Tt[4],!(B=Tt[9]=Tt[9]===E?W?0:t.length:he(Tt[9]-nt,0))&&i&(m|v)&&(i&=~(m|v)),i&&i!=r)Et=i==m||i==v?function Cu(t,i,d){var y=tn(t);return function w(){for(var T=arguments.length,L=V(T),B=T,W=zi(w);B--;)L[B]=arguments[B];var nt=T<3&&L[0]!==W&&L[T-1]!==W?[]:di(L,W);return(T-=nt.length)<d?Ra(t,i,Fn,w.placeholder,E,L,nt,E,E,d-T):Pe(this&&this!==pe&&this instanceof w?y:t,this,L)}}(t,i,B):i!=b&&i!=(r|b)||w.length?Fn.apply(E,Tt):function xu(t,i,d,y){var w=i&r,T=tn(t);return function L(){for(var B=-1,W=arguments.length,nt=-1,at=y.length,ct=V(at+W),mt=this&&this!==pe&&this instanceof L?T:t;++nt<at;)ct[nt]=y[nt];for(;W--;)ct[nt++]=arguments[++B];return Pe(mt,w?d:this,ct)}}(t,i,d,y);else var Et=function wu(t,i,d){var y=i&r,w=tn(t);return function T(){return(this&&this!==pe&&this instanceof T?w:t).apply(y?d:this,arguments)}}(t,i,d);return Za((mt?_a:qa)(Et,Tt),t,i)}function Ba(t,i,d,y){return t===E||qe(t,Fi[d])&&!Vt.call(y,d)?i:t}function ja(t,i,d,y,w,T){return re(t)&&re(i)&&(T.set(i,t),Pn(t,i,E,ja,T),T.delete(i)),t}function Tu(t){return rn(t)?E:t}function za(t,i,d,y,w,T){var L=d&a,B=t.length,W=i.length;if(B!=W&&!(L&&W>B))return!1;var nt=T.get(t),at=T.get(i);if(nt&&at)return nt==i&&at==t;var ct=-1,mt=!0,Tt=d&l?new xi:E;for(T.set(t,i),T.set(i,t);++ct<B;){var Et=t[ct],zt=i[ct];if(y)var Dt=L?y(zt,Et,ct,i,t,T):y(Et,zt,ct,t,i,T);if(Dt!==E){if(Dt)continue;mt=!1;break}if(Tt){if(!nr(i,function(Wt,Nt){if(!Yi(Tt,Nt)&&(Et===Wt||w(Et,Wt,d,y,T)))return Tt.push(Nt)})){mt=!1;break}}else if(Et!==zt&&!w(Et,zt,d,y,T)){mt=!1;break}}return T.delete(t),T.delete(i),mt}function si(t){return Wr(Xa(t,E,to),t+"")}function Mr(t){return sa(t,fe,jr)}function Rr(t){return sa(t,Oe,Ha)}var Ir=xn?function(t){return xn.get(t)}:es;function Bn(t){for(var i=t.name+"",d=Ri[i],y=Vt.call(Ri,i)?d.length:0;y--;){var w=d[y],T=w.func;if(null==T||T==t)return w.name}return i}function zi(t){return(Vt.call(x,"placeholder")?x:t).placeholder}function Lt(){var t=x.iteratee||$r;return t=t===$r?la:t,arguments.length?t(arguments[0],arguments[1]):t}function jn(t,i){var d=t.__data__;return function Ru(t){var i=typeof t;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t}(i)?d["string"==typeof i?"string":"hash"]:d.map}function Br(t){for(var i=fe(t),d=i.length;d--;){var y=i[d],w=t[y];i[d]=[y,w,Ya(w)]}return i}function ki(t,i){var d=function jl(H,tt){return null==H?E:H[tt]}(t,i);return oa(d)?d:E}var jr=hr?function(t){return null==t?[]:(t=Qt(t),ui(hr(t),function(i){return Gs.call(t,i)}))}:is,Ha=hr?function(t){for(var i=[];t;)hi(i,jr(t)),t=vn(t);return i}:is,ve=be;function Ua(t,i,d){for(var y=-1,w=(i=_i(i,t)).length,T=!1;++y<w;){var L=$e(i[y]);if(!(T=null!=t&&d(t,L)))break;t=t[L]}return T||++y!=w?T:!!(w=null==t?0:t.length)&&Xn(w)&&ai(L,w)&&(It(t)||Ai(t))}function Wa(t){return"function"!=typeof t.constructor||en(t)?{}:Ii(vn(t))}function Mu(t){return It(t)||Ai(t)||!!(qs&&t&&t[qs])}function ai(t,i){var d=typeof t;return!!(i=i??vt)&&("number"==d||"symbol"!=d&&Go.test(t))&&t>-1&&t%1==0&&t<i}function we(t,i,d){if(!re(d))return!1;var y=typeof i;return!!("number"==y?ke(d)&&ai(i,d.length):"string"==y&&i in d)&&qe(d[i],t)}function zr(t,i){if(It(t))return!1;var d=typeof t;return!("number"!=d&&"symbol"!=d&&"boolean"!=d&&null!=t&&!De(t))||bi.test(t)||!Ke.test(t)||null!=i&&t in Qt(i)}function Hr(t){var i=Bn(t),d=x[i];if("function"!=typeof d||!(i in Yt.prototype))return!1;if(t===d)return!0;var y=Ir(d);return!!y&&t===y[0]}(dr&&ve(new dr(new ArrayBuffer(1)))!=ee||Xi&&ve(new Xi)!=U||fr&&ve(fr.resolve())!=st||Mi&&ve(new Mi)!=yt||Gi&&ve(new Gi)!=Bt)&&(ve=function(t){var i=be(t),d=i==q?t.constructor:E,y=d?Oi(d):"";if(y)switch(y){case uc:return ee;case hc:return U;case dc:return st;case fc:return yt;case pc:return Bt}return i});var Bu=fn?oi:ns;function en(t){var i=t&&t.constructor;return t===("function"==typeof i&&i.prototype||Fi)}function Ya(t){return t==t&&!re(t)}function Na(t,i){return function(d){return null!=d&&d[t]===i&&(i!==E||t in Qt(d))}}function Xa(t,i,d){return i=he(i===E?t.length-1:i,0),function(){for(var y=arguments,w=-1,T=he(y.length-i,0),L=V(T);++w<T;)L[w]=y[i+w];w=-1;for(var B=V(i+1);++w<i;)B[w]=y[w];return B[i]=d(L),Pe(t,this,B)}}function Ga(t,i){return i.length<2?t:Ti(t,Ue(i,0,-1))}function Ur(t,i){if(("constructor"!==i||"function"!=typeof t[i])&&"__proto__"!=i)return t[i]}var qa=Va(_a),nn=nc||function(t,i){return pe.setTimeout(t,i)},Wr=Va(hu);function Za(t,i,d){var y=i+"";return Wr(t,function Fu(t,i){var d=i.length;if(!d)return t;var y=d-1;return i[y]=(d>1?"& ":"")+i[y],i=i.join(d>2?", ":" "),t.replace(Ro,"{\n/* [wrapped with "+i+"] */\n")}(y,function Yu(t,i){return Be(P,function(d){var y="_."+d[0];i&d[1]&&!ln(t,y)&&t.push(y)}),t.sort()}(function Lu(t){var i=t.match(Io);return i?i[1].split(Bo):[]}(y),d)))}function Va(t){var i=0,d=0;return function(){var y=oc(),w=_t-(y-d);if(d=y,w>0){if(++i>=gt)return arguments[0]}else i=0;return t.apply(E,arguments)}}function zn(t,i){var d=-1,y=t.length,w=y-1;for(i=i===E?y:i;++d<i;){var T=Sr(d,w),L=t[T];t[T]=t[d],t[d]=L}return t.length=i,t}var Ka=function ju(t){var i=Yn(t,function(y){return 500===d.size&&d.clear(),y}),d=i.cache;return i}(function(t){var i=[];return 46===t.charCodeAt(0)&&i.push(""),t.replace(rs,function(d,y,w,T){i.push(w?T.replace(Ho,"$1"):y||d)}),i});function $e(t){if("string"==typeof t||De(t))return t;var i=t+"";return"0"==i&&1/t==-wt?"-0":i}function Oi(t){if(null!=t){try{return pn.call(t)}catch{}try{return t+""}catch{}}return""}function Ja(t){if(t instanceof Yt)return t.clone();var i=new ze(t.__wrapped__,t.__chain__);return i.__actions__=Te(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}var qu=Ht(function(t,i){return le(t)?Ki(t,ge(i,1,le,!0)):[]}),Zu=Ht(function(t,i){var d=We(i);return le(d)&&(d=E),le(t)?Ki(t,ge(i,1,le,!0),Lt(d,2)):[]}),Vu=Ht(function(t,i){var d=We(i);return le(d)&&(d=E),le(t)?Ki(t,ge(i,1,le,!0),E,d):[]});function Qa(t,i,d){var y=null==t?0:t.length;if(!y)return-1;var w=null==d?0:jt(d);return w<0&&(w=he(y+w,0)),cn(t,Lt(i,3),w)}function $a(t,i,d){var y=null==t?0:t.length;if(!y)return-1;var w=y-1;return d!==E&&(w=jt(d),w=d<0?he(y+w,0):me(w,y-1)),cn(t,Lt(i,3),w,!0)}function to(t){return null!=t&&t.length?ge(t,1):[]}function eo(t){return t&&t.length?t[0]:E}var ah=Ht(function(t){var i=ie(t,Pr);return i.length&&i[0]===t[0]?yr(i):[]}),oh=Ht(function(t){var i=We(t),d=ie(t,Pr);return i===We(d)?i=E:d.pop(),d.length&&d[0]===t[0]?yr(d,Lt(i,2)):[]}),lh=Ht(function(t){var i=We(t),d=ie(t,Pr);return(i="function"==typeof i?i:E)&&d.pop(),d.length&&d[0]===t[0]?yr(d,E,i):[]});function We(t){var i=null==t?0:t.length;return i?t[i-1]:E}var dh=Ht(io);function io(t,i){return t&&t.length&&i&&i.length?xr(t,i):t}var gh=si(function(t,i){var d=null==t?0:t.length,y=gr(t,i);return ga(t,ie(i,function(w){return ai(w,d)?+w:w}).sort(Ta)),y});function Yr(t){return null==t?t:cc.call(t)}var Eh=Ht(function(t){return gi(ge(t,1,le,!0))}),Dh=Ht(function(t){var i=We(t);return le(i)&&(i=E),gi(ge(t,1,le,!0),Lt(i,2))}),Fh=Ht(function(t){var i=We(t);return i="function"==typeof i?i:E,gi(ge(t,1,le,!0),E,i)});function Nr(t){if(!t||!t.length)return[];var i=0;return t=ui(t,function(d){if(le(d))return i=he(d.length,i),!0}),or(i,function(d){return ie(t,rr(d))})}function no(t,i){if(!t||!t.length)return[];var d=Nr(t);return null==i?d:ie(d,function(y){return Pe(i,E,y)})}var Bh=Ht(function(t,i){return le(t)?Ki(t,i):[]}),jh=Ht(function(t){return Ar(ui(t,le))}),zh=Ht(function(t){var i=We(t);return le(i)&&(i=E),Ar(ui(t,le),Lt(i,2))}),Hh=Ht(function(t){var i=We(t);return i="function"==typeof i?i:E,Ar(ui(t,le),E,i)}),Uh=Ht(Nr),Nh=Ht(function(t){var i=t.length,d=i>1?t[i-1]:E;return d="function"==typeof d?(t.pop(),d):E,no(t,d)});function ro(t){var i=x(t);return i.__chain__=!0,i}function Hn(t,i){return i(t)}var Gh=si(function(t){var i=t.length,d=i?t[0]:0,y=this.__wrapped__,w=function(T){return gr(T,t)};return!(i>1||this.__actions__.length)&&y instanceof Yt&&ai(d)?((y=y.slice(d,+d+(i?1:0))).__actions__.push({func:Hn,args:[w],thisArg:E}),new ze(y,this.__chain__).thru(function(T){return i&&!T.length&&T.push(E),T})):this.thru(w)}),td=Dn(function(t,i,d){Vt.call(t,d)?++t[d]:ni(t,d,1)}),nd=Ea(Qa),rd=Ea($a);function so(t,i){return(It(t)?Be:pi)(t,Lt(i,3))}function ao(t,i){return(It(t)?kl:ia)(t,Lt(i,3))}var ld=Dn(function(t,i,d){Vt.call(t,d)?t[d].push(i):ni(t,d,[i])}),ud=Ht(function(t,i,d){var y=-1,w="function"==typeof i,T=ke(t)?V(t.length):[];return pi(t,function(L){T[++y]=w?Pe(i,L,d):Ji(L,i,d)}),T}),hd=Dn(function(t,i,d){ni(t,d,i)});function Un(t,i){return(It(t)?ie:ca)(t,Lt(i,3))}var fd=Dn(function(t,i,d){t[d?0:1].push(i)},function(){return[[],[]]}),Cd=Ht(function(t,i){if(null==t)return[];var d=i.length;return d>1&&we(t,i[0],i[1])?i=[]:d>2&&we(i[0],i[1],i[2])&&(i=[i[0]]),fa(t,ge(i,1),[])}),Wn=ic||function(){return pe.Date.now()};function oo(t,i,d){return i=d?E:i,ri(t,A,E,E,E,E,i=t&&null==i?t.length:i)}function lo(t,i){var d;if("function"!=typeof i)throw new je(de);return t=jt(t),function(){return--t>0&&(d=i.apply(this,arguments)),t<=1&&(i=E),d}}var Xr=Ht(function(t,i,d){var y=r;if(d.length){var w=di(d,zi(Xr));y|=b}return ri(t,y,i,d,w)}),co=Ht(function(t,i,d){var y=r|h;if(d.length){var w=di(d,zi(co));y|=b}return ri(i,y,t,d,w)});function fo(t,i,d){var y,w,T,L,B,W,nt=0,at=!1,ct=!1,mt=!0;if("function"!=typeof t)throw new je(de);function Tt(ce){var Ze=y,ci=w;return y=w=E,nt=ce,L=t.apply(ci,Ze)}function Dt(ce){var Ze=ce-W;return W===E||Ze>=i||Ze<0||ct&&ce-nt>=T}function Wt(){var ce=Wn();if(Dt(ce))return Nt(ce);B=nn(Wt,function zt(ce){var Do=i-(ce-W);return ct?me(Do,T-(ce-nt)):Do}(ce))}function Nt(ce){return B=E,mt&&y?Tt(ce):(y=w=E,L)}function Me(){var ce=Wn(),Ze=Dt(ce);if(y=arguments,w=this,W=ce,Ze){if(B===E)return function Et(ce){return nt=ce,B=nn(Wt,i),at?Tt(ce):L}(W);if(ct)return Ca(B),B=nn(Wt,i),Tt(W)}return B===E&&(B=nn(Wt,i)),L}return i=Ye(i)||0,re(d)&&(at=!!d.leading,T=(ct="maxWait"in d)?he(Ye(d.maxWait)||0,i):T,mt="trailing"in d?!!d.trailing:mt),Me.cancel=function Fe(){B!==E&&Ca(B),nt=0,y=W=w=B=E},Me.flush=function Ce(){return B===E?L:Nt(Wn())},Me}var Sd=Ht(function(t,i){return ea(t,1,i)}),Td=Ht(function(t,i,d){return ea(t,Ye(i)||0,d)});function Yn(t,i){if("function"!=typeof t||null!=i&&"function"!=typeof i)throw new je(de);var d=function(){var y=arguments,w=i?i.apply(this,y):y[0],T=d.cache;if(T.has(w))return T.get(w);var L=t.apply(this,y);return d.cache=T.set(w,L)||T,L};return d.cache=new(Yn.Cache||ii),d}function Nn(t){if("function"!=typeof t)throw new je(de);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}Yn.Cache=ii;var Ad=pu(function(t,i){var d=(i=1==i.length&&It(i[0])?ie(i[0],Le(Lt())):ie(ge(i,1),Le(Lt()))).length;return Ht(function(y){for(var w=-1,T=me(y.length,d);++w<T;)y[w]=i[w].call(this,y[w]);return Pe(t,this,y)})}),Gr=Ht(function(t,i){var d=di(i,zi(Gr));return ri(t,b,E,i,d)}),po=Ht(function(t,i){var d=di(i,zi(po));return ri(t,C,E,i,d)}),Pd=si(function(t,i){return ri(t,F,E,E,E,i)});function qe(t,i){return t===i||t!=t&&i!=i}var Ud=In(vr),Wd=In(function(t,i){return t>=i}),Ai=aa(function(){return arguments}())?aa:function(t){return ae(t)&&Vt.call(t,"callee")&&!Gs.call(t,"callee")},It=V.isArray,Yd=Os?Le(Os):function Jc(t){return ae(t)&&be(t)==Ut};function ke(t){return null!=t&&Xn(t.length)&&!oi(t)}function le(t){return ae(t)&&ke(t)}var vi=rc||ns,Xd=As?Le(As):function Qc(t){return ae(t)&&be(t)==X};function qr(t){if(!ae(t))return!1;var i=be(t);return i==lt||i==rt||"string"==typeof t.message&&"string"==typeof t.name&&!rn(t)}function oi(t){if(!re(t))return!1;var i=be(t);return i==dt||i==K||i==N||i==et}function go(t){return"number"==typeof t&&t==jt(t)}function Xn(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=vt}function re(t){var i=typeof t;return null!=t&&("object"==i||"function"==i)}function ae(t){return null!=t&&"object"==typeof t}var _o=Ps?Le(Ps):function tu(t){return ae(t)&&ve(t)==U};function mo(t){return"number"==typeof t||ae(t)&&be(t)==$}function rn(t){if(!ae(t)||be(t)!=q)return!1;var i=vn(t);if(null===i)return!0;var d=Vt.call(i,"constructor")&&i.constructor;return"function"==typeof d&&d instanceof d&&pn.call(d)==Ql}var Zr=Ls?Le(Ls):function eu(t){return ae(t)&&be(t)==Pt},vo=Es?Le(Es):function iu(t){return ae(t)&&ve(t)==yt};function Gn(t){return"string"==typeof t||!It(t)&&ae(t)&&be(t)==Q}function De(t){return"symbol"==typeof t||ae(t)&&be(t)==St}var Hi=Ds?Le(Ds):function nu(t){return ae(t)&&Xn(t.length)&&!!te[be(t)]},lf=In(Cr),cf=In(function(t,i){return t<=i});function yo(t){if(!t)return[];if(ke(t))return Gn(t)?Xe(t):Te(t);if(Ni&&t[Ni])return function Hl(H){for(var tt,V=[];!(tt=H.next()).done;)V.push(tt.value);return V}(t[Ni]());var i=ve(t);return(i==U?cr:i==yt?un:Ui)(t)}function li(t){return t?(t=Ye(t))===wt||t===-wt?(t<0?-1:1)*k:t==t?t:0:0===t?t:0}function jt(t){var i=li(t),d=i%1;return i==i?d?i-d:i:0}function bo(t){return t?Si(jt(t),0,D):0}function Ye(t){if("number"==typeof t)return t;if(De(t))return M;if(re(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=re(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=js(t);var d=Yo.test(t);return d||Xo.test(t)?xl(t.slice(2),d?2:8):Wo.test(t)?M:+t}function wo(t){return Qe(t,Oe(t))}function Zt(t){return null==t?"":Ee(t)}var hf=Bi(function(t,i){if(en(i)||ke(i))Qe(i,fe(i),t);else for(var d in i)Vt.call(i,d)&&Vi(t,d,i[d])}),Co=Bi(function(t,i){Qe(i,Oe(i),t)}),qn=Bi(function(t,i,d,y){Qe(i,Oe(i),t,y)}),df=Bi(function(t,i,d,y){Qe(i,fe(i),t,y)}),ff=si(gr),gf=Ht(function(t,i){t=Qt(t);var d=-1,y=i.length,w=y>2?i[2]:E;for(w&&we(i[0],i[1],w)&&(y=1);++d<y;)for(var T=i[d],L=Oe(T),B=-1,W=L.length;++B<W;){var nt=L[B],at=t[nt];(at===E||qe(at,Fi[nt])&&!Vt.call(t,nt))&&(t[nt]=T[nt])}return t}),_f=Ht(function(t){return t.push(E,ja),Pe(xo,E,t)});function Vr(t,i,d){var y=null==t?E:Ti(t,i);return y===E?d:y}function Kr(t,i){return null!=t&&Ua(t,i,Zc)}var kf=Fa(function(t,i,d){null!=i&&"function"!=typeof i.toString&&(i=gn.call(i)),t[i]=d},Qr(Ae)),Of=Fa(function(t,i,d){null!=i&&"function"!=typeof i.toString&&(i=gn.call(i)),Vt.call(t,i)?t[i].push(d):t[i]=[d]},Lt),Af=Ht(Ji);function fe(t){return ke(t)?Js(t):wr(t)}function Oe(t){return ke(t)?Js(t,!0):function ru(t){if(!re(t))return function Hu(t){var i=[];if(null!=t)for(var d in Qt(t))i.push(d);return i}(t);var i=en(t),d=[];for(var y in t)"constructor"==y&&(i||!Vt.call(t,y))||d.push(y);return d}(t)}var Ef=Bi(function(t,i,d){Pn(t,i,d)}),xo=Bi(function(t,i,d,y){Pn(t,i,d,y)}),Df=si(function(t,i){var d={};if(null==t)return d;var y=!1;i=ie(i,function(T){return T=_i(T,t),y||(y=T.length>1),T}),Qe(t,Rr(t),d),y&&(d=He(d,n|s|e,Tu));for(var w=i.length;w--;)Or(d,i[w]);return d}),Mf=si(function(t,i){return null==t?{}:function au(t,i){return pa(t,i,function(d,y){return Kr(t,y)})}(t,i)});function So(t,i){if(null==t)return{};var d=ie(Rr(t),function(y){return[y]});return i=Lt(i),pa(t,d,function(y,w){return i(y,w[0])})}var To=Ia(fe),ko=Ia(Oe);function Ui(t){return null==t?[]:lr(t,fe(t))}var Gf=ji(function(t,i,d){return i=i.toLowerCase(),t+(d?Oo(i):i)});function Oo(t){return Jr(Zt(t).toLowerCase())}function Ao(t){return(t=Zt(t))&&t.replace(qo,Rl).replace(dl,"")}var Kf=ji(function(t,i,d){return t+(d?"-":"")+i.toLowerCase()}),Jf=ji(function(t,i,d){return t+(d?" ":"")+i.toLowerCase()}),Qf=La("toLowerCase"),sp=ji(function(t,i,d){return t+(d?"_":"")+i.toLowerCase()}),op=ji(function(t,i,d){return t+(d?" ":"")+Jr(i)}),mp=ji(function(t,i,d){return t+(d?" ":"")+i.toUpperCase()}),Jr=La("toUpperCase");function Po(t,i,d){return t=Zt(t),(i=d?E:i)===E?function zl(H){return gl.test(H)}(t)?function ql(H){return H.match(fl)||[]}(t):function Ll(H){return H.match(jo)||[]}(t):t.match(i)||[]}var Lo=Ht(function(t,i){try{return Pe(t,E,i)}catch(d){return qr(d)?d:new Rt(d)}}),vp=si(function(t,i){return Be(i,function(d){d=$e(d),ni(t,d,Xr(t[d],t))}),t});function Qr(t){return function(){return t}}var Cp=Da(),xp=Da(!0);function Ae(t){return t}function $r(t){return la("function"==typeof t?t:He(t,n))}var kp=Ht(function(t,i){return function(d){return Ji(d,t,i)}}),Op=Ht(function(t,i){return function(d){return Ji(t,d,i)}});function ts(t,i,d){var y=fe(i),w=An(i,y);null==d&&(!re(i)||!w.length&&y.length)&&(d=i,i=t,t=this,w=An(i,fe(i)));var T=!(re(d)&&"chain"in d&&!d.chain),L=oi(t);return Be(w,function(B){var W=i[B];t[B]=W,L&&(t.prototype[B]=function(){var nt=this.__chain__;if(T||nt){var at=t(this.__wrapped__);return(at.__actions__=Te(this.__actions__)).push({func:W,args:arguments,thisArg:t}),at.__chain__=nt,at}return W.apply(t,hi([this.value()],arguments))})}),t}function es(){}var Lp=Dr(ie),Ep=Dr(Fs),Dp=Dr(nr);function Eo(t){return zr(t)?rr($e(t)):function ou(t){return function(i){return Ti(i,t)}}(t)}var Mp=Ma(),Rp=Ma(!0);function is(){return[]}function ns(){return!1}var Wp=Mn(function(t,i){return t+i},0),Yp=Fr("ceil"),Np=Mn(function(t,i){return t/i},1),Xp=Fr("floor"),Qp=Mn(function(t,i){return t*i},1),$p=Fr("round"),tg=Mn(function(t,i){return t-i},0);return x.after=function xd(t,i){if("function"!=typeof i)throw new je(de);return t=jt(t),function(){if(--t<1)return i.apply(this,arguments)}},x.ary=oo,x.assign=hf,x.assignIn=Co,x.assignInWith=qn,x.assignWith=df,x.at=ff,x.before=lo,x.bind=Xr,x.bindAll=vp,x.bindKey=co,x.castArray=function Rd(){if(!arguments.length)return[];var t=arguments[0];return It(t)?t:[t]},x.chain=ro,x.chunk=function Nu(t,i,d){i=(d?we(t,i,d):i===E)?1:he(jt(i),0);var y=null==t?0:t.length;if(!y||i<1)return[];for(var w=0,T=0,L=V(wn(y/i));w<y;)L[T++]=Ue(t,w,w+=i);return L},x.compact=function Xu(t){for(var i=-1,d=null==t?0:t.length,y=0,w=[];++i<d;){var T=t[i];T&&(w[y++]=T)}return w},x.concat=function Gu(){var t=arguments.length;if(!t)return[];for(var i=V(t-1),d=arguments[0],y=t;y--;)i[y-1]=arguments[y];return hi(It(d)?Te(d):[d],ge(i,1))},x.cond=function yp(t){var i=null==t?0:t.length,d=Lt();return t=i?ie(t,function(y){if("function"!=typeof y[1])throw new je(de);return[d(y[0]),y[1]]}):[],Ht(function(y){for(var w=-1;++w<i;){var T=t[w];if(Pe(T[0],this,y))return Pe(T[1],this,y)}})},x.conforms=function bp(t){return function Nc(t){var i=fe(t);return function(d){return ta(d,t,i)}}(He(t,n))},x.constant=Qr,x.countBy=td,x.create=function pf(t,i){var d=Ii(t);return null==i?d:$s(d,i)},x.curry=function uo(t,i,d){var y=ri(t,m,E,E,E,E,E,i=d?E:i);return y.placeholder=uo.placeholder,y},x.curryRight=function ho(t,i,d){var y=ri(t,v,E,E,E,E,E,i=d?E:i);return y.placeholder=ho.placeholder,y},x.debounce=fo,x.defaults=gf,x.defaultsDeep=_f,x.defer=Sd,x.delay=Td,x.difference=qu,x.differenceBy=Zu,x.differenceWith=Vu,x.drop=function Ku(t,i,d){var y=null==t?0:t.length;return y?Ue(t,(i=d||i===E?1:jt(i))<0?0:i,y):[]},x.dropRight=function Ju(t,i,d){var y=null==t?0:t.length;return y?Ue(t,0,(i=y-(i=d||i===E?1:jt(i)))<0?0:i):[]},x.dropRightWhile=function Qu(t,i){return t&&t.length?En(t,Lt(i,3),!0,!0):[]},x.dropWhile=function $u(t,i){return t&&t.length?En(t,Lt(i,3),!0):[]},x.fill=function th(t,i,d,y){var w=null==t?0:t.length;return w?(d&&"number"!=typeof d&&we(t,i,d)&&(d=0,y=w),function Gc(t,i,d,y){var w=t.length;for((d=jt(d))<0&&(d=-d>w?0:w+d),(y=y===E||y>w?w:jt(y))<0&&(y+=w),y=d>y?0:bo(y);d<y;)t[d++]=i;return t}(t,i,d,y)):[]},x.filter=function id(t,i){return(It(t)?ui:na)(t,Lt(i,3))},x.flatMap=function sd(t,i){return ge(Un(t,i),1)},x.flatMapDeep=function ad(t,i){return ge(Un(t,i),wt)},x.flatMapDepth=function od(t,i,d){return d=d===E?1:jt(d),ge(Un(t,i),d)},x.flatten=to,x.flattenDeep=function eh(t){return null!=t&&t.length?ge(t,wt):[]},x.flattenDepth=function ih(t,i){return null!=t&&t.length?ge(t,i=i===E?1:jt(i)):[]},x.flip=function kd(t){return ri(t,G)},x.flow=Cp,x.flowRight=xp,x.fromPairs=function nh(t){for(var i=-1,d=null==t?0:t.length,y={};++i<d;){var w=t[i];y[w[0]]=w[1]}return y},x.functions=function xf(t){return null==t?[]:An(t,fe(t))},x.functionsIn=function Sf(t){return null==t?[]:An(t,Oe(t))},x.groupBy=ld,x.initial=function sh(t){return null!=t&&t.length?Ue(t,0,-1):[]},x.intersection=ah,x.intersectionBy=oh,x.intersectionWith=lh,x.invert=kf,x.invertBy=Of,x.invokeMap=ud,x.iteratee=$r,x.keyBy=hd,x.keys=fe,x.keysIn=Oe,x.map=Un,x.mapKeys=function Pf(t,i){var d={};return i=Lt(i,3),Je(t,function(y,w,T){ni(d,i(y,w,T),y)}),d},x.mapValues=function Lf(t,i){var d={};return i=Lt(i,3),Je(t,function(y,w,T){ni(d,w,i(y,w,T))}),d},x.matches=function Sp(t){return ua(He(t,n))},x.matchesProperty=function Tp(t,i){return ha(t,He(i,n))},x.memoize=Yn,x.merge=Ef,x.mergeWith=xo,x.method=kp,x.methodOf=Op,x.mixin=ts,x.negate=Nn,x.nthArg=function Pp(t){return t=jt(t),Ht(function(i){return da(i,t)})},x.omit=Df,x.omitBy=function Ff(t,i){return So(t,Nn(Lt(i)))},x.once=function Od(t){return lo(2,t)},x.orderBy=function dd(t,i,d,y){return null==t?[]:(It(i)||(i=null==i?[]:[i]),It(d=y?E:d)||(d=null==d?[]:[d]),fa(t,i,d))},x.over=Lp,x.overArgs=Ad,x.overEvery=Ep,x.overSome=Dp,x.partial=Gr,x.partialRight=po,x.partition=fd,x.pick=Mf,x.pickBy=So,x.property=Eo,x.propertyOf=function Fp(t){return function(i){return null==t?E:Ti(t,i)}},x.pull=dh,x.pullAll=io,x.pullAllBy=function fh(t,i,d){return t&&t.length&&i&&i.length?xr(t,i,Lt(d,2)):t},x.pullAllWith=function ph(t,i,d){return t&&t.length&&i&&i.length?xr(t,i,E,d):t},x.pullAt=gh,x.range=Mp,x.rangeRight=Rp,x.rearg=Pd,x.reject=function _d(t,i){return(It(t)?ui:na)(t,Nn(Lt(i,3)))},x.remove=function _h(t,i){var d=[];if(!t||!t.length)return d;var y=-1,w=[],T=t.length;for(i=Lt(i,3);++y<T;){var L=t[y];i(L,y,t)&&(d.push(L),w.push(y))}return ga(t,w),d},x.rest=function Ld(t,i){if("function"!=typeof t)throw new je(de);return Ht(t,i=i===E?i:jt(i))},x.reverse=Yr,x.sampleSize=function vd(t,i,d){return i=(d?we(t,i,d):i===E)?1:jt(i),(It(t)?Hc:uu)(t,i)},x.set=function If(t,i,d){return null==t?t:$i(t,i,d)},x.setWith=function Bf(t,i,d,y){return y="function"==typeof y?y:E,null==t?t:$i(t,i,d,y)},x.shuffle=function yd(t){return(It(t)?Uc:du)(t)},x.slice=function mh(t,i,d){var y=null==t?0:t.length;return y?(d&&"number"!=typeof d&&we(t,i,d)?(i=0,d=y):(i=null==i?0:jt(i),d=d===E?y:jt(d)),Ue(t,i,d)):[]},x.sortBy=Cd,x.sortedUniq=function Sh(t){return t&&t.length?ma(t):[]},x.sortedUniqBy=function Th(t,i){return t&&t.length?ma(t,Lt(i,2)):[]},x.split=function ap(t,i,d){return d&&"number"!=typeof d&&we(t,i,d)&&(i=d=E),(d=d===E?D:d>>>0)?(t=Zt(t))&&("string"==typeof i||null!=i&&!Zr(i))&&!(i=Ee(i))&&Ei(t)?mi(Xe(t),0,d):t.split(i,d):[]},x.spread=function Ed(t,i){if("function"!=typeof t)throw new je(de);return i=null==i?0:he(jt(i),0),Ht(function(d){var y=d[i],w=mi(d,0,i);return y&&hi(w,y),Pe(t,this,w)})},x.tail=function kh(t){var i=null==t?0:t.length;return i?Ue(t,1,i):[]},x.take=function Oh(t,i,d){return t&&t.length?Ue(t,0,(i=d||i===E?1:jt(i))<0?0:i):[]},x.takeRight=function Ah(t,i,d){var y=null==t?0:t.length;return y?Ue(t,(i=y-(i=d||i===E?1:jt(i)))<0?0:i,y):[]},x.takeRightWhile=function Ph(t,i){return t&&t.length?En(t,Lt(i,3),!1,!0):[]},x.takeWhile=function Lh(t,i){return t&&t.length?En(t,Lt(i,3)):[]},x.tap=function Xh(t,i){return i(t),t},x.throttle=function Dd(t,i,d){var y=!0,w=!0;if("function"!=typeof t)throw new je(de);return re(d)&&(y="leading"in d?!!d.leading:y,w="trailing"in d?!!d.trailing:w),fo(t,i,{leading:y,maxWait:i,trailing:w})},x.thru=Hn,x.toArray=yo,x.toPairs=To,x.toPairsIn=ko,x.toPath=function Hp(t){return It(t)?ie(t,$e):De(t)?[t]:Te(Ka(Zt(t)))},x.toPlainObject=wo,x.transform=function jf(t,i,d){var y=It(t),w=y||vi(t)||Hi(t);if(i=Lt(i,4),null==d){var T=t&&t.constructor;d=w?y?new T:[]:re(t)&&oi(T)?Ii(vn(t)):{}}return(w?Be:Je)(t,function(L,B,W){return i(d,L,B,W)}),d},x.unary=function Fd(t){return oo(t,1)},x.union=Eh,x.unionBy=Dh,x.unionWith=Fh,x.uniq=function Mh(t){return t&&t.length?gi(t):[]},x.uniqBy=function Rh(t,i){return t&&t.length?gi(t,Lt(i,2)):[]},x.uniqWith=function Ih(t,i){return i="function"==typeof i?i:E,t&&t.length?gi(t,E,i):[]},x.unset=function zf(t,i){return null==t||Or(t,i)},x.unzip=Nr,x.unzipWith=no,x.update=function Hf(t,i,d){return null==t?t:ya(t,i,Lr(d))},x.updateWith=function Uf(t,i,d,y){return y="function"==typeof y?y:E,null==t?t:ya(t,i,Lr(d),y)},x.values=Ui,x.valuesIn=function Wf(t){return null==t?[]:lr(t,Oe(t))},x.without=Bh,x.words=Po,x.wrap=function Md(t,i){return Gr(Lr(i),t)},x.xor=jh,x.xorBy=zh,x.xorWith=Hh,x.zip=Uh,x.zipObject=function Wh(t,i){return wa(t||[],i||[],Vi)},x.zipObjectDeep=function Yh(t,i){return wa(t||[],i||[],$i)},x.zipWith=Nh,x.entries=To,x.entriesIn=ko,x.extend=Co,x.extendWith=qn,ts(x,x),x.add=Wp,x.attempt=Lo,x.camelCase=Gf,x.capitalize=Oo,x.ceil=Yp,x.clamp=function Yf(t,i,d){return d===E&&(d=i,i=E),d!==E&&(d=(d=Ye(d))==d?d:0),i!==E&&(i=(i=Ye(i))==i?i:0),Si(Ye(t),i,d)},x.clone=function Id(t){return He(t,e)},x.cloneDeep=function jd(t){return He(t,n|e)},x.cloneDeepWith=function zd(t,i){return He(t,n|e,i="function"==typeof i?i:E)},x.cloneWith=function Bd(t,i){return He(t,e,i="function"==typeof i?i:E)},x.conformsTo=function Hd(t,i){return null==i||ta(t,i,fe(i))},x.deburr=Ao,x.defaultTo=function wp(t,i){return null==t||t!=t?i:t},x.divide=Np,x.endsWith=function qf(t,i,d){t=Zt(t),i=Ee(i);var y=t.length,w=d=d===E?y:Si(jt(d),0,y);return(d-=i.length)>=0&&t.slice(d,w)==i},x.eq=qe,x.escape=function Zf(t){return(t=Zt(t))&&Re.test(t)?t.replace(oe,Il):t},x.escapeRegExp=function Vf(t){return(t=Zt(t))&&Fo.test(t)?t.replace(Se,"\\$&"):t},x.every=function ed(t,i,d){var y=It(t)?Fs:Xc;return d&&we(t,i,d)&&(i=E),y(t,Lt(i,3))},x.find=nd,x.findIndex=Qa,x.findKey=function mf(t,i){return Ms(t,Lt(i,3),Je)},x.findLast=rd,x.findLastIndex=$a,x.findLastKey=function vf(t,i){return Ms(t,Lt(i,3),mr)},x.floor=Xp,x.forEach=so,x.forEachRight=ao,x.forIn=function yf(t,i){return null==t?t:_r(t,Lt(i,3),Oe)},x.forInRight=function bf(t,i){return null==t?t:ra(t,Lt(i,3),Oe)},x.forOwn=function wf(t,i){return t&&Je(t,Lt(i,3))},x.forOwnRight=function Cf(t,i){return t&&mr(t,Lt(i,3))},x.get=Vr,x.gt=Ud,x.gte=Wd,x.has=function Tf(t,i){return null!=t&&Ua(t,i,qc)},x.hasIn=Kr,x.head=eo,x.identity=Ae,x.includes=function cd(t,i,d,y){t=ke(t)?t:Ui(t),d=d&&!y?jt(d):0;var w=t.length;return d<0&&(d=he(w+d,0)),Gn(t)?d<=w&&t.indexOf(i,d)>-1:!!w&&Li(t,i,d)>-1},x.indexOf=function rh(t,i,d){var y=null==t?0:t.length;if(!y)return-1;var w=null==d?0:jt(d);return w<0&&(w=he(y+w,0)),Li(t,i,w)},x.inRange=function Nf(t,i,d){return i=li(i),d===E?(d=i,i=0):d=li(d),function Vc(t,i,d){return t>=me(i,d)&&t<he(i,d)}(t=Ye(t),i,d)},x.invoke=Af,x.isArguments=Ai,x.isArray=It,x.isArrayBuffer=Yd,x.isArrayLike=ke,x.isArrayLikeObject=le,x.isBoolean=function Nd(t){return!0===t||!1===t||ae(t)&&be(t)==J},x.isBuffer=vi,x.isDate=Xd,x.isElement=function Gd(t){return ae(t)&&1===t.nodeType&&!rn(t)},x.isEmpty=function qd(t){if(null==t)return!0;if(ke(t)&&(It(t)||"string"==typeof t||"function"==typeof t.splice||vi(t)||Hi(t)||Ai(t)))return!t.length;var i=ve(t);if(i==U||i==yt)return!t.size;if(en(t))return!wr(t).length;for(var d in t)if(Vt.call(t,d))return!1;return!0},x.isEqual=function Zd(t,i){return Qi(t,i)},x.isEqualWith=function Vd(t,i,d){var y=(d="function"==typeof d?d:E)?d(t,i):E;return y===E?Qi(t,i,E,d):!!y},x.isError=qr,x.isFinite=function Kd(t){return"number"==typeof t&&Zs(t)},x.isFunction=oi,x.isInteger=go,x.isLength=Xn,x.isMap=_o,x.isMatch=function Jd(t,i){return t===i||br(t,i,Br(i))},x.isMatchWith=function Qd(t,i,d){return d="function"==typeof d?d:E,br(t,i,Br(i),d)},x.isNaN=function $d(t){return mo(t)&&t!=+t},x.isNative=function tf(t){if(Bu(t))throw new Rt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return oa(t)},x.isNil=function nf(t){return null==t},x.isNull=function ef(t){return null===t},x.isNumber=mo,x.isObject=re,x.isObjectLike=ae,x.isPlainObject=rn,x.isRegExp=Zr,x.isSafeInteger=function rf(t){return go(t)&&t>=-vt&&t<=vt},x.isSet=vo,x.isString=Gn,x.isSymbol=De,x.isTypedArray=Hi,x.isUndefined=function sf(t){return t===E},x.isWeakMap=function af(t){return ae(t)&&ve(t)==Bt},x.isWeakSet=function of(t){return ae(t)&&"[object WeakSet]"==be(t)},x.join=function ch(t,i){return null==t?"":sc.call(t,i)},x.kebabCase=Kf,x.last=We,x.lastIndexOf=function uh(t,i,d){var y=null==t?0:t.length;if(!y)return-1;var w=y;return d!==E&&(w=(w=jt(d))<0?he(y+w,0):me(w,y-1)),i==i?function Yl(H,tt,V){for(var Ct=V+1;Ct--;)if(H[Ct]===tt)return Ct;return Ct}(t,i,w):cn(t,Rs,w,!0)},x.lowerCase=Jf,x.lowerFirst=Qf,x.lt=lf,x.lte=cf,x.max=function Gp(t){return t&&t.length?On(t,Ae,vr):E},x.maxBy=function qp(t,i){return t&&t.length?On(t,Lt(i,2),vr):E},x.mean=function Zp(t){return Is(t,Ae)},x.meanBy=function Vp(t,i){return Is(t,Lt(i,2))},x.min=function Kp(t){return t&&t.length?On(t,Ae,Cr):E},x.minBy=function Jp(t,i){return t&&t.length?On(t,Lt(i,2),Cr):E},x.stubArray=is,x.stubFalse=ns,x.stubObject=function Ip(){return{}},x.stubString=function Bp(){return""},x.stubTrue=function jp(){return!0},x.multiply=Qp,x.nth=function hh(t,i){return t&&t.length?da(t,jt(i)):E},x.noConflict=function Ap(){return pe._===this&&(pe._=$l),this},x.noop=es,x.now=Wn,x.pad=function $f(t,i,d){t=Zt(t);var y=(i=jt(i))?Di(t):0;if(!i||y>=i)return t;var w=(i-y)/2;return Rn(Cn(w),d)+t+Rn(wn(w),d)},x.padEnd=function tp(t,i,d){t=Zt(t);var y=(i=jt(i))?Di(t):0;return i&&y<i?t+Rn(i-y,d):t},x.padStart=function ep(t,i,d){t=Zt(t);var y=(i=jt(i))?Di(t):0;return i&&y<i?Rn(i-y,d)+t:t},x.parseInt=function ip(t,i,d){return d||null==i?i=0:i&&(i=+i),lc(Zt(t).replace(Zn,""),i||0)},x.random=function Xf(t,i,d){if(d&&"boolean"!=typeof d&&we(t,i,d)&&(i=d=E),d===E&&("boolean"==typeof i?(d=i,i=E):"boolean"==typeof t&&(d=t,t=E)),t===E&&i===E?(t=0,i=1):(t=li(t),i===E?(i=t,t=0):i=li(i)),t>i){var y=t;t=i,i=y}if(d||t%1||i%1){var w=Vs();return me(t+w*(i-t+Cl("1e-"+((w+"").length-1))),i)}return Sr(t,i)},x.reduce=function pd(t,i,d){var y=It(t)?ir:Bs,w=arguments.length<3;return y(t,Lt(i,4),d,w,pi)},x.reduceRight=function gd(t,i,d){var y=It(t)?Ol:Bs,w=arguments.length<3;return y(t,Lt(i,4),d,w,ia)},x.repeat=function np(t,i,d){return i=(d?we(t,i,d):i===E)?1:jt(i),Tr(Zt(t),i)},x.replace=function rp(){var t=arguments,i=Zt(t[0]);return t.length<3?i:i.replace(t[1],t[2])},x.result=function Rf(t,i,d){var y=-1,w=(i=_i(i,t)).length;for(w||(w=1,t=E);++y<w;){var T=null==t?E:t[$e(i[y])];T===E&&(y=w,T=d),t=oi(T)?T.call(t):T}return t},x.round=$p,x.runInContext=H,x.sample=function md(t){return(It(t)?Qs:cu)(t)},x.size=function bd(t){if(null==t)return 0;if(ke(t))return Gn(t)?Di(t):t.length;var i=ve(t);return i==U||i==yt?t.size:wr(t).length},x.snakeCase=sp,x.some=function wd(t,i,d){var y=It(t)?nr:fu;return d&&we(t,i,d)&&(i=E),y(t,Lt(i,3))},x.sortedIndex=function vh(t,i){return Ln(t,i)},x.sortedIndexBy=function yh(t,i,d){return kr(t,i,Lt(d,2))},x.sortedIndexOf=function bh(t,i){var d=null==t?0:t.length;if(d){var y=Ln(t,i);if(y<d&&qe(t[y],i))return y}return-1},x.sortedLastIndex=function wh(t,i){return Ln(t,i,!0)},x.sortedLastIndexBy=function Ch(t,i,d){return kr(t,i,Lt(d,2),!0)},x.sortedLastIndexOf=function xh(t,i){if(null!=t&&t.length){var y=Ln(t,i,!0)-1;if(qe(t[y],i))return y}return-1},x.startCase=op,x.startsWith=function lp(t,i,d){return t=Zt(t),d=null==d?0:Si(jt(d),0,t.length),i=Ee(i),t.slice(d,d+i.length)==i},x.subtract=tg,x.sum=function eg(t){return t&&t.length?ar(t,Ae):0},x.sumBy=function ig(t,i){return t&&t.length?ar(t,Lt(i,2)):0},x.template=function cp(t,i,d){var y=x.templateSettings;d&&we(t,i,d)&&(i=E),t=Zt(t),i=qn({},i,y,Ba);var B,W,w=qn({},i.imports,y.imports,Ba),T=fe(w),L=lr(w,T),nt=0,at=i.interpolate||sn,ct="__p += '",mt=ur((i.escape||sn).source+"|"+at.source+"|"+(at===Xt?Uo:sn).source+"|"+(i.evaluate||sn).source+"|$","g"),Tt="//# sourceURL="+(Vt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ml+"]")+"\n";t.replace(mt,function(Dt,Wt,Nt,Fe,Ce,Me){return Nt||(Nt=Fe),ct+=t.slice(nt,Me).replace(Zo,Bl),Wt&&(B=!0,ct+="' +\n__e("+Wt+") +\n'"),Ce&&(W=!0,ct+="';\n"+Ce+";\n__p += '"),Nt&&(ct+="' +\n((__t = ("+Nt+")) == null ? '' : __t) +\n'"),nt=Me+Dt.length,Dt}),ct+="';\n";var Et=Vt.call(i,"variable")&&i.variable;if(Et){if(zo.test(Et))throw new Rt("Invalid `variable` option passed into `_.template`")}else ct="with (obj) {\n"+ct+"\n}\n";ct=(W?ct.replace(xt,""):ct).replace(Ot,"$1").replace(Gt,"$1;"),ct="function("+(Et||"obj")+") {\n"+(Et?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(B?", __e = _.escape":"")+(W?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+ct+"return __p\n}";var zt=Lo(function(){return qt(T,Tt+"return "+ct).apply(E,L)});if(zt.source=ct,qr(zt))throw zt;return zt},x.times=function zp(t,i){if((t=jt(t))<1||t>vt)return[];var d=D,y=me(t,D);i=Lt(i),t-=D;for(var w=or(y,i);++d<t;)i(d);return w},x.toFinite=li,x.toInteger=jt,x.toLength=bo,x.toLower=function up(t){return Zt(t).toLowerCase()},x.toNumber=Ye,x.toSafeInteger=function uf(t){return t?Si(jt(t),-vt,vt):0===t?t:0},x.toString=Zt,x.toUpper=function hp(t){return Zt(t).toUpperCase()},x.trim=function dp(t,i,d){if((t=Zt(t))&&(d||i===E))return js(t);if(!t||!(i=Ee(i)))return t;var y=Xe(t),w=Xe(i);return mi(y,zs(y,w),Hs(y,w)+1).join("")},x.trimEnd=function fp(t,i,d){if((t=Zt(t))&&(d||i===E))return t.slice(0,Ws(t)+1);if(!t||!(i=Ee(i)))return t;var y=Xe(t);return mi(y,0,Hs(y,Xe(i))+1).join("")},x.trimStart=function pp(t,i,d){if((t=Zt(t))&&(d||i===E))return t.replace(Zn,"");if(!t||!(i=Ee(i)))return t;var y=Xe(t);return mi(y,zs(y,Xe(i))).join("")},x.truncate=function gp(t,i){var d=30,y="...";if(re(i)){var w="separator"in i?i.separator:w;d="length"in i?jt(i.length):d,y="omission"in i?Ee(i.omission):y}var T=(t=Zt(t)).length;if(Ei(t)){var L=Xe(t);T=L.length}if(d>=T)return t;var B=d-Di(y);if(B<1)return y;var W=L?mi(L,0,B).join(""):t.slice(0,B);if(w===E)return W+y;if(L&&(B+=W.length-B),Zr(w)){if(t.slice(B).search(w)){var nt,at=W;for(w.global||(w=ur(w.source,Zt(ss.exec(w))+"g")),w.lastIndex=0;nt=w.exec(at);)var ct=nt.index;W=W.slice(0,ct===E?B:ct)}}else if(t.indexOf(Ee(w),B)!=B){var mt=W.lastIndexOf(w);mt>-1&&(W=W.slice(0,mt))}return W+y},x.unescape=function _p(t){return(t=Zt(t))&&ye.test(t)?t.replace(ne,Nl):t},x.uniqueId=function Up(t){var i=++Jl;return Zt(t)+i},x.upperCase=mp,x.upperFirst=Jr,x.each=so,x.eachRight=ao,x.first=eo,ts(x,function(){var t={};return Je(x,function(i,d){Vt.call(x.prototype,d)||(t[d]=i)}),t}(),{chain:!1}),x.VERSION="4.17.21",Be(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){x[t].placeholder=x}),Be(["drop","take"],function(t,i){Yt.prototype[t]=function(d){d=d===E?1:he(jt(d),0);var y=this.__filtered__&&!i?new Yt(this):this.clone();return y.__filtered__?y.__takeCount__=me(d,y.__takeCount__):y.__views__.push({size:me(d,D),type:t+(y.__dir__<0?"Right":"")}),y},Yt.prototype[t+"Right"]=function(d){return this.reverse()[t](d).reverse()}}),Be(["filter","map","takeWhile"],function(t,i){var d=i+1,y=1==d||3==d;Yt.prototype[t]=function(w){var T=this.clone();return T.__iteratees__.push({iteratee:Lt(w,3),type:d}),T.__filtered__=T.__filtered__||y,T}}),Be(["head","last"],function(t,i){var d="take"+(i?"Right":"");Yt.prototype[t]=function(){return this[d](1).value()[0]}}),Be(["initial","tail"],function(t,i){var d="drop"+(i?"":"Right");Yt.prototype[t]=function(){return this.__filtered__?new Yt(this):this[d](1)}}),Yt.prototype.compact=function(){return this.filter(Ae)},Yt.prototype.find=function(t){return this.filter(t).head()},Yt.prototype.findLast=function(t){return this.reverse().find(t)},Yt.prototype.invokeMap=Ht(function(t,i){return"function"==typeof t?new Yt(this):this.map(function(d){return Ji(d,t,i)})}),Yt.prototype.reject=function(t){return this.filter(Nn(Lt(t)))},Yt.prototype.slice=function(t,i){t=jt(t);var d=this;return d.__filtered__&&(t>0||i<0)?new Yt(d):(t<0?d=d.takeRight(-t):t&&(d=d.drop(t)),i!==E&&(d=(i=jt(i))<0?d.dropRight(-i):d.take(i-t)),d)},Yt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Yt.prototype.toArray=function(){return this.take(D)},Je(Yt.prototype,function(t,i){var d=/^(?:filter|find|map|reject)|While$/.test(i),y=/^(?:head|last)$/.test(i),w=x[y?"take"+("last"==i?"Right":""):i],T=y||/^find/.test(i);w&&(x.prototype[i]=function(){var L=this.__wrapped__,B=y?[1]:arguments,W=L instanceof Yt,nt=B[0],at=W||It(L),ct=function(Wt){var Nt=w.apply(x,hi([Wt],B));return y&&mt?Nt[0]:Nt};at&&d&&"function"==typeof nt&&1!=nt.length&&(W=at=!1);var mt=this.__chain__,Et=T&&!mt,zt=W&&!this.__actions__.length;if(!T&&at){L=zt?L:new Yt(this);var Dt=t.apply(L,B);return Dt.__actions__.push({func:Hn,args:[ct],thisArg:E}),new ze(Dt,mt)}return Et&&zt?t.apply(this,B):(Dt=this.thru(ct),Et?y?Dt.value()[0]:Dt.value():Dt)})}),Be(["pop","push","shift","sort","splice","unshift"],function(t){var i=dn[t],d=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",y=/^(?:pop|shift)$/.test(t);x.prototype[t]=function(){var w=arguments;if(y&&!this.__chain__){var T=this.value();return i.apply(It(T)?T:[],w)}return this[d](function(L){return i.apply(It(L)?L:[],w)})}}),Je(Yt.prototype,function(t,i){var d=x[i];if(d){var y=d.name+"";Vt.call(Ri,y)||(Ri[y]=[]),Ri[y].push({name:i,func:d})}}),Ri[Fn(E,h).name]=[{name:"wrapper",func:E}],Yt.prototype.clone=function gc(){var t=new Yt(this.__wrapped__);return t.__actions__=Te(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Te(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Te(this.__views__),t},Yt.prototype.reverse=function _c(){if(this.__filtered__){var t=new Yt(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Yt.prototype.value=function mc(){var t=this.__wrapped__.value(),i=this.__dir__,d=It(t),y=i<0,w=d?t.length:0,T=function Pu(t,i,d){for(var y=-1,w=d.length;++y<w;){var T=d[y],L=T.size;switch(T.type){case"drop":t+=L;break;case"dropRight":i-=L;break;case"take":i=me(i,t+L);break;case"takeRight":t=he(t,i-L)}}return{start:t,end:i}}(0,w,this.__views__),L=T.start,B=T.end,W=B-L,nt=y?B:L-1,at=this.__iteratees__,ct=at.length,mt=0,Tt=me(W,this.__takeCount__);if(!d||!y&&w==W&&Tt==W)return ba(t,this.__actions__);var Et=[];t:for(;W--&&mt<Tt;){for(var zt=-1,Dt=t[nt+=i];++zt<ct;){var Wt=at[zt],Fe=Wt.type,Ce=(0,Wt.iteratee)(Dt);if(2==Fe)Dt=Ce;else if(!Ce){if(1==Fe)continue t;break t}}Et[mt++]=Dt}return Et},x.prototype.at=Gh,x.prototype.chain=function qh(){return ro(this)},x.prototype.commit=function Zh(){return new ze(this.value(),this.__chain__)},x.prototype.next=function Vh(){this.__values__===E&&(this.__values__=yo(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?E:this.__values__[this.__index__++]}},x.prototype.plant=function Jh(t){for(var i,d=this;d instanceof Tn;){var y=Ja(d);y.__index__=0,y.__values__=E,i?w.__wrapped__=y:i=y;var w=y;d=d.__wrapped__}return w.__wrapped__=t,i},x.prototype.reverse=function Qh(){var t=this.__wrapped__;if(t instanceof Yt){var i=t;return this.__actions__.length&&(i=new Yt(this)),(i=i.reverse()).__actions__.push({func:Hn,args:[Yr],thisArg:E}),new ze(i,this.__chain__)}return this.thru(Yr)},x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=function $h(){return ba(this.__wrapped__,this.__actions__)},x.prototype.first=x.prototype.head,Ni&&(x.prototype[Ni]=function Kh(){return this}),x}();pe._=hn,(_=function(){return hn}.call(At,se,At,ti))!==E&&(ti.exports=_)}.call(this)},4960:()=>{},6759:()=>{},6272:()=>{}}]);